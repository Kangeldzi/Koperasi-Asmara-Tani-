<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Post & Page Dashboard - Koperasi</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --green-1: #2e7d32;
      --green-2: #4caf50;
      --green-3: #81c784;
      --green-light: #e8f5e9;
      --white: #ffffff;
      --gray: #f5f5f5;
      --dark-green: #1b5e20;
      --light-border: #e0e0e0;
      --sidebar-width: 280px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
    }

    body {
      background: linear-gradient(135deg, var(--green-2), var(--green-1));
      color: #333;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* HEADER BUTTONS - IMPROVED LAYOUT */
    .header-buttons {
      position: fixed;
      top: 20px;
      left: 20px;
      display: flex;
      gap: 15px;
      z-index: 1000;
      align-items: center;
    }

    .back-home, .hamburger {
      background: var(--white);
      border-radius: 12px;
      border: 1px solid var(--green-2);
      color: var(--green-1);
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s ease;
      padding: 10px 16px;
    }

    .back-home:hover, .hamburger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      background: var(--green-light);
    }

    .back-home {
      font-size: 0.95rem;
    }

    .hamburger {
      width: 44px;
      height: 44px;
      flex-direction: column;
      justify-content: center;
      padding: 0;
    }

    .hamburger span {
      width: 20px;
      height: 2px;
      background: var(--green-2);
      margin: 2px 0;
      transition: 0.3s;
      border-radius: 2px;
    }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }

    /* NOTIFICATION BELL - MOVED TO BOTTOM */
    .notification-bell {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--white);
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .notification-bell:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .notification-bell i {
      font-size: 1.2rem;
      color: var(--green-2);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4757;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid var(--white);
    }

    /* NOTIFICATION PANEL - ADJUSTED POSITION */
    .notification-panel {
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 350px;
      background: var(--white);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 1001;
      display: none;
      max-height: 400px;
      overflow-y: auto;
    }

    .notification-panel.active {
      display: block;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .notification-header {
      padding: 20px;
      border-bottom: 1px solid var(--light-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .notification-header h3 {
      color: var(--dark-green);
      font-size: 1.1rem;
    }

    .clear-notifications {
      background: none;
      border: none;
      color: var(--green-2);
      cursor: pointer;
      font-size: 0.9rem;
    }

    .notification-list {
      padding: 0;
    }

    .notification-item {
      padding: 15px 20px;
      border-bottom: 1px solid var(--light-border);
      display: flex;
      align-items: flex-start;
      gap: 12px;
      transition: background 0.2s;
      cursor: pointer;
    }

    .notification-item:hover {
      background: var(--green-light);
    }

    .notification-item.unread {
      background: #f8f9ff;
    }

    .notification-icon {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .notification-icon.info {
      background: #e3f2fd;
      color: #1976d2;
    }

    .notification-icon.success {
      background: #e8f5e8;
      color: #2e7d32;
    }

    .notification-icon.warning {
      background: #fff3e0;
      color: #f57c00;
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: #333;
    }

    .notification-message {
      font-size: 0.85rem;
      color: #666;
      line-height: 1.4;
    }

    .notification-time {
      font-size: 0.75rem;
      color: #999;
      margin-top: 4px;
    }

    .no-notifications {
      padding: 40px 20px;
      text-align: center;
      color: #999;
    }

    /* SIDEBAR - MODERN DESIGN */
    .sidebar {
      position: fixed;
      top: 0;
      left: -280px;
      width: var(--sidebar-width);
      height: 100vh;
      background: linear-gradient(135deg, #1a535c, #2e7d32);
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      flex-direction: column;
    }

    .sidebar.active {
      left: 0;
    }

    .sidebar-header {
      padding: 25px 20px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.05);
    }

    .sidebar-title {
      color: white;
      font-size: 1.3rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sidebar-title i {
      color: #81c784;
    }

    .close-sidebar {
      background: rgba(255,255,255,0.1);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      transition: all 0.3s ease;
    }

    .close-sidebar:hover {
      background: rgba(255,255,255,0.2);
      transform: rotate(90deg);
    }

    .sidebar-menu {
      flex: 1;
      padding: 20px 0;
      overflow-y: auto;
    }

    .menu-item {
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: rgba(255,255,255,0.9);
      font-weight: 500;
      position: relative;
      margin: 4px 12px;
      border-radius: 12px;
    }

    .menu-item:hover {
      background: rgba(255,255,255,0.1);
      transform: translateX(5px);
    }

    .menu-item.active {
      background: rgba(255,255,255,0.15);
      color: white;
    }

    .menu-item i {
      width: 20px;
      text-align: center;
      font-size: 1.1rem;
      color: #81c784;
    }

    .menu-item.active i {
      color: #4caf50;
    }

    .menu-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 0;
      background: #4caf50;
      border-radius: 0 4px 4px 0;
      transition: height 0.3s ease;
    }

    .menu-item.active::before {
      height: 60%;
    }

    .sidebar-footer {
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.05);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      color: white;
      margin-bottom: 15px;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4caf50, #81c784);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .user-details {
      flex: 1;
    }

    .user-name {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .user-role {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    /* MAIN CONTENT */
    .main-content {
      margin-left: 0;
      padding: 90px 20px 60px;
      transition: margin-left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .main-content.sidebar-open {
      margin-left: var(--sidebar-width);
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--white);
      width: 90%;
      max-width: 800px;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      max-height: 90vh;
      overflow-y: auto;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9) translateY(-20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .close-modal {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
      color: #aaa;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .close-modal:hover {
      background: #f5f5f5;
      color: #666;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background: var(--white);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      border: 1px solid var(--light-border);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 10px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
      font-weight: 500;
    }

    .btn-preview { background: #e0f7fa; color: #00796b; }
    .btn-edit { background: #fff8e1; color: #f57f17; }
    .btn-delete { background: #ffebee; color: #c62828; }
    .btn-add { background: var(--green-2); color: white; padding: 12px 20px; }
    .btn-reply { background: #e3f2fd; color: #1976d2; }
    .btn-share { background: #f3e5f5; color: #7b1fa2; }

    textarea#articleContent {
      width: 100%;
      min-height: 200px;
      padding: 16px;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      font-family: inherit;
      resize: vertical;
      font-size: 1rem;
      line-height: 1.6;
    }

    .text-align-dropdown {
      margin: 15px 0;
      position: relative;
      display: inline-block;
    }

    .text-align-dropdown select {
      padding: 10px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      font-size: 0.9rem;
      min-width: 150px;
    }

    .navbar-top {
      display: flex;
      gap: 12px;
      margin-bottom: 30px;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(255,255,255,0.95);
      padding: 12px;
      text-align: center;
      font-size: 0.85rem;
      color: var(--dark-green);
      border-top: 1px solid var(--light-border);
      z-index: 999;
      backdrop-filter: blur(10px);
    }

    #dashboard, #login-page { display: none; }

    /* FULL-WIDTH PREVIEW */
    .preview-article {
      line-height: 1.8;
      font-size: 1.1rem;
      color: #222;
      padding: 0;
      width: 100%;
      margin: 0 auto;
    }

    .preview-article h1 {
      font-size: 2.2rem;
      margin: 0 0 20px;
      color: var(--green-1);
      text-align: center;
      word-wrap: break-word;
    }

    .preview-article .meta {
      color: #777;
      font-size: 0.95rem;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--light-border);
      padding-bottom: 15px;
      text-align: center;
    }

    .preview-article img {
      max-width: 100%;
      border-radius: 12px;
      margin: 25px 0;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .preview-article p {
      margin-bottom: 20px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    /* REACTIONS - SMALLER LIKE FACEBOOK */
    .reactions {
      display: flex;
      gap: 8px;
      margin: 25px 0;
      padding: 12px;
      background: #f9f9f9;
      border-radius: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .reaction-btn {
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 4px;
    }

    .reaction-btn:hover {
      transform: scale(1.2);
    }

    /* COMMENT SECTION - IMPROVED LAYOUT */
    .comments-section {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid var(--light-border);
    }

    .comment-form {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .comment-form input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid var(--light-border);
      border-radius: 5px;
      font-size: 0.95rem;
      width: 100%;
    }

    .comment-form button {
      background: var(--green-2);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 8px 16px;
      cursor: pointer;
      font-weight: 500;
      align-self: flex-end;
      width: auto;
      min-width: 80px;
    }

    /* EMOJI PICKER - SMALLER SIZE */
    .emoji-picker {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      font-size: 1rem;
      justify-content: flex-start;
      flex-wrap: wrap;
    }

    .emoji-picker span {
      cursor: pointer;
      transition: transform 0.2s;
      padding: 2px;
    }

    .emoji-picker span:hover {
      transform: scale(1.2);
    }

    .comment-item {
      margin: 20px 0;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .comment-author {
      font-weight: 600;
      color: var(--green-2);
    }

    .comment-date {
      font-size: 0.85rem;
      color: #888;
    }

    .reply-form {
      margin-top: 12px;
      display: none;
      gap: 8px;
      flex-direction: column;
    }

    .reply-form.active {
      display: flex;
    }

    .reply-form input {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 100%;
    }

    .reply-form button {
      background: #1976d2;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 6px 12px;
      cursor: pointer;
      align-self: flex-end;
      width: auto;
      min-width: 70px;
    }

    /* COPY SUCCESS NOTIFICATION */
    .copy-notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #4caf50, #45a049);
      color: white;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 10000;
      max-width: 400px;
      animation: slideInRight 0.3s ease;
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOutRight {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* UPLOAD AREA STYLES */
    .upload-area {
      margin-top: 20px;
      border: 2px dashed #ccc;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
      background-color: #f9f9f9;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .upload-area:hover {
      border-color: var(--green-2);
      background-color: #f0f9f0;
    }

    .upload-area.active {
      border-color: var(--green-2);
      background-color: #e8f5e9;
    }

    .upload-icon {
      font-size: 2.5rem;
      color: var(--green-2);
      margin-bottom: 10px;
    }

    .upload-text {
      margin-bottom: 15px;
      color: #555;
    }

    .upload-btn {
      background: var(--green-2);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .upload-btn:hover {
      background: var(--green-1);
    }

    .upload-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
      justify-content: flex-start;
    }

    .upload-preview-item {
      position: relative;
      width: 100px;
      height: 100px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .upload-preview-item img, .upload-preview-item video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .upload-preview-item .remove-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255, 255, 255, 0.8);
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 0.8rem;
      color: #ff4757;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        left: -100%;
      }
      
      .main-content.sidebar-open {
        margin-left: 0;
      }
      
      .notification-panel {
        width: calc(100vw - 40px);
        right: 20px;
        bottom: 80px;
      }
      
      .preview-article {
        font-size: 1.15rem;
        padding: 0;
        width: 100%;
      }
      
      .preview-article h1 {
        font-size: 1.8rem;
        padding: 0 10px;
      }
      
      .preview-article .meta {
        padding: 0 10px 15px 10px;
      }
      
      .preview-article p {
        padding: 0 10px;
      }
      
      .modal-content {
        width: 95%;
        padding: 20px;
      }
      
      .header-buttons {
        flex-direction: row;
        align-items: center;
        gap: 10px;
      }
      
      .reactions {
        margin: 20px 10px;
        padding: 10px;
      }
      
      .comments-section {
        margin: 30px 10px 0 10px;
        padding: 20px 0 0 0;
      }
      
      .comment-form {
        margin: 15px 0 0 0;
      }
      
      .copy-notification {
        right: 10px;
        left: 10px;
        max-width: none;
      }
      
      .notification-bell {
        bottom: 20px;
        right: 20px;
      }
      
      .upload-preview {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .header-buttons {
        flex-direction: row;
        align-items: center;
        gap: 8px;
      }
      
      .back-home {
        font-size: 0.8rem;
        padding: 8px 12px;
      }
      
      .hamburger {
        width: 40px;
        height: 40px;
      }
      
      .upload-area {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- NOTIFICATION BELL -->
  <div class="notification-bell" id="notificationBell">
    <i class="fas fa-bell"></i>
    <div class="notification-badge" id="notificationBadge">3</div>
  </div>

  <!-- NOTIFICATION PANEL -->
  <div class="notification-panel" id="notificationPanel">
    <div class="notification-header">
      <h3>Notifikasi</h3>
      <button class="clear-notifications" onclick="clearAllNotifications()">
        <i class="fas fa-trash"></i> Hapus Semua
      </button>
    </div>
    <div class="notification-list" id="notificationList">
      <!-- Notifications will be populated by JavaScript -->
    </div>
  </div>

  <!-- LOGIN -->
  <div id="login-page">
    <div class="header-buttons">
      <button class="back-home" onclick="window.location.href='dashboard-admin.html'">
        <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
      </button>
    </div>
    
    <div class="login-container" style="max-width:400px; margin:120px auto; background:white; padding:30px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.2);">
      <h2 style="color:var(--green-1); text-align:center;"><i class="fas fa-lock"></i> Login Admin</h2>
      <div class="form-group" style="margin-bottom:16px;">
        <label>Email</label>
        <input type="email" id="email" placeholder="admin@koperasi.com" style="width:100%; padding:10px; border:1px solid #ccc; border-radius:6px;" />
      </div>
      <div class="form-group" style="position:relative; margin-bottom:16px;">
        <label>Password</label>
        <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width:100%; padding:10px 30px 10px 10px; border:1px solid #ccc; border-radius:6px;" />
        <span class="toggle-pass" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; color:#777;" onclick="togglePassword()">
          <i class="fas fa-eye"></i>
        </span>
      </div>
      <button class="btn-add" style="width:100%;" onclick="login()">Masuk</button>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard">
    <div class="header-buttons">
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <button class="back-home" onclick="window.location.href='dashboard-admin.html'">
        <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
      </button>
    </div>

    <!-- MODERN SIDEBAR -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-title">
          <i class="fas fa-leaf"></i>
          <span>Koperasi Dashboard</span>
        </div>
        <button class="close-sidebar" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="sidebar-menu">
        <div class="menu-item active" data-modal="editor">
          <i class="fas fa-edit"></i> Editor Post & Page
        </div>
        <div class="menu-item" data-modal="posts">
          <i class="fas fa-newspaper"></i> Semua Postingan
        </div>
        <div class="menu-item" data-modal="static">
          <i class="fas fa-file-alt"></i> Halaman Statis
        </div>
        <div class="menu-item" data-modal="media">
          <i class="fas fa-images"></i> Media Library
        </div>
        <div class="menu-item" data-modal="analytics">
          <i class="fas fa-chart-line"></i> Analitik
        </div>
        <div class="menu-item" data-modal="comments">
          <i class="fas fa-comments"></i> Komentar
        </div>
        <div class="menu-item" data-modal="settings">
          <i class="fas fa-cog"></i> Pengaturan
        </div>
      </div>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">A</div>
          <div class="user-details">
            <div class="user-name">Admin Koperasi</div>
            <div class="user-role">Administrator</div>
          </div>
        </div>
        <div class="menu-item" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i> Tutup Sesi
        </div>
      </div>
    </div>

    <div class="main-content" id="mainContent">
      <div class="navbar-top">
        <button class="btn btn-add" onclick="openEditor('post')"><i class="fas fa-plus"></i> New Post</button>
        <button class="btn btn-add" style="background:#66bb6a;" onclick="openEditor('page')"><i class="fas fa-plus"></i> New Page</button>
      </div>

      <div class="card-grid">
        <div class="card">
          <h4><i class="fas fa-blog" style="color:var(--green-2); margin-right:8px;"></i> Postingan Terbaru</h4>
          <p><strong id="totalPosts">0</strong> postingan dipublikasikan</p>
        </div>
        <div class="card">
          <h4><i class="fas fa-file" style="color:#66bb6a; margin-right:8px;"></i> Halaman Terbaru</h4>
          <p><strong id="totalPages">0</strong> halaman statis aktif</p>
        </div>
        <div class="card">
          <h4><i class="fas fa-chart-bar" style="color:#4db6ac; margin-right:8px;"></i> Grafik Viewer & Like</h4>
          <p>üìä Hari: 320 | Bulan: 4.8k | Tahun: 52k</p>
          <p>üëç Total Like: <strong id="totalLikes">0</strong></p>
        </div>
      </div>
    </div>

    <footer>Copyright 2026 ¬© Koperasi KUD "Asmara Tani"</footer>
  </div>

  <!-- MODAL: PREVIEW -->
  <div class="modal" id="modal-preview">
    <div class="modal-content" style="max-width:900px; padding:30px 20px;">
      <span class="close-modal">&times;</span>
      <div class="preview-article" id="previewArticle">
        <h1 id="previewTitle">Judul Artikel</h1>
        <div class="meta" id="previewMeta">Oleh Admin | Sabtu, 29 November 2025</div>
        <div id="previewContent">Isi artikel akan muncul di sini...</div>

        <div class="reactions">
          <span class="reaction-btn" onclick="react('‚ù§Ô∏è')">‚ù§Ô∏è</span>
          <span class="reaction-btn" onclick="react('üòÜ')">üòÜ</span>
          <span class="reaction-btn" onclick="react('üòÆ')">üòÆ</span>
          <span class="reaction-btn" onclick="react('üò¢')">üò¢</span>
          <span class="reaction-btn" onclick="react('üò°')">üò°</span>
        </div>

        <div class="comments-section">
          <h3>Komentar (<span id="commentCount">0</span>)</h3>
          <div id="previewComments"></div>

          <div class="comment-form">
            <input type="text" id="newComment" placeholder="Tulis komentar..." />
            <button onclick="postComment()">Kirim</button>
          </div>
          <div class="emoji-picker">
            <span onclick="addEmoji('üòä')">üòä</span>
            <span onclick="addEmoji('üëç')">üëç</span>
            <span onclick="addEmoji('üëè')">üëè</span>
            <span onclick="addEmoji('üôè')">üôè</span>
            <span onclick="addEmoji('üíØ')">üíØ</span>
          </div>
        </div>
      </div>

      <div class="btn-group" style="margin-top:25px;">
        <button class="btn btn-edit" onclick="editFromPreview()">üìù Edit</button>
        <button class="btn btn-share" onclick="sharePreview()">üîó Bagikan</button>
      </div>
    </div>
  </div>

  <!-- MODAL: POSTS -->
  <div class="modal" id="modal-posts">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-newspaper"></i> Semua Postingan</h3>
      <div class="card-grid" id="postsList"></div>
      <button class="btn btn-add" style="margin-top:20px;" onclick="openEditor('post')">+ Tambah Postingan Baru</button>
    </div>
  </div>

  <!-- MODAL: STATIC PAGES -->
  <div class="modal" id="modal-static">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-file-alt"></i> Halaman Statis</h3>
      <div class="card-grid" id="staticPagesList"></div>
      <button class="btn btn-add" style="margin-top:20px;" onclick="openEditor('page')">+ Tambah Halaman Statis</button>
    </div>
  </div>

  <!-- MODAL: MEDIA LIBRARY -->
  <div class="modal" id="modal-media">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-images"></i> Media Library</h3>
      <div class="card-grid" id="mediaGrid" style="grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap:12px; margin-top:15px;"></div>
    </div>
  </div>

  <!-- MODAL: ANALYTICS -->
  <div class="modal" id="modal-analytics">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-chart-line"></i> Laporan Analitik Real-time</h3>
      <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
        <div style="width: 300px;">
          <canvas id="analyticsChart" height="200"></canvas>
        </div>
        <div style="width: 300px;">
          <canvas id="likesChart" height="200"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: COMMENTS (ALL) -->
  <div class="modal" id="modal-comments">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-comments"></i> Semua Komentar & Like</h3>
      <canvas id="commentsChart" height="200" style="margin:20px 0;"></canvas>
      <div id="allCommentsList" style="margin-top:20px; max-height:400px; overflow-y:auto;"></div>
    </div>
  </div>

  <!-- MODAL: SETTINGS -->
  <div class="modal" id="modal-settings">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-cog"></i> Pengaturan Akun</h3>
      <div style="margin-top:20px;">
        <label>Email:</label>
        <input type="email" value="admin@koperasi.com" style="width:100%; padding:8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;" readonly />
        <label>Password Lama:</label>
        <div style="position:relative;">
          <input type="password" id="oldPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width:100%; padding:8px 30px 8px 8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;" />
          <span class="toggle-pass" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; color:#777;" onclick="togglePassField('oldPass')"><i class="fas fa-eye"></i></span>
        </div>
        <label>Password Baru:</label>
        <div style="position:relative;">
          <input type="password" id="newPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width:100%; padding:8px 30px 8px 8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;" />
          <span class="toggle-pass" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; color:#777;" onclick="togglePassField('newPass')"><i class="fas fa-eye"></i></span>
        </div>
        <label>Konfirmasi Password Baru:</label>
        <div style="position:relative;">
          <input type="password" id="confirmPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width:100%; padding:8px 30px 8px 8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;" />
          <span class="toggle-pass" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; color:#777;" onclick="togglePassField('confirmPass')"><i class="fas fa-eye"></i></span>
        </div>
        <button class="btn btn-add" style="margin-top:15px; width:100%;" onclick="changePassword()">Simpan Perubahan</button>
      </div>
    </div>
  </div>

  <!-- MODAL: EDITOR -->
  <div class="modal" id="modal-editor">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3><i class="fas fa-edit"></i> <span id="editorTitle">Tambah Postingan Baru</span></h3>
      <label>Judul:</label>
      <input type="text" id="postTitle" style="width:100%; padding:8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;" placeholder="Masukkan judul..." />
      <label>Isi Artikel:</label>
      <textarea id="articleContent" placeholder="Tulis artikel di sini..."></textarea>

      <div class="text-align-dropdown">
        <label>Format Teks: </label>
        <select id="textAlignSelect" onchange="setTextAlign(this.value)">
          <option value="left">Rata Kiri</option>
          <option value="center">Rata Tengah</option>
          <option value="right">Rata Kanan</option>
          <option value="justify">Ratakan</option>
        </select>
      </div>

      <!-- Upload Area -->
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">
          <i class="fas fa-cloud-upload-alt"></i>
        </div>
        <div class="upload-text">
          <h4>Upload Foto/Video</h4>
          <p>Drag & drop file di sini atau klik untuk memilih</p>
        </div>
        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">Pilih File</button>
        <input type="file" id="fileInput" multiple accept="image/*,video/*" style="display:none;" onchange="handleFileSelect(event)">
        <div class="upload-preview" id="uploadPreview"></div>
      </div>

      <div class="btn-group">
        <button class="btn btn-preview" onclick="previewContent()">üëÅÔ∏è Preview</button>
        <button class="btn" style="background:#4caf50; color:white;" onclick="publishContent()">Publikasikan</button>
        <button class="btn btn-delete" onclick="closeEditor()">üóëÔ∏è Batal</button>
      </div>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
    // === DATA ===
    let samplePosts = JSON.parse(localStorage.getItem('posts')) || [];
    let sampleStatic = JSON.parse(localStorage.getItem('staticPages')) || [];
    let sampleComments = JSON.parse(localStorage.getItem('comments')) || {};
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
    let uploadedMedia = []; // Array untuk menyimpan file yang diupload

    // Tambahkan data awal hanya jika belum ada
    if (samplePosts.length === 0) {
      samplePosts = [{
        id: 1,
        title: "Pelatihan Petani Muda",
        date: "29 November 2025",
        author: "Admin",
        readTime: "5 menit",
        content: "Acara pelatihan sukses diadakan di Balai Desa. Peserta antusias mengikuti sesi praktek budidaya padi organik. Hadir pula perwakilan Dinas Pertanian setempat yang memberikan arahan strategis.",
        likes: 42,
        comments: 3,
        type: "post",
        textAlign: "justify",
        media: [] // Array untuk menyimpan media yang diupload
      }];
      sampleComments[1] = [{ id: 1, author: "Budi Santoso", date: "29/11/2025", text: "Artikel sangat bermanfaat!" }];
      localStorage.setItem('posts', JSON.stringify(samplePosts));
      localStorage.setItem('comments', JSON.stringify(sampleComments));
    }

    if (sampleStatic.length === 0) {
      sampleStatic = [
        {
          id: 1,
          title: "Tentang Kami",
          date: "15 November 2025",
          content: "Koperasi KUD 'Asmara Tani' didirikan pada tahun 1985...\n\nVisi: Menjadi koperasi terdepan dalam pemberdayaan petani lokal.",
          views: 120,
          comments: 5,
          type: "page",
          textAlign: "justify",
          media: []
        },
        {
          id: 2,
          title: "Kontak",
          date: "10 November 2025",
          content: "Alamat: Jl. Raya Desa Sukamaju No. 12\nTelepon: (021) 1234-5678\nEmail: info@koperasiasmara.id",
          views: 85,
          comments: 2,
          type: "page",
          textAlign: "left",
          media: []
        }
      ];
      localStorage.setItem('staticPages', JSON.stringify(sampleStatic));
    }

    // Initialize notifications if empty
    if (notifications.length === 0) {
      notifications = [
        {
          id: 1,
          type: 'info',
          title: 'Selamat Datang!',
          message: 'Dashboard Koperasi siap digunakan',
          time: new Date().toLocaleString('id-ID'),
          read: false
        },
        {
          id: 2,
          type: 'success',
          title: 'Postingan Baru',
          message: 'Postingan "Pelatihan Petani Muda" berhasil dipublikasikan',
          time: new Date().toLocaleString('id-ID'),
          read: false
        },
        {
          id: 3,
          type: 'warning',
          title: 'Perhatian',
          message: 'Jangan lupa backup data secara berkala',
          time: new Date().toLocaleString('id-ID'),
          read: false
        }
      ];
      localStorage.setItem('notifications', JSON.stringify(notifications));
    }

    let currentPreviewId = null;
    let currentTextAlign = 'left';
    let currentEditorType = 'post'; // 'post' or 'page'
    let currentEditingId = null; // Untuk menyimpan ID saat mengedit

    function saveData() {
      localStorage.setItem('posts', JSON.stringify(samplePosts));
      localStorage.setItem('staticPages', JSON.stringify(sampleStatic));
      localStorage.setItem('comments', JSON.stringify(sampleComments));
      localStorage.setItem('notifications', JSON.stringify(notifications));
      updateDashboardStats();
      updateNotificationBadge();
    }

    function updateDashboardStats() {
      document.getElementById('totalPosts').innerText = samplePosts.length;
      document.getElementById('totalPages').innerText = sampleStatic.length;
      const totalLikes = samplePosts.reduce((sum, p) => sum + p.likes, 0);
      document.getElementById('totalLikes').innerText = totalLikes.toLocaleString('id-ID');
    }

    // === NOTIFICATION SYSTEM ===
    function updateNotificationBadge() {
      const unreadCount = notifications.filter(n => !n.read).length;
      const badge = document.getElementById('notificationBadge');
      badge.textContent = unreadCount;
      badge.style.display = unreadCount > 0 ? 'flex' : 'none';
    }

    function renderNotifications() {
      const container = document.getElementById('notificationList');
      container.innerHTML = '';

      if (notifications.length === 0) {
        container.innerHTML = '<div class="no-notifications">Tidak ada notifikasi</div>';
        return;
      }

      notifications.forEach(notification => {
        const item = document.createElement('div');
        item.className = `notification-item ${notification.read ? '' : 'unread'}`;
        item.onclick = () => markAsRead(notification.id);
        
        const iconClass = {
          'info': 'fas fa-info-circle',
          'success': 'fas fa-check-circle',
          'warning': 'fas fa-exclamation-triangle'
        }[notification.type] || 'fas fa-bell';

        item.innerHTML = `
          <div class="notification-icon ${notification.type}">
            <i class="${iconClass}"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">${notification.title}</div>
            <div class="notification-message">${notification.message}</div>
            <div class="notification-time">${notification.time}</div>
          </div>
        `;
        container.appendChild(item);
      });
    }

    function markAsRead(notificationId) {
      const notification = notifications.find(n => n.id === notificationId);
      if (notification && !notification.read) {
        notification.read = true;
        saveData();
        renderNotifications();
      }
    }

    function clearAllNotifications() {
      if (confirm('Hapus semua notifikasi?')) {
        notifications = [];
        saveData();
        renderNotifications();
      }
    }

    function addNotification(type, title, message) {
      const newNotification = {
        id: Date.now(),
        type,
        title,
        message,
        time: new Date().toLocaleString('id-ID'),
        read: false
      };
      notifications.unshift(newNotification);
      saveData();
      renderNotifications();
      
      // Show notification panel if it's hidden
      document.getElementById('notificationPanel').classList.add('active');
    }

    // === UPLOAD FUNCTIONS ===
    function handleFileSelect(event) {
      const files = event.target.files;
      if (!files || files.length === 0) return;
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        
        // Validasi tipe file
        if (!file.type.match('image.*') && !file.type.match('video.*')) {
          alert('Hanya file gambar dan video yang diizinkan!');
          continue;
        }
        
        // Validasi ukuran file (maksimal 10MB)
        if (file.size > 10 * 1024 * 1024) {
          alert(`File ${file.name} terlalu besar. Maksimal ukuran file adalah 10MB.`);
          continue;
        }
        
        // Simpan file ke array uploadedMedia
        uploadedMedia.push(file);
        
        // Tampilkan preview
        displayFilePreview(file);
      }
      
      // Reset input file
      event.target.value = '';
    }

    function displayFilePreview(file) {
      const previewContainer = document.getElementById('uploadPreview');
      const previewItem = document.createElement('div');
      previewItem.className = 'upload-preview-item';
      
      const reader = new FileReader();
      reader.onload = function(e) {
        if (file.type.match('image.*')) {
          previewItem.innerHTML = `
            <img src="${e.target.result}" alt="${file.name}">
            <button class="remove-btn" onclick="removeUploadedFile(this, '${file.name}')">
              <i class="fas fa-times"></i>
            </button>
          `;
        } else if (file.type.match('video.*')) {
          previewItem.innerHTML = `
            <video src="${e.target.result}" controls></video>
            <button class="remove-btn" onclick="removeUploadedFile(this, '${file.name}')">
              <i class="fas fa-times"></i>
            </button>
          `;
        }
        
        previewContainer.appendChild(previewItem);
      };
      
      reader.readAsDataURL(file);
    }

    function removeUploadedFile(button, fileName) {
      // Hapus dari array uploadedMedia
      uploadedMedia = uploadedMedia.filter(file => file.name !== fileName);
      
      // Hapus preview
      button.parentElement.remove();
    }

    // Setup drag and drop functionality
    function setupDragAndDrop() {
      const uploadArea = document.getElementById('uploadArea');
      const fileInput = document.getElementById('fileInput');
      
      // Prevent default behaviors
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, preventDefaults, false);
        document.body.addEventListener(eventName, preventDefaults, false);
      });
      
      // Highlight drop area when item is dragged over it
      ['dragenter', 'dragover'].forEach(eventName => {
        uploadArea.addEventListener(eventName, highlight, false);
      });
      
      ['dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, unhighlight, false);
      });
      
      // Handle dropped files
      uploadArea.addEventListener('drop', handleDrop, false);
      
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      function highlight() {
        uploadArea.classList.add('active');
      }
      
      function unhighlight() {
        uploadArea.classList.remove('active');
      }
      
      function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        // Simulasi input file change
        const fileInputEvent = new Event('change', { bubbles: true });
        Object.defineProperty(fileInputEvent, 'target', { value: { files: files } });
        handleFileSelect(fileInputEvent);
      }
    }

    // === COPY LINK FUNCTIONS ===
    function sharePreview() {
      let url = '';
      
      // Tentukan URL berdasarkan jenis konten
      if (currentPreviewId) {
        const post = samplePosts.find(p => p.id == currentPreviewId);
        const page = sampleStatic.find(p => p.id == currentPreviewId);
        
        if (post) {
          url = `${window.location.origin}${window.location.pathname}#post-${currentPreviewId}`;
        } else if (page) {
          url = `${window.location.origin}${window.location.pathname}#page-${currentPreviewId}`;
        }
      }
      
      if (!url) {
        alert('Tidak dapat membuat link untuk konten ini');
        return;
      }
      
      // Method modern menggunakan Clipboard API
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(url).then(() => {
          showCopySuccess();
        }).catch(err => {
          // Fallback ke method lama jika Clipboard API gagal
          useFallbackCopyMethod(url);
        });
      } else {
        // Gunakan method fallback untuk environment yang tidak support Clipboard API
        useFallbackCopyMethod(url);
      }
    }

    function useFallbackCopyMethod(text) {
      // Method fallback menggunakan textarea
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      
      try {
        const successful = document.execCommand('copy');
        document.body.removeChild(textarea);
        
        if (successful) {
          showCopySuccess();
        } else {
          showCopyManual(text);
        }
      } catch (err) {
        document.body.removeChild(textarea);
        showCopyManual(text);
      }
    }

    function showCopySuccess() {
      // Buat custom notification yang lebih menarik
      const notification = document.createElement('div');
      notification.className = 'copy-notification';
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <i class="fas fa-check-circle" style="font-size: 1.2rem;"></i>
          <div>
            <div style="font-weight: 600; margin-bottom: 5px;">Berhasil!</div>
            <div style="font-size: 0.9rem; opacity: 0.9;">Link telah disalin ke clipboard</div>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function showCopyManual(text) {
      // Tampilkan modal dengan link yang bisa disalin manual
      const modal = document.createElement('div');
      modal.className = 'modal active';
      modal.innerHTML = `
        <div class="modal-content" style="max-width: 500px;">
          <h3><i class="fas fa-link"></i> Salin Link Manual</h3>
          <p>Browser tidak mendukung copy otomatis. Silakan salin link berikut:</p>
          <div style="background: #f5f5f5; padding: 12px; border-radius: 8px; margin: 15px 0; word-break: break-all;">
            ${text}
          </div>
          <div class="btn-group">
            <button class="btn btn-add" onclick="copyManual('${text}')">
              <i class="fas fa-copy"></i> Coba Salin Lagi
            </button>
            <button class="btn" onclick="this.closest('.modal').remove()">Tutup</button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }

    function copyManual(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      document.body.appendChild(textarea);
      textarea.select();
      
      try {
        document.execCommand('copy');
        alert('Link berhasil disalin!');
        document.querySelector('.modal.active').remove();
      } catch (err) {
        alert('Silakan salin manual dengan select dan copy (Ctrl+C)');
      } finally {
        document.body.removeChild(textarea);
      }
    }

    // === AUTH ===
    function login() {
      const email = document.getElementById('email').value;
      const pass = document.getElementById('password').value;
      if (email === "admin@koperasi.com" && pass === "admin014212") {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        renderPosts();
        renderStatic();
        renderNotifications();
        updateDashboardStats();
        updateNotificationBadge();
        
        // Add login notification
        addNotification('success', 'Login Berhasil', 'Selamat datang di Dashboard Koperasi');
      } else {
        alert("Email atau password salah!");
      }
    }

    function logout() {
      if (confirm("Keluar dari dashboard?")) {
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('login-page').style.display = 'block';
        document.getElementById('email').value = '';
        document.getElementById('password').value = '';
        
        // Add logout notification
        addNotification('info', 'Logout Berhasil', 'Sesi Anda telah berakhir');
      }
    }

    function togglePassword() {
      const passwordField = document.getElementById('password');
      const icon = document.querySelector('.toggle-pass i');
      if (passwordField.type === 'password') {
        passwordField.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        passwordField.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }

    function togglePassField(fieldId) {
      const field = document.getElementById(fieldId);
      const icon = field.nextElementSibling.querySelector('i');
      if (field.type === 'password') {
        field.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        field.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }

    function changePassword() {
      const oldPass = document.getElementById('oldPass').value;
      const newPass = document.getElementById('newPass').value;
      const confirmPass = document.getElementById('confirmPass').value;
      
      if (oldPass !== "admin014212") {
        alert("Password lama salah!");
        return;
      }
      
      if (newPass !== confirmPass) {
        alert("Konfirmasi password baru tidak cocok!");
        return;
      }
      
      alert("Password berhasil diubah! (Catatan: di implementasi nyata, ini akan menyimpan ke server)");
      document.getElementById('oldPass').value = '';
      document.getElementById('newPass').value = '';
      document.getElementById('confirmPass').value = '';
      
      // Add password change notification
      addNotification('success', 'Password Diubah', 'Password berhasil diperbarui');
    }

    // === RENDER ===
    function renderPosts() {
      const container = document.getElementById('postsList');
      container.innerHTML = '';
      samplePosts.forEach(post => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h4>${post.title}</h4>
          <p><i class="fas fa-calendar"></i> ${post.date} | üëç ${post.likes} | üí¨ ${post.comments}</p>
          <div class="btn-group">
            <button class="btn btn-preview" onclick="openPostDetail(${post.id})">üëÅÔ∏è</button>
            <button class="btn btn-edit" onclick="editPost(${post.id})">üìù</button>
            <button class="btn btn-delete" onclick="deletePost(${post.id})">üóëÔ∏è</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function renderStatic() {
      const container = document.getElementById('staticPagesList');
      container.innerHTML = '';
      sampleStatic.forEach(page => {
        if (!page.views) page.views = 0;
        if (!page.comments) page.comments = 0;
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h4>${page.title}</h4>
          <p><i class="fas fa-calendar"></i> ${page.date} | üëÅÔ∏è ${page.views} views | üí¨ ${page.comments}</p>
          <div class="btn-group">
            <button class="btn btn-preview" onclick="openStaticDetail(${page.id})">üëÅÔ∏è</button>
            <button class="btn btn-edit" onclick="editStatic(${page.id})">üìù</button>
            <button class="btn btn-delete" onclick="deleteStatic(${page.id})">üóëÔ∏è</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    // === MEDIA ===
    const sampleMedia = [
      { type: 'image', name: 'foto1.jpg', url: 'https://picsum.photos/300/200?random=1' },
      { type: 'image', name: 'banner.jpg', url: 'https://picsum.photos/300/200?random=2' },
      { type: 'video', name: 'pelatihan.mp4', url: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4' }
    ];

    function renderMedia() {
      const grid = document.getElementById('mediaGrid');
      grid.innerHTML = '';
      sampleMedia.forEach(item => {
        const el = document.createElement('div');
        el.style.textAlign = 'center';
        el.style.cursor = 'pointer';
        el.innerHTML = item.type === 'image' 
          ? `<img src="${item.url}" style="width:100%; height:80px; object-fit:cover; border-radius:6px;" /><small>${item.name}</small>`
          : `<i class="fas fa-video" style="font-size:1.8rem; color:#4caf50;"></i><br><small>${item.name}</small>`;
        el.onclick = () => openMediaPreview(item);
        grid.appendChild(el);
      });
    }

    function openMediaPreview(item) {
      const modal = document.createElement('div');
      modal.className = 'modal active';
      modal.style.backgroundColor = 'rgba(0,0,0,0.95)';
      modal.innerHTML = `
        <div style="position:relative; width:95%; max-width:700px; margin:auto; margin-top:10vh;">
          ${item.type === 'image' 
            ? `<img src="${item.url}" style="width:100%; border-radius:8px;" />`
            : `<video controls style="width:100%; border-radius:8px;"><source src="${item.url}" type="video/mp4">Your browser does not support video.</video>`}
          <button style="position:absolute; top:10px; right:10px; background:#fff; color:#000; border:0; border-radius:50%; width:36px; height:36px; font-weight:bold;" onclick="this.closest('.modal').remove()">√ó</button>
        </div>
      `;
      document.body.appendChild(modal);
    }

    // === PREVIEW ===
    function openStaticDetail(id) {
      const page = sampleStatic.find(p => p.id == id);
      if (!page) return;
      currentPreviewId = id;
      document.getElementById('previewTitle').innerText = page.title;
      document.getElementById('previewMeta').innerHTML = `Halaman Statis | ${page.date}<br><strong>üëÅÔ∏è ${page.views} views | üëç ${page.likes || 0} suka</strong>`;
      
      // Apply text alignment
      document.getElementById('previewContent').innerHTML = `<p>${page.content.replace(/\n/g, '</p><p>')}</p>`;
      document.getElementById('previewContent').style.textAlign = page.textAlign || 'left';
      
      // Display media if exists
      if (page.media && page.media.length > 0) {
        const mediaHTML = page.media.map(media => {
          if (media.type.match('image.*')) {
            return `<img src="${media.url}" alt="${media.name}" style="max-width:100%; border-radius:8px; margin:15px 0;">`;
          } else if (media.type.match('video.*')) {
            return `<video src="${media.url}" controls style="max-width:100%; border-radius:8px; margin:15px 0;"></video>`;
          }
        }).join('');
        document.getElementById('previewContent').innerHTML += mediaHTML;
      }
      
      const comments = sampleComments[id] || [];
      let commentsHTML = '';
      comments.forEach(c => {
        commentsHTML += `
          <div class="comment-item">
            <div class="comment-header">
              <span class="comment-author">${c.author}</span>
              <span class="comment-date">${c.date}</span>
            </div>
            <div>${c.text}</div>
            <div class="comment-actions" style="margin-top:6px;">
              <button class="btn btn-reply" onclick="toggleReplyForm(this)">Balas</button>
              <button class="btn btn-delete" onclick="deleteComment(${id}, ${c.id})">Hapus</button>
            </div>
            <div class="reply-form">
              <input type="text" placeholder="Balasan..." />
              <button onclick="submitReply(this, ${id})">Kirim</button>
            </div>
          </div>
        `;
      });
      document.getElementById('previewComments').innerHTML = commentsHTML || "<p>Belum ada komentar.</p>";
      document.getElementById('commentCount').innerText = comments.length;
      
      // Close posts modal and open preview
      document.getElementById('modal-posts').classList.remove('active');
      document.getElementById('modal-static').classList.remove('active');
      document.getElementById('modal-preview').classList.add('active');
    }

    function openPostDetail(id) {
      const post = samplePosts.find(p => p.id == id);
      if (!post) return;
      currentPreviewId = id;
      document.getElementById('previewTitle').innerText = post.title;
      document.getElementById('previewMeta').innerHTML = `Oleh ${post.author} | ${post.date} | ${post.readTime} baca<br><strong>üëç ${post.likes} suka</strong>`;
      
      // Apply text alignment
      document.getElementById('previewContent').innerHTML = `<p>${post.content.replace(/\n/g, '</p><p>')}</p>`;
      document.getElementById('previewContent').style.textAlign = post.textAlign || 'left';

      // Display media if exists
      if (post.media && post.media.length > 0) {
        const mediaHTML = post.media.map(media => {
          if (media.type.match('image.*')) {
            return `<img src="${media.url}" alt="${media.name}" style="max-width:100%; border-radius:8px; margin:15px 0;">`;
          } else if (media.type.match('video.*')) {
            return `<video src="${media.url}" controls style="max-width:100%; border-radius:8px; margin:15px 0;"></video>`;
          }
        }).join('');
        document.getElementById('previewContent').innerHTML += mediaHTML;
      }

      const comments = sampleComments[id] || [];
      let commentsHTML = '';
      comments.forEach(c => {
        commentsHTML += `
          <div class="comment-item">
            <div class="comment-header">
              <span class="comment-author">${c.author}</span>
              <span class="comment-date">${c.date}</span>
            </div>
            <div>${c.text}</div>
            <div class="comment-actions" style="margin-top:6px;">
              <button class="btn btn-reply" onclick="toggleReplyForm(this)">Balas</button>
              <button class="btn btn-delete" onclick="deleteComment(${id}, ${c.id})">Hapus</button>
            </div>
            <div class="reply-form">
              <input type="text" placeholder="Balasan..." />
              <button onclick="submitReply(this, ${id})">Kirim</button>
            </div>
          </div>
        `;
      });
      document.getElementById('previewComments').innerHTML = commentsHTML || "<p>Belum ada komentar.</p>";
      document.getElementById('commentCount').innerText = comments.length;
      
      // Close posts modal and open preview
      document.getElementById('modal-posts').classList.remove('active');
      document.getElementById('modal-preview').classList.add('active');
    }

    function toggleReplyForm(btn) {
      const form = btn.closest('.comment-item').querySelector('.reply-form');
      form.classList.toggle('active');
    }

    function submitReply(btn, postId) {
      const input = btn.previousElementSibling;
      const text = input.value.trim();
      if (!text) return;
      const reply = { id: Date.now(), author: "Anda (balasan)", date: new Date().toLocaleDateString('id-ID'), text: `‚Ü™Ô∏è ${text}` };
      if (!sampleComments[postId]) sampleComments[postId] = [];
      sampleComments[postId].push(reply);
      saveData();
      if (samplePosts.find(p => p.id == postId)) {
        openPostDetail(postId);
      } else {
        openStaticDetail(postId);
      }
    }

    function deleteComment(postId, commentId) {
      if (confirm("Hapus komentar ini?")) {
        sampleComments[postId] = sampleComments[postId].filter(c => c.id !== commentId);
        saveData();
        if (samplePosts.find(p => p.id == postId)) {
          openPostDetail(postId);
        } else {
          openStaticDetail(postId);
        }
      }
    }

    function addEmoji(emoji) {
      document.getElementById('newComment').value += emoji;
      document.getElementById('newComment').focus();
    }

    function postComment() {
      const input = document.getElementById('newComment');
      const text = input.value.trim();
      if (!text) return;
      const comment = { id: Date.now(), author: "Anda", date: new Date().toLocaleDateString('id-ID'), text };
      if (!sampleComments[currentPreviewId]) sampleComments[currentPreviewId] = [];
      sampleComments[currentPreviewId].push(comment);
      
      // Update comment count
      const post = samplePosts.find(p => p.id == currentPreviewId);
      const page = sampleStatic.find(p => p.id == currentPreviewId);
      if (post) {
        post.comments = sampleComments[currentPreviewId].length;
      } else if (page) {
        page.comments = sampleComments[currentPreviewId].length;
      }
      
      saveData();
      if (post) {
        openPostDetail(currentPreviewId);
      } else {
        openStaticDetail(currentPreviewId);
      }
      input.value = '';
    }

    function react(emoji) {
      if (currentPreviewId) {
        const post = samplePosts.find(p => p.id == currentPreviewId);
        const page = sampleStatic.find(p => p.id == currentPreviewId);
        if (post) {
          post.likes += 1;
        } else if (page) {
          if (!page.likes) page.likes = 0;
          page.likes += 1;
        }
        saveData();
        if (post) {
          openPostDetail(currentPreviewId);
        } else {
          openStaticDetail(currentPreviewId);
        }
      }
      alert(`Anda bereaksi: ${emoji}`);
    }

    // === EDITOR ===
    function openEditor(type) {
      currentEditorType = type;
      currentEditingId = null;
      document.getElementById('editorTitle').innerText = type === 'post' ? 'Tambah Postingan Baru' : 'Tambah Halaman Statis';
      document.getElementById('postTitle').value = '';
      document.getElementById('articleContent').value = '';
      currentTextAlign = 'left';
      document.getElementById('textAlignSelect').value = 'left';
      
      // Reset upload area
      uploadedMedia = [];
      document.getElementById('uploadPreview').innerHTML = '';
      
      document.getElementById('modal-editor').classList.add('active');
    }

    function setTextAlign(align) {
      currentTextAlign = align;
      document.getElementById('textAlignSelect').value = align;
    }

    function previewContent() {
      const title = document.getElementById('postTitle').value.trim() || 'Tanpa Judul';
      let content = document.getElementById('articleContent').value.trim() || 'Tidak ada isi.';
      document.getElementById('previewTitle').innerText = title;
      document.getElementById('previewMeta').innerHTML = 'Pratinjau | Belum dipublikasikan';
      
      document.getElementById('previewContent').innerHTML = `<p>${content.replace(/\n/g, '</p><p>')}</p>`;
      document.getElementById('previewContent').style.textAlign = currentTextAlign;
      
      // Display uploaded media in preview
      if (uploadedMedia.length > 0) {
        const mediaHTML = uploadedMedia.map(file => {
          const url = URL.createObjectURL(file);
          if (file.type.match('image.*')) {
            return `<img src="${url}" alt="${file.name}" style="max-width:100%; border-radius:8px; margin:15px 0;">`;
          } else if (file.type.match('video.*')) {
            return `<video src="${url}" controls style="max-width:100%; border-radius:8px; margin:15px 0;"></video>`;
          }
        }).join('');
        document.getElementById('previewContent').innerHTML += mediaHTML;
      }
      
      document.getElementById('previewComments').innerHTML = '';
      document.getElementById('commentCount').innerText = '0';
      currentPreviewId = null;
      document.getElementById('modal-preview').classList.add('active');
    }

    function publishContent() {
      const title = document.getElementById('postTitle').value.trim();
      const content = document.getElementById('articleContent').value.trim();
      if (!title || !content) {
        alert("Judul dan isi wajib diisi!");
        return;
      }
      
      // Process uploaded media
      const mediaData = uploadedMedia.map(file => {
        // In a real application, you would upload files to a server
        // For this demo, we'll use object URLs
        return {
          name: file.name,
          type: file.type,
          url: URL.createObjectURL(file)
        };
      });
      
      if (currentEditingId) {
        // Edit existing content
        if (currentEditorType === 'post') {
          const post = samplePosts.find(p => p.id === currentEditingId);
          if (post) {
            post.title = title;
            post.content = content;
            post.textAlign = currentTextAlign;
            post.date = new Date().toLocaleDateString('id-ID');
            post.media = mediaData;
          }
          addNotification('success', 'Postingan Diperbarui', `Postingan "${title}" berhasil diperbarui`);
        } else {
          const page = sampleStatic.find(p => p.id === currentEditingId);
          if (page) {
            page.title = title;
            page.content = content;
            page.textAlign = currentTextAlign;
            page.date = new Date().toLocaleDateString('id-ID');
            page.media = mediaData;
          }
          addNotification('success', 'Halaman Diperbarui', `Halaman "${title}" berhasil diperbarui`);
        }
      } else {
        // Create new content
        if (currentEditorType === 'post') {
          const newPost = {
            id: Date.now(),
            title,
            date: new Date().toLocaleDateString('id-ID'),
            author: "Admin",
            readTime: "2 menit",
            content,
            likes: 0,
            comments: 0,
            type: "post",
            textAlign: currentTextAlign,
            media: mediaData
          };
          samplePosts.unshift(newPost);
          addNotification('success', 'Postingan Baru', `Postingan "${title}" berhasil dipublikasikan`);
        } else {
          const newPage = {
            id: Date.now(),
            title,
            date: new Date().toLocaleDateString('id-ID'),
            content,
            views: 0,
            comments: 0,
            type: "page",
            textAlign: currentTextAlign,
            media: mediaData
          };
          sampleStatic.unshift(newPage);
          addNotification('success', 'Halaman Baru', `Halaman "${title}" berhasil dibuat`);
        }
      }
      
      saveData();
      closeEditor();
      renderPosts();
      renderStatic();
    }

    function closeEditor() {
      document.getElementById('modal-editor').classList.remove('active');
      currentEditingId = null;
      uploadedMedia = [];
      document.getElementById('uploadPreview').innerHTML = '';
    }

    function editFromPreview() {
      document.getElementById('modal-preview').classList.remove('active');
      document.getElementById('modal-editor').classList.add('active');
    }

    function editPost(id) {
      const post = samplePosts.find(p => p.id === id);
      document.getElementById('postTitle').value = post.title;
      document.getElementById('articleContent').value = post.content;
      document.getElementById('editorTitle').innerText = 'Edit Postingan';
      currentEditorType = 'post';
      currentEditingId = id;
      currentTextAlign = post.textAlign || 'left';
      document.getElementById('textAlignSelect').value = currentTextAlign;
      
      // Load existing media
      uploadedMedia = [];
      document.getElementById('uploadPreview').innerHTML = '';
      if (post.media && post.media.length > 0) {
        // In a real application, you would need to fetch the actual files
        // For this demo, we'll just display the existing media
        post.media.forEach(media => {
          const previewItem = document.createElement('div');
          previewItem.className = 'upload-preview-item';
          
          if (media.type.match('image.*')) {
            previewItem.innerHTML = `
              <img src="${media.url}" alt="${media.name}">
              <button class="remove-btn" onclick="removeUploadedFile(this, '${media.name}')">
                <i class="fas fa-times"></i>
              </button>
            `;
          } else if (media.type.match('video.*')) {
            previewItem.innerHTML = `
              <video src="${media.url}" controls></video>
              <button class="remove-btn" onclick="removeUploadedFile(this, '${media.name}')">
                <i class="fas fa-times"></i>
              </button>
            `;
          }
          
          document.getElementById('uploadPreview').appendChild(previewItem);
        });
      }
      
      document.getElementById('modal-editor').classList.add('active');
    }

    function deletePost(id) {
      if (confirm("Hapus postingan ini secara permanen?")) {
        const post = samplePosts.find(p => p.id === id);
        samplePosts = samplePosts.filter(p => p.id !== id);
        delete sampleComments[id];
        saveData();
        renderPosts();
        addNotification('warning', 'Postingan Dihapus', `Postingan "${post.title}" telah dihapus`);
      }
    }

    function editStatic(id) {
      const page = sampleStatic.find(p => p.id === id);
      document.getElementById('postTitle').value = page.title;
      document.getElementById('articleContent').value = page.content;
      document.getElementById('editorTitle').innerText = 'Edit Halaman Statis';
      currentEditorType = 'page';
      currentEditingId = id;
      currentTextAlign = page.textAlign || 'left';
      document.getElementById('textAlignSelect').value = currentTextAlign;
      
      // Load existing media
      uploadedMedia = [];
      document.getElementById('uploadPreview').innerHTML = '';
      if (page.media && page.media.length > 0) {
        // In a real application, you would need to fetch the actual files
        // For this demo, we'll just display the existing media
        page.media.forEach(media => {
          const previewItem = document.createElement('div');
          previewItem.className = 'upload-preview-item';
          
          if (media.type.match('image.*')) {
            previewItem.innerHTML = `
              <img src="${media.url}" alt="${media.name}">
              <button class="remove-btn" onclick="removeUploadedFile(this, '${media.name}')">
                <i class="fas fa-times"></i>
              </button>
            `;
          } else if (media.type.match('video.*')) {
            previewItem.innerHTML = `
              <video src="${media.url}" controls></video>
              <button class="remove-btn" onclick="removeUploadedFile(this, '${media.name}')">
                <i class="fas fa-times"></i>
              </button>
            `;
          }
          
          document.getElementById('uploadPreview').appendChild(previewItem);
        });
      }
      
      document.getElementById('modal-editor').classList.add('active');
    }

    function deleteStatic(id) {
      if (confirm(`Hapus halaman ini?`)) {
        const page = sampleStatic.find(p => p.id === id);
        sampleStatic = sampleStatic.filter(p => p.id !== id);
        delete sampleComments[id];
        saveData();
        renderStatic();
        addNotification('warning', 'Halaman Dihapus', `Halaman "${page.title}" telah dihapus`);
      }
    }

    // === CHARTS ===
    function renderAllComments() {
      const totalPosts = samplePosts.length;
      const totalComments = Object.values(sampleComments).reduce((sum, arr) => sum + arr.length, 0);
      const totalLikes = samplePosts.reduce((sum, p) => sum + p.likes, 0);

      const ctx = document.getElementById('commentsChart');
      if (window.commentsChartInstance) {
        window.commentsChartInstance.destroy();
      }
      window.commentsChartInstance = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Postingan', 'Komentar', 'Like'],
          datasets: [{
            data: [totalPosts, totalComments, totalLikes],
            backgroundColor: ['#4caf50', '#2196f3', '#ff9800']
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'bottom' }
          }
        }
      });

      let html = '<h4>Daftar Komentar:</h4>';
      samplePosts.forEach(post => {
        const comments = sampleComments[post.id] || [];
        if (comments.length > 0) {
          html += `<h5>${post.title} (<small>${comments.length} komentar</small>)</h5>`;
          comments.forEach(c => {
            html += `<p><strong>${c.author}</strong> (${c.date}): ${c.text}</p>`;
          });
          html += '<hr>';
        }
      });
      if (!html.includes('<h5>')) html += "<p>Belum ada komentar.</p>";
      document.getElementById('allCommentsList').innerHTML = html;
    }

    function renderAnalytics() {
      // Chart untuk pengunjung
      const analyticsCtx = document.getElementById('analyticsChart');
      if (window.analyticsChartInstance) {
        window.analyticsChartInstance.destroy();
      }
      window.analyticsChartInstance = new Chart(analyticsCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
          datasets: [{
            label: 'Pengunjung',
            data: [65, 59, 80, 81, 56, 55],
            borderColor: '#4caf50',
            tension: 0.1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

      // Chart untuk likes (lingkaran)
      const likesCtx = document.getElementById('likesChart');
      if (window.likesChartInstance) {
        window.likesChartInstance.destroy();
      }
      
      const totalLikes = samplePosts.reduce((sum, p) => sum + p.likes, 0);
      const totalPostsCount = samplePosts.length;
      const avgLikes = totalPostsCount > 0 ? Math.round(totalLikes / totalPostsCount) : 0;
      
      window.likesChartInstance = new Chart(likesCtx, {
        type: 'doughnut',
        data: {
          labels: ['Total Like', 'Rata-rata Like per Post'],
          datasets: [{
            data: [totalLikes, avgLikes],
            backgroundColor: ['#4caf50', '#81c784']
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'bottom' },
            title: {
              display: true,
              text: 'Statistik Like'
            }
          }
        }
      });
    }

    // === EVENT LISTENERS ===
    document.getElementById('hamburger').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('hamburger').classList.toggle('active');
      document.getElementById('mainContent').classList.toggle('sidebar-open');
    });

    document.getElementById('closeSidebar').addEventListener('click', () => {
      document.getElementById('sidebar').classList.remove('active');
      document.getElementById('hamburger').classList.remove('active');
      document.getElementById('mainContent').classList.remove('sidebar-open');
    });

    document.getElementById('notificationBell').addEventListener('click', () => {
      const panel = document.getElementById('notificationPanel');
      panel.classList.toggle('active');
    });

    document.querySelectorAll('.menu-item[data-modal]').forEach(item => {
      item.addEventListener('click', () => {
        const target = item.getAttribute('data-modal');
        if (target === 'media') renderMedia();
        if (target === 'comments') renderAllComments();
        if (target === 'analytics') renderAnalytics();
        if (target === 'static') renderStatic();
        document.getElementById(`modal-${target}`).classList.add('active');
        if (window.innerWidth < 768) {
          document.getElementById('sidebar').classList.remove('active');
          document.getElementById('hamburger').classList.remove('active');
          document.getElementById('mainContent').classList.remove('sidebar-open');
        }
      });
    });

    document.querySelectorAll('.close-modal').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
      });
    });

    window.addEventListener('click', (e) => {
      document.querySelectorAll('.modal').forEach(modal => {
        if (e.target === modal) modal.classList.remove('active');
      });
      
      // Close notification panel when clicking outside
      const notificationPanel = document.getElementById('notificationPanel');
      const notificationBell = document.getElementById('notificationBell');
      if (notificationPanel.classList.contains('active') && 
          !notificationPanel.contains(e.target) && 
          !notificationBell.contains(e.target)) {
        notificationPanel.classList.remove('active');
      }
    });

    // Close sidebar when clicking on menu items on mobile
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', () => {
        if (window.innerWidth < 768) {
          document.getElementById('sidebar').classList.remove('active');
          document.getElementById('hamburger').classList.remove('active');
          document.getElementById('mainContent').classList.remove('sidebar-open');
        }
      });
    });

    // INIT
    document.getElementById('login-page').style.display = 'block';
    updateDashboardStats();
    updateNotificationBadge();
    setupDragAndDrop();

    // Simulate real-time notifications
    setInterval(() => {
      // Random notifications for demo
      if (Math.random() < 0.3) { // 30% chance every interval
        const messages = [
          'Pengunjung baru melihat postingan Anda',
          'Seseorang menyukai konten Anda',
          'Komentar baru diterima',
          'Traffic website meningkat'
        ];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        addNotification('info', 'Aktivitas Terbaru', randomMessage);
      }
    }, 30000); // Check every 30 seconds
  </script>
</body>
</html>
