<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koperasi KUD Asmara Tani - Sistem Terintegrasi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Google Sheets API -->
    <script src="https://apis.google.com/js/api.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #fff;
            min-height: 100vh;
            position: relative;
        }

        /* Sistem Multi Halaman */
        .page {
            display: none;
            padding-bottom: 80px;
        }

        .page.active {
            display: block;
        }

        /* Header untuk Home/Beranda */
        .header-home {
            background: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%);
            color: white;
            padding: 20px 15px;
            border-radius: 0 0 25px 25px;
            position: relative;
        }

        .welcome-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .welcome-text {
            flex: 1;
        }

        .welcome-greeting {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
            font-weight: 400;
        }

        .member-name {
            font-size: 20px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 5px;
        }

        .member-id {
            font-size: 13px;
            opacity: 0.9;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.15);
            padding: 5px 10px;
            border-radius: 8px;
            display: inline-block;
        }

        .profile-photo {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            overflow: hidden;
            margin-left: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .profile-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Total Savings Card */
        .total-savings-card {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            margin: 20px 15px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .total-savings-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .total-logo {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            overflow: hidden;
            margin-right: 12px;
            border: 2px solid white;
        }

        .total-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .total-header-text {
            flex: 1;
        }

        .total-header-text .member-id-small {
            font-size: 11px;
            opacity: 0.9;
            margin-bottom: 3px;
        }

        .total-header-text .card-title {
            font-size: 16px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
        }

        .eye-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .eye-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .total-amount-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .total-amount {
            font-size: 28px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 0.5px;
        }

        .amount-hidden {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 3px;
        }

        /* Summary Card */
        .summary-card {
            background-color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .summary-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            font-family: 'Poppins', sans-serif;
        }

        .summary-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .summary-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .summary-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
            color: white;
        }

        .icon-pokok { background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); }
        .icon-wajib { background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); }
        .icon-sukarela { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }
        .icon-loan-limit { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); }
        .icon-active-loan { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }

        .summary-details {
            flex-grow: 1;
        }

        .summary-label {
            font-size: 13px;
            color: #666;
            margin-bottom: 3px;
        }

        .summary-value {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            font-family: 'Poppins', sans-serif;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .summary-count {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
            cursor: pointer;
        }

        .summary-count:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #FF9800;
        }

        .count-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .count-value {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            font-family: 'Poppins', sans-serif;
        }

        /* SHU Card */
        .shu-card {
            background: linear-gradient(135deg, #ffcc80 0%, #ffb74d 100%);
            color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .shu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 183, 77, 0.2);
        }

        .shu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .shu-title {
            font-size: 18px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
        }

        .shu-link {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.95);
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .shu-link:hover {
            background: rgba(255, 255, 255, 0.25);
            text-decoration: underline;
        }

        .shu-status {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 11px;
            padding: 4px 12px;
            border-radius: 15px;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .shu-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .shu-period {
            font-size: 13px;
            opacity: 0.9;
        }

        .shu-total {
            font-size: 22px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        /* KUD Toko Card */
        .ksu-card {
            background-color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .ksu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .ksu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .ksu-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            font-family: 'Poppins', sans-serif;
        }

        .ksu-link {
            font-size: 14px;
            color: #2e7d32;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .ksu-link:hover {
            background-color: rgba(46, 125, 50, 0.1);
            text-decoration: underline;
        }

        .ksu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .ksu-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 15px;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
            cursor: pointer;
        }

        .ksu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #4caf50;
        }

        .ksu-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .ksu-label i {
            margin-right: 6px;
            font-size: 14px;
        }

        .ksu-amount {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 5px;
        }

        .ksu-change {
            font-size: 11px;
            margin-top: 3px;
        }

        .change-positive { color: #4caf50; }
        .change-negative { color: #f44336; }

        /* Activity Card */
        .activity-card {
            background-color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        .activity-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            font-family: 'Poppins', sans-serif;
        }

        .activity-list {
            margin-top: 10px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s;
        }

        .activity-item:hover {
            background-color: #f9f9f9;
            border-radius: 10px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
            color: white;
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
        }

        .activity-details {
            flex-grow: 1;
        }

        .activity-name {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 3px;
        }

        .activity-date {
            font-size: 11px;
            color: #888;
        }

        .activity-amount {
            font-size: 15px;
            font-weight: 700;
            color: #4caf50;
            font-family: 'Poppins', sans-serif;
        }

        /* Header Savings */
        .header-savings {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 20px 15px;
            border-radius: 0 0 25px 25px;
            position: relative;
            text-align: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .coop-name {
            font-size: 18px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .coop-tagline {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 3px;
        }

        /* Savings History */
        .savings-history-section {
            background-color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            font-family: 'Poppins', sans-serif;
        }

        .filter-options {
            display: flex;
            gap: 10px;
        }

        .filter-btn {
            background-color: #f0f0f0;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background-color: #2e7d32;
            color: white;
        }

        .filter-btn:hover {
            background-color: #e0e0e0;
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s;
        }

        .history-item:hover {
            background-color: #f9f9f9;
            border-radius: 10px;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 16px;
            color: white;
        }

        .history-details {
            flex-grow: 1;
        }

        .history-type {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 3px;
        }

        .history-date {
            font-size: 11px;
            color: #888;
        }

        .history-amount {
            font-size: 15px;
            font-weight: 700;
            color: #4caf50;
            font-family: 'Poppins', sans-serif;
        }

        .history-amount.withdrawal {
            color: #f44336;
        }

        /* Savings Actions */
        .savings-actions-section {
            background-color: white;
            margin: 0 15px 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .action-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
            cursor: pointer;
        }

        .action-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #2196F3;
        }

        .action-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 20px;
            color: white;
        }

        .icon-deposit { background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); }
        .icon-withdrawal { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }
        .icon-transfer { background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); }
        .icon-statement { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); }

        .action-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-family: 'Poppins', sans-serif;
        }

        .action-desc {
            font-size: 11px;
            color: #666;
        }

        /* Header Loan */
        .header-loan {
            background: linear-gradient(135deg, #2c5f2d, #1e421f);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .loan-logo-container {
            position: absolute;
            left: 20px;
            display: flex;
            align-items: center;
        }

        .logo-koperasi {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .header-title {
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: 2px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .loan-container {
            padding: 20px;
        }

        /* Stats Card Pinjaman */
        .stats-card {
            background: linear-gradient(135deg, #2c5f2d, #4c9c4c);
            border-radius: 20px;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(44, 95, 45, 0.25);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stats-title {
            text-align: center;
            font-size: 1rem;
            margin-bottom: 12px;
            font-weight: 500;
            opacity: 0.95;
        }

        .stats-amount {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-container {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 10px;
            margin: 15px 0 20px 0;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #ffd700, #ffcc00);
            border-radius: 10px;
            width: 0%;
            transition: width 1.5s ease-in-out;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .stats-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-top: 8px;
        }

        .terpakai, .tersedia {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .terpakai-label, .tersedia-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .terpakai-amount, .tersedia-amount {
            font-weight: 700;
            font-size: 1.1rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        /* Button Pengajuan */
        .btn-pengajuan {
            background: linear-gradient(135deg, #2c5f2d, #1e421f);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 16px 20px;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(44, 95, 45, 0.3);
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn-pengajuan:hover {
            background: linear-gradient(135deg, #1e421f, #0f2a10);
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(44, 95, 45, 0.4);
        }

        .btn-pengajuan i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Riwayat Pinjaman */
        .riwayat-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .riwayat-item {
            border-radius: 16px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
            min-height: 85px;
            border-width: 3px;
            border-style: solid;
        }

        .riwayat-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .riwayat-item.menunggu {
            background-color: #fffef7;
            border-color: #ffc107;
            border-left-width: 8px;
        }

        .riwayat-item.berjalan {
            background-color: #f0faff;
            border-color: #17a2b8;
            border-left-width: 8px;
        }

        .riwayat-item.ditolak {
            background-color: #fff5f5;
            border-color: #dc3545;
            border-left-width: 8px;
        }

        .riwayat-item.lunas {
            background-color: #f4fff4;
            border-color: #28a745;
            border-left-width: 8px;
        }

        .riwayat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .riwayat-item:hover::before {
            transform: translateX(100%);
        }

        .riwayat-info {
            flex-grow: 1;
        }

        .riwayat-status {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 2px solid;
            background-color: white;
        }

        .status-badge.menunggu {
            color: #856404;
            border-color: #ffc107;
            background-color: #fff3cd;
        }

        .status-badge.berjalan {
            color: #0c5460;
            border-color: #17a2b8;
            background-color: #d1ecf1;
        }

        .status-badge.ditolak {
            color: #721c24;
            border-color: #dc3545;
            background-color: #f8d7da;
        }

        .status-badge.lunas {
            color: #155724;
            border-color: #28a745;
            background-color: #d4edda;
        }

        .riwayat-amount {
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 6px;
            color: #2c5f2d;
        }

        .riwayat-detail {
            font-size: 0.85rem;
            color: #555;
            margin-bottom: 4px;
        }

        .riwayat-tenor {
            font-size: 0.8rem;
            color: #777;
            font-weight: 500;
        }

        .riwayat-date {
            font-size: 0.75rem;
            color: #999;
            margin-top: 3px;
        }

        .riwayat-icon {
            font-size: 1.6rem;
            color: rgba(0,0,0,0.15);
            margin-left: 12px;
            transition: transform 0.3s;
        }

        .riwayat-item:hover .riwayat-icon {
            transform: translateX(5px);
            color: rgba(0,0,0,0.3);
        }

        /* Card Container Grid - UTAMA */
        .card-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 20px 25px;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
            border: 1px solid #e0e0e0;
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.1);
        }

        .card p {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .card h3 {
            font-size: 1.1rem;
            color: #2c5f2d;
            font-weight: 700;
        }

        /* Modal Styling */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            z-index: 200;
            justify-content: center;
            align-items: center;
            padding: 15px;
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            border-radius: 24px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.25);
            animation: modalFadeIn 0.4s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            background: linear-gradient(135deg, #2c5f2d, #1e421f);
            color: white;
            padding: 18px;
            text-align: center;
            font-weight: 700;
            font-size: 1.4rem;
            border-radius: 24px 24px 0 0;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: white;
            position: absolute;
            right: 18px;
            top: 15px;
            opacity: 0.9;
            transition: all 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            opacity: 1;
            background: rgba(255,255,255,0.1);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 25px;
        }

        /* Info Simpanan */
        .info-simpanan {
            background: linear-gradient(145deg, #f0f9ff, #e6f3ff);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #b8e1ff;
            box-shadow: 0 4px 15px rgba(13,110,253,0.05);
        }

        .simpanan-title {
            font-weight: 700;
            color: #0d6efd;
            margin-bottom: 15px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .simpanan-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95rem;
            padding: 5px 0;
        }

        .simpanan-detail.total {
            font-weight: 700;
            border-top: 2px solid #b8e1ff;
            padding-top: 12px;
            margin-top: 12px;
            color: #0d6efd;
        }

        /* Form Styling */
        .modal-section-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2c5f2d;
            padding-bottom: 8px;
            border-bottom: 3px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.95rem;
        }

        .select-wrapper {
            position: relative;
        }

        .select-wrapper::after {
            content: "â–¼";
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
            font-size: 0.9rem;
        }

        .form-select, .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 0.95rem;
            background-color: white;
            appearance: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: #2c5f2d;
            box-shadow: 0 0 0 3px rgba(44, 95, 45, 0.1);
        }

        .nominal-info {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 12px;
            margin-top: 8px;
            border-left: 5px solid #2c5f2d;
        }

        .nominal-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 4px;
        }

        .nominal-amount {
            font-weight: 700;
            font-size: 1.2rem;
            color: #2c5f2d;
        }

        .divider {
            height: 1px;
            background: linear-gradient(to right, transparent, #e0e0e0, transparent);
            margin: 25px 0;
        }

        .skema-options {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .skema-option {
            flex: 1;
            text-align: center;
            padding: 12px 8px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 0.9rem;
            background: white;
        }

        .skema-option i {
            display: block;
            margin-bottom: 6px;
            font-size: 1.2rem;
        }

        .skema-option.active {
            border-color: #2c5f2d;
            background: linear-gradient(145deg, #e8f5e9, #d0ebd0);
            color: #2c5f2d;
            box-shadow: 0 4px 10px rgba(44,95,45,0.1);
        }

        .tanggal-info {
            background: linear-gradient(145deg, #f8f9fa, #f0f2f5);
            border-radius: 12px;
            padding: 15px;
            margin-top: 12px;
            border-left: 5px solid #17a2b8;
        }

        /* Menunggu Header */
        .menunggu-header {
            text-align: center;
            padding: 20px 0 20px 0;
            background: linear-gradient(145deg, #fff9e6, #fff3cd);
            border-radius: 16px;
            margin-bottom: 20px;
        }

        .menunggu-icon {
            font-size: 3rem;
            color: #ffc107;
            margin-bottom: 10px;
            animation: float 2s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .menunggu-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: #2c5f2d;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .menunggu-subtitle {
            display: inline-block;
            background: linear-gradient(145deg, #fff3cd, #ffe69c);
            color: #856404;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            border: 2px solid #ffc107;
            margin-top: 5px;
            box-shadow: 0 4px 10px rgba(255,193,7,0.2);
        }

        .info-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.03);
        }

        .info-card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #2c5f2d;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e0e0e0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .info-item-label {
            color: #666;
            font-weight: 500;
        }

        .info-item-value {
            color: #333;
            font-weight: 600;
            text-align: right;
        }

        .info-item-value.amount {
            color: #2c5f2d;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .info-item-value.negative {
            color: #dc3545;
        }

        .info-divider {
            height: 1px;
            background: linear-gradient(to right, transparent, #e0e0e0, transparent);
            margin: 15px 0;
        }

        .info-note {
            font-size: 0.85rem;
            color: #666;
            font-style: italic;
            margin-top: -5px;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid #ffc107;
        }

        /* Button Actions */
        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }

        .btn-modal {
            flex: 1;
            padding: 14px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-modal-primary {
            background: linear-gradient(135deg, #2c5f2d, #1e421f);
            color: white;
            box-shadow: 0 4px 15px rgba(44,95,45,0.2);
        }

        .btn-modal-primary:hover {
            background: linear-gradient(135deg, #1e421f, #0f2a10);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(44,95,45,0.3);
        }

        .btn-modal-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }

        .btn-modal-secondary:hover {
            background: linear-gradient(135deg, #495057, #343a40);
            transform: translateY(-2px);
        }

        /* ========== PERBAIKAN TOMBOL SESUAI PERMINTAAN ========== */
        /* Kirim ke WhatsApp Admin & Proses Transfer - Border radius, gradasi hijau, shadow, hover */
        .btn-modal-whatsapp,
        .form-button[onclick*="sendDepositToWhatsApp"],
        .form-button[onclick*="sendWithdrawalToWhatsApp"],
        .btn-modal[onclick*="sendWhatsApp"],
        .btn-modal[onclick*="processTransfer"] {
            background: linear-gradient(145deg, #4CAF50, #2E7D32) !important;
            color: white !important;
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 12px !important;
            padding: 14px 20px !important;
            font-weight: 600 !important;
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3) !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            overflow: hidden !important;
        }

        .btn-modal-whatsapp::before,
        .form-button[onclick*="sendDepositToWhatsApp"]::before,
        .form-button[onclick*="sendWithdrawalToWhatsApp"]::before,
        .btn-modal[onclick*="sendWhatsApp"]::before,
        .btn-modal[onclick*="processTransfer"]::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent) !important;
            transition: left 0.6s ease !important;
        }

        .btn-modal-whatsapp:hover,
        .form-button[onclick*="sendDepositToWhatsApp"]:hover,
        .form-button[onclick*="sendWithdrawalToWhatsApp"]:hover,
        .btn-modal[onclick*="sendWhatsApp"]:hover,
        .btn-modal[onclick*="processTransfer"]:hover {
            background: linear-gradient(145deg, #2E7D32, #1B5E20) !important;
            transform: translateY(-3px) scale(1.02) !important;
            box-shadow: 0 12px 28px rgba(46, 125, 50, 0.4) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .btn-modal-whatsapp:hover::before,
        .form-button[onclick*="sendDepositToWhatsApp"]:hover::before,
        .form-button[onclick*="sendWithdrawalToWhatsApp"]:hover::before,
        .btn-modal[onclick*="sendWhatsApp"]:hover::before,
        .btn-modal[onclick*="processTransfer"]:hover::before {
            left: 100% !important;
        }

        .btn-modal-whatsapp i,
        .form-button[onclick*="sendDepositToWhatsApp"] i,
        .form-button[onclick*="sendWithdrawalToWhatsApp"] i,
        .btn-modal[onclick*="sendWhatsApp"] i,
        .btn-modal[onclick*="processTransfer"] i {
            font-size: 1.2rem !important;
            margin-right: 8px !important;
            transition: transform 0.3s ease !important;
        }

        .btn-modal-whatsapp:hover i,
        .form-button[onclick*="sendDepositToWhatsApp"]:hover i,
        .form-button[onclick*="sendWithdrawalToWhatsApp"]:hover i,
        .btn-modal[onclick*="sendWhatsApp"]:hover i,
        .btn-modal[onclick*="processTransfer"]:hover i {
            transform: scale(1.2) rotate(-5deg) !important;
        }

        .btn-modal-print {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            color: white;
        }

        .btn-modal-print:hover {
            background: linear-gradient(135deg, #5a32a3, #461f7a);
            transform: translateY(-2px);
        }

        /* ========== TOMBOL TRANSFER ESTETIK ========== */
        .btn-transfer-premium {
            background: linear-gradient(145deg, #2E7D32, #4CAF50, #66BB6A, #2E7D32) !important;
            background-size: 300% 300% !important;
            color: white !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
            border-radius: 50px !important;
            padding: 16px 24px !important;
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            box-shadow: 0 10px 25px rgba(46, 125, 50, 0.4), 0 0 0 2px rgba(255, 255, 255, 0.1) inset !important;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
            position: relative !important;
            overflow: hidden !important;
            width: 100% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 12px !important;
            animation: gradientShift 3s ease infinite !important;
            letter-spacing: 1px !important;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
        }

        .btn-transfer-premium::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent) !important;
            transition: left 0.6s ease !important;
        }

        .btn-transfer-premium:hover {
            transform: translateY(-5px) scale(1.03) !important;
            box-shadow: 0 18px 35px rgba(46, 125, 50, 0.5), 0 0 0 3px rgba(255, 255, 255, 0.3) inset !important;
            background: linear-gradient(145deg, #1B5E20, #2E7D32, #4CAF50, #1B5E20) !important;
            background-size: 300% 300% !important;
        }

        .btn-transfer-premium:hover::before {
            left: 100% !important;
        }

        .btn-transfer-premium i {
            font-size: 1.3rem !important;
            transition: transform 0.4s ease !important;
        }

        .btn-transfer-premium:hover i {
            transform: scale(1.2) rotate(360deg) !important;
        }

        /* ========== TOMBOL CETAK KARTU DAN DOWNLOAD PDF ESTETIK ========== */
        .btn-card-print, .btn-pdf-download {
            background: linear-gradient(145deg, #2E7D32, #4CAF50, #66BB6A) !important;
            background-size: 200% 200% !important;
            color: white !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
            border-radius: 40px !important;
            padding: 14px 20px !important;
            font-weight: 700 !important;
            font-size: 1rem !important;
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3) !important;
            transition: all 0.4s ease !important;
            position: relative !important;
            overflow: hidden !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 10px !important;
            flex: 1 !important;
            animation: pulse 2s infinite !important;
        }

        .btn-card-print {
            background: linear-gradient(145deg, #FF9800, #F57C00, #FFB74D) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .btn-pdf-download {
            background: linear-gradient(145deg, #2196F3, #1976D2, #64B5F6) !important;
            border-color: rgba(255, 255, 255, 0.5) !important;
        }

        .btn-card-print::before, .btn-pdf-download::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent) !important;
            transition: left 0.6s ease !important;
        }

        .btn-card-print:hover, .btn-pdf-download:hover {
            transform: translateY(-4px) scale(1.02) !important;
            box-shadow: 0 15px 30px rgba(0,0,0,0.25) !important;
            border-color: rgba(255, 255, 255, 0.8) !important;
        }

        .btn-card-print:hover::before, .btn-pdf-download:hover::before {
            left: 100% !important;
        }

        .btn-card-print i, .btn-pdf-download i {
            font-size: 1.2rem !important;
            transition: transform 0.3s ease !important;
        }

        .btn-card-print:hover i, .btn-pdf-download:hover i {
            transform: scale(1.2) rotate(10deg) !important;
        }

        @keyframes pulse {
            0% { box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3); }
            50% { box-shadow: 0 12px 30px rgba(46, 125, 50, 0.5); }
            100% { box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3); }
        }

        /* ========== PREVIEW KARTU ANGGOTA ========== */
        .kartu-preview-container {
            background: linear-gradient(145deg, #f9f9f9, #eaeaea);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid #2E7D32;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .kartu-preview-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2E7D32;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px dashed #4CAF50;
            padding-bottom: 10px;
        }

        .kartu-preview {
            background: white;
            border-radius: 16px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid #ddd;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .kartu-header {
            background: linear-gradient(135deg, #2E7D32, #4CAF50);
            color: white;
            padding: 12px;
            border-radius: 12px 12px 0 0;
            width: 100%;
            margin-bottom: 15px;
        }

        .kartu-header h4 {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
        }

        .kartu-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid #4CAF50;
            margin: 0 auto 15px;
        }

        .kartu-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .kartu-info {
            width: 100%;
            text-align: left;
            background: #f5f5f5;
            padding: 15px;
            border-radius: 12px;
        }

        .kartu-info-row {
            display: flex;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .kartu-info-label {
            font-weight: 700;
            width: 100px;
            color: #333;
        }

        .kartu-info-value {
            flex: 1;
            color: #2E7D32;
            font-weight: 600;
        }

        .kartu-footer {
            margin-top: 15px;
            font-size: 0.8rem;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            width: 100%;
        }

        /* ========== GRADASI HIJAU LEMBUT PADA NAVBAR ========== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(145deg, #2E7D32, #4CAF50, #66BB6A, #2E7D32) !important;
            background-size: 400% 400% !important;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 0 15px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 25px rgba(46, 125, 50, 0.4), 0 -2px 10px rgba(0,0,0,0.1) !important;
            z-index: 100;
            max-width: 500px;
            margin: 0 auto;
            animation: gradientShift 10s ease infinite !important;
            border-top: 2px solid rgba(255, 255, 255, 0.5) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .nav-item {
            text-align: center;
            font-size: 11px;
            color: white !important;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
            flex: 1;
            padding: 8px 4px;
            border-radius: 15px;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            margin: 0 3px;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.25) !important;
            color: #FFD700 !important;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3), 0 0 0 2px rgba(255, 255, 255, 0.5) inset !important;
            transform: translateY(-5px) scale(1.08) !important;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5) !important;
            border: 1px solid white !important;
        }

        .nav-item:hover {
            transform: translateY(-3px) scale(1.05) !important;
            background: rgba(255, 255, 255, 0.2) !important;
            color: #FFF8E1 !important;
            box-shadow: 0 6px 20px rgba(46, 125, 50, 0.6) !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5) !important;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
            transition: transform 0.3s ease, filter 0.3s ease;
            filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.2) rotate(5deg);
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
        }

        /* Premium Modal Styling */
        .premium-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #3c8aa0, #2f6f82);
            z-index: 300;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .premium-header {
            padding: 20px;
            color: white;
            display: flex;
            align-items: center;
            background: rgba(0,0,0,0.1);
            backdrop-filter: blur(5px);
        }

        .back-btn {
            font-size: 28px;
            margin-right: 15px;
            cursor: pointer;
            transition: 0.2s;
            color: white;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .back-btn:active {
            transform: scale(0.85);
        }

        .premium-header-title {
            font-size: 20px;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .top-section {
            text-align: center;
            color: white;
            padding: 10px 20px 30px;
            animation: fadeDown 0.6s ease;
        }

        @keyframes fadeDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.95;
            font-weight: 500;
            text-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .premium-icon {
            font-size: 70px;
            margin: 15px 0;
            animation: float 2.5s infinite ease-in-out;
            text-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .badge {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 50px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .premium-label {
            font-size: 13px;
            opacity: 0.9;
            font-weight: 500;
        }

        .premium-nominal {
            font-size: 36px;
            font-weight: 800;
            margin: 5px 0 20px;
            text-shadow: 0 3px 10px rgba(0,0,0,0.2);
            letter-spacing: 1px;
        }

        .card-wrapper {
            background: #f7f6f2;
            border-radius: 40px 40px 0 0;
            padding: 30px 0 80px;
            min-height: 600px;
            box-shadow: 0 -15px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.7s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(80px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .detail-button {
            background: white;
            margin: 0 20px 20px 20px;
            padding: 18px 22px;
            border-radius: 18px;
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: all 0.2s ease;
            border: 1px solid rgba(0,0,0,0.03);
            color: #2c5f2d;
        }

        .detail-button:active {
            transform: scale(0.98);
        }

        .detail-button i {
            transition: transform 0.3s ease;
        }

        .detail-content {
            background: #ebe9e2;
            margin: 12px 20px;
            border-radius: 20px;
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.6s cubic-bezier(.68,-0.55,.27,1.55);
        }

        .detail-content.active {
            padding: 25px;
            max-height: 1500px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 15px;
        }

        .detail-row.bold {
            font-weight: 700;
            color: #2c5f2d;
        }

        .sub-note {
            font-size: 12px;
            color: #7a8aa0;
            margin-top: -8px;
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 3px solid #ffc107;
        }

        .premium-hr {
            border: none;
            border-top: 2px dashed #d5d3cd;
            margin: 20px 0;
        }

        .premium-section-title {
            margin: 35px 20px 20px;
            font-weight: 700;
            font-size: 18px;
            color: #2c5f2d;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline {
            position: relative;
            margin: 0 20px 30px;
            padding-left: 45px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 5px;
            width: 4px;
            height: calc(100% - 10px);
            background: linear-gradient(to bottom, #2ecc71, #a3e4d7);
            border-radius: 4px;
        }

        .timeline.yellow::before {
            background: linear-gradient(to bottom, #f4b400, #ffe083);
        }

        .timeline.red::before {
            background: linear-gradient(to bottom, #e74c3c, #f5a9a9);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            animation: fadeUp 0.6s ease;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .icon {
            position: absolute;
            left: -45px;
            top: 0;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .green { background: linear-gradient(145deg, #2ecc71, #27ae60); }
        .yellow-icon { background: linear-gradient(145deg, #f4b400, #f39c12); }
        .red-icon { background: linear-gradient(145deg, #e74c3c, #c0392b); }

        .timeline-box {
            background: white;
            padding: 20px;
            border-radius: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.06);
            border: 1px solid rgba(0,0,0,0.03);
        }

        .timeline-box h3 {
            font-size: 13px;
            color: #666;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .timeline-box h2 {
            font-size: 24px;
            font-weight: 700;
            margin: 8px 0;
            color: #2c5f2d;
        }

        .timeline-box p {
            font-size: 12px;
            color: #888;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #f0f0f0;
        }

        .footer-space {
            height: 30px;
        }

        /* Header Account */
        .header-account {
            background: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%);
            color: white;
            padding: 20px 15px 15px;
            border-radius: 0 0 25px 25px;
            position: relative;
            text-align: center;
        }

        /* Profile Card */
        .profile-card {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            margin: 20px 15px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            overflow: hidden;
            margin-right: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-main-info h2 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 5px;
            font-family: 'Poppins', sans-serif;
        }

        .profile-main-info .badge {
            background-color: #ffc107;
            color: #333;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        .profile-details {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 15px;
            font-size: 7px;
            line-height: 1.4;
        }

        .detail-row {
            display: flex;
            margin-bottom: 4px;
        }

        .detail-label {
            min-width: 70px;
            font-weight: 600;
            opacity: 0.9;
        }

        .detail-value {
            flex-grow: 1;
        }

        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 0 15px;
            margin-bottom: 20px;
        }

        .menu-item {
            background-color: #fff;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            cursor: pointer;
            border: 1px solid #e0e0e0;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: #4caf50;
        }

        .menu-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 18px;
            color: white;
        }

        .icon-profile { background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); }
        .icon-shu { background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); }
        .icon-faq { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); }
        .icon-terms { background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }
        .icon-about { background: linear-gradient(135deg, #00BCD4 0%, #0097A7 100%); }
        .icon-privacy { background: linear-gradient(135deg, #607D8B 0%, #455A64 100%); }
        .icon-security { background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%); }
        .icon-password { background: linear-gradient(135deg, #FFC107 0%, #FFA000 100%); }
        .icon-logout { background: linear-gradient(135deg, #757575 0%, #616161 100%); }

        .menu-title {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            font-family: 'Poppins', sans-serif;
        }

        .menu-desc {
            font-size: 9px;
            color: #666;
        }

        /* Modal Akun */
        .modal-akun {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content-akun {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header-akun {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .modal-title-akun {
            font-size: 18px;
            font-weight: 600;
            color: #2e7d32;
            font-family: 'Poppins', sans-serif;
        }

        .close-btn-akun {
            background: none;
            border: none;
            font-size: 24px;
            color: #777;
            cursor: pointer;
            line-height: 1;
        }

        .modal-body-akun {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            overflow-y: auto;
        }

        /* Profile Detail Grid */
        .profile-detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .profile-detail-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 12px;
        }

        .profile-detail-label {
            font-size: 11px;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .profile-detail-value {
            font-size: 13px;
            color: #333;
            font-weight: 500;
        }

        .profile-photo-large {
            width: 150px;
            height: 150px;
            border-radius: 20px;
            overflow: hidden;
            margin: 0 auto 20px;
            border: 3px solid #4CAF50;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .profile-photo-large img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .qr-code-container {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .qr-code-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .qr-code-placeholder {
            width: 150px;
            height: 150px;
            background: #e0e0e0;
            border-radius: 10px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 12px;
        }

        /* Footer */
        .footer {
            padding: 15px;
            text-align: center;
            background-color: #f8fafc;
            border-top: 1px solid #eef2f7;
            margin-top: 10px;
        }

        .copyright {
            font-size: 11px;
            color: #666;
            margin-bottom: 5px;
        }

        .company-name {
            font-size: 12px;
            font-weight: 500;
            color: #333;
        }

        /* Report Preview */
        .report-preview {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
        }

        .report-header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        .report-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .report-subtitle {
            font-size: 14px;
            color: #666;
        }

        .report-info {
            margin-bottom: 15px;
        }

        .report-info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .report-info-label {
            font-weight: bold;
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .report-table th {
            background-color: #f0f0f0;
            padding: 8px;
            text-align: left;
            border: 1px solid #ddd;
        }

        .report-table td {
            padding: 8px;
            border: 1px solid #ddd;
        }

        .report-footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }

        /* Button Groups */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 15px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Form Button - WhatsApp */
        .form-button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            background: linear-gradient(145deg, #25D366, #128C7E);
            color: white;
        }

        .form-button:hover {
            background: linear-gradient(145deg, #128C7E, #075E54);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4);
        }

        /* Error Message */
        .error-message {
            color: #dc3545;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
            padding-left: 10px;
            border-left: 3px solid #dc3545;
        }

        .input-error {
            border-color: #dc3545 !important;
            background-color: #fff5f5;
        }

        /* Warning Message */
        .warning-message {
            background: linear-gradient(145deg, #fff3cd, #ffe69c);
            border: 1px solid #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 0.9rem;
            display: none;
            box-shadow: 0 4px 15px rgba(255,193,7,0.1);
        }

        .warning-message i {
            margin-right: 8px;
            color: #ffc107;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }
            
            .member-name {
                font-size: 18px;
            }
            
            .total-amount {
                font-size: 24px;
            }
            
            .amount-hidden {
                font-size: 24px;
            }
            
            .actions-grid, .ksu-grid, .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .section-title, .history-title, .shu-title, .ksu-title, .summary-title, .activity-title {
                font-size: 16px;
            }
            
            .section-link, .shu-link, .ksu-link {
                font-size: 13px;
            }
            
            .profile-photo {
                width: 60px;
                height: 60px;
            }
            
            .profile-detail-grid {
                grid-template-columns: 1fr;
            }
            
            .skema-options {
                flex-direction: column;
            }
            
            .riwayat-item {
                flex-direction: column;
                align-items: flex-start;
                min-height: 80px;
            }
            
            .riwayat-icon {
                align-self: flex-end;
                margin-top: 5px;
                margin-left: 0;
            }
        }

        @media (max-width: 360px) {
            .welcome-section {
                flex-direction: column;
            }
            
            .profile-photo {
                margin-left: 0;
                margin-top: 10px;
                align-self: flex-start;
            }
            
            .actions-grid, .ksu-grid, .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .skema-options {
                flex-direction: column;
            }
        }

        /* Simulasi Section */
        .simulasi-section {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .simulasi-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #dee2e6;
        }

        .simulasi-detail:last-child {
            border-bottom: none;
        }

        .simulasi-detail-label {
            color: #495057;
            font-weight: 500;
        }

        .simulasi-detail-value {
            color: #2c5f2d;
            font-weight: 600;
        }

        .simulasi-jumlah {
            background: linear-gradient(145deg, #2c5f2d, #1e421f);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            color: white;
        }

        .simulasi-jumlah-label {
            font-size: 0.9rem;
            opacity: 0.95;
            margin-bottom: 8px;
        }

        .simulasi-jumlah-nominal {
            font-size: 1.8rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .ringkasan-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .ringkasan-item.total {
            font-weight: 700;
            color: #2c5f2d;
            border-top: 2px solid #2c5f2d;
            padding-top: 12px;
            margin-top: 12px;
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Halaman Home/Beranda -->
        <div id="home-page" class="page">
            <!-- Header -->
            <div class="header-home">
                <div class="welcome-section">
                    <div class="welcome-text">
                        <div class="welcome-greeting">SELAMAT DATANG</div>
                        <div class="member-name" id="homeMemberName">Eldi Sugianto, S.Kom</div>
                        <div class="member-id" id="homeMemberId">#01-2026-001</div>
                    </div>
                    <div class="profile-photo">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitHwKW04cRgPXw3b8d7SBgwklv_0jmxB-cAiU3m_kPBMh459fH74hQ9O4xp3evk1E44AUsPu08yFElOe40HlvY1ouC4QDsdu2GI-IM5Jm5gXhtwOA5lQEGba2eAEX1kAV4XeG9HpUN-ouz3fn-7rzinxdhjk3GD9a8c5-FHqY0WXVwXff1ftHS4NHwRZo/s320/1000577072.png" alt="Foto Profil">
                    </div>
                </div>
            </div>

            <!-- Total Simpanan Card -->
            <div class="total-savings-card">
                <div class="total-savings-header">
                    <div class="total-logo">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhADAiDm28b0fescUKnqADc9uk3Q2oIptWD-hyzBQXb2AMtoPrxb7Q9Ecr9SDV_RhqA9uWO6qTcepfbfuR7KFWuKUmYYPB-6JfiExBCzT-MljhNh1P1TPsabKvh2rAQzEtZUA0lpiIkIuBxHvHVuXl0GdUWEyaABcfpsHnX_kyDLN_pS2gVNzp_kIP6Vss/s1280/1000007204.jpg" alt="Logo Koperasi">
                    </div>
                    <div class="total-header-text">
                        <div class="member-id-small" id="homeMemberIdSmall">#01-2026-001</div>
                        <div class="card-title">Total Simpanan</div>
                    </div>
                    <button class="eye-toggle" id="eyeToggle" onclick="toggleAmountVisibility()">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="total-amount-container">
                    <div id="totalAmount" class="total-amount">Rp 0</div>
                    <div id="hiddenAmount" class="amount-hidden" style="display: none;">*****</div>
                </div>
            </div>

            <!-- Rincian Simpanan -->
            <div class="summary-card">
                <div class="summary-title">Rincian Simpanan</div>
                
                <div class="summary-item">
                    <div class="summary-icon icon-pokok">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Pokok</div>
                        <div class="summary-value" id="homeSimpananPokok">Rp 0</div>
                    </div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-icon icon-wajib">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Wajib</div>
                        <div class="summary-value" id="homeSimpananWajib">Rp 0</div>
                    </div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-icon icon-sukarela">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Sukarela</div>
                        <div class="summary-value" id="homeSimpananSukarela">Rp 0</div>
                    </div>
                </div>
            </div>

            <!-- SHU Anggota -->
            <div class="shu-card">
                <div class="shu-header">
                    <div class="shu-title">SHU Anggota</div>
                    <a href="#" class="shu-link" onclick="openAkunModal('modalSHU')">Lihat Semua</a>
                </div>
                <div class="shu-status">Estimasi</div>
                <div class="shu-details">
                    <div>
                        <div class="shu-period">Periode SHU</div>
                        <div id="shuTotal" class="shu-total">Rp 0</div>
                    </div>
                    <div class="card-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                </div>
            </div>

            <!-- KUD Toko Koperasi -->
            <div class="ksu-card">
                <div class="ksu-header">
                    <div class="ksu-title">KUD Toko Koperasi</div>
                    <a href="kud-toko.html" class="ksu-link" target="_blank">Lihat Toko</a>
                </div>
                <div class="ksu-grid">
                    <div class="ksu-item">
                        <div class="ksu-label">
                            <i class="fas fa-shopping-cart"></i> Belanja Bulan Ini
                        </div>
                        <div class="ksu-amount" id="homeBelanjaBulanIni">Rp 0</div>
                        <div class="ksu-change change-positive">+0% dari Bulan Lalu</div>
                    </div>
                    <div class="ksu-item">
                        <div class="ksu-label">
                            <i class="fas fa-receipt"></i> Hutang Toko
                        </div>
                        <div class="ksu-amount" id="homeHutangToko">Rp 0</div>
                        <div class="ksu-change change-negative">Jatuh Tempo: -</div>
                    </div>
                </div>
            </div>

            <!-- Ringkasan -->
            <div class="summary-card">
                <div class="summary-title">Ringkasan</div>
                
                <div class="summary-item">
                    <div class="summary-icon icon-loan-limit">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Limit Pinjaman</div>
                        <div class="summary-value" id="homeLimitPinjaman">Rp 0</div>
                    </div>
                    <i class="fas fa-question-circle" style="color: #aaa;"></i>
                </div>
                
                <div class="summary-item">
                    <div class="summary-icon icon-active-loan">
                        <i class="fas fa-hand-holding"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Total Pinjaman Aktif</div>
                        <div class="summary-value" id="homePinjamanAktif">Rp 0</div>
                    </div>
                </div>
                
                <div class="summary-grid">
                    <div class="summary-count" onclick="switchPage('loan')">
                        <div class="count-label">Pinjaman Aktif</div>
                        <div class="count-value" id="homeAktifCount">0</div>
                    </div>
                    <div class="summary-count" onclick="switchPage('loan')">
                        <div class="count-label">Pinjaman Lunas</div>
                        <div class="count-value" id="homeLunasCount">0</div>
                    </div>
                </div>
            </div>

            <!-- Aktivitas Terakhir -->
            <div class="activity-card">
                <div class="activity-title">Aktivitas Terakhir</div>
                <div class="activity-list" id="homeActivityList">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="activity-details">
                            <div class="activity-name">Tidak ada aktivitas</div>
                            <div class="activity-date">-</div>
                        </div>
                        <div class="activity-amount">Rp 0</div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <div class="copyright">Hak Cipta Koperasi KUD Asmara Tani Â© 2026</div>
                <div class="company-name">TeslaSmart Digital Teknologi</div>
                <div style="font-size: 10px; color: #999; margin-top: 5px;" id="lastSyncInfo">Terakhir sinkron: -</div>
            </div>
        </div>

        <!-- Halaman Simpanan -->
        <div id="savings-page" class="page">
            <!-- Header Simpanan -->
            <div class="header-savings">
                <div class="logo-container">
                    <div class="logo">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhADAiDm28b0fescUKnqADc9uk3Q2oIptWD-hyzBQXb2AMtoPrxb7Q9Ecr9SDV_RhqA9uWO6qTcepfbfuR7KFWuKUmYYPB-6JfiExBCzT-MljhNh1P1TPsabKvh2rAQzEtZUA0lpiIkIuBxHvHVuXl0GdUWEyaABcfpsHnX_kyDLN_pS2gVNzp_kIP6Vss/s1280/1000007204.jpg" alt="Logo Koperasi">
                    </div>
                    <div>
                        <div class="coop-name">Koperasi KUD Asmara Tani</div>
                        <div class="coop-tagline">Layanan Simpanan Anggota</div>
                    </div>
                </div>
            </div>

            <!-- Total Simpanan Card -->
            <div class="total-savings-card">
                <div class="total-savings-header">
                    <div class="total-logo">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitHwKW04cRgPXw3b8d7SBgwklv_0jmxB-cAiU3m_kPBMh459fH74hQ9O4xp3evk1E44AUsPu08yFElOe40HlvY1ouC4QDsdu2GI-IM5Jm5gXhtwOA5lQEGba2eAEX1kAV4XeG9HpUN-ouz3fn-7rzinxdhjk3GD9a8c5-FHqY0WXVwXff1ftHS4NHwRZo/s320/1000577072.png" alt="Foto Profil">
                    </div>
                    <div class="total-header-text">
                        <div class="member-id-small" id="savingsMemberId">#01-2026-001</div>
                        <div class="card-title">Total Simpanan</div>
                    </div>
                    <button class="eye-toggle" id="eyeToggleSavings" onclick="toggleAmountVisibilitySavings()">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="total-amount-container">
                    <div id="totalAmountSavings" class="total-amount">Rp 0</div>
                    <div id="hiddenAmountSavings" class="amount-hidden" style="display: none;">*****</div>
                </div>
            </div>

            <!-- Detail Simpanan -->
            <div class="summary-card">
                <div class="summary-title">Detail Simpanan</div>
                
                <div class="summary-item" onclick="showSavingsDetail('pokok')">
                    <div class="summary-icon icon-pokok">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Pokok</div>
                        <div class="summary-value" id="savingsSimpananPokok">Rp 0</div>
                        <div style="font-size: 10px; color: #666; margin-top: 3px;">Satu kali & tidak dapat ditarik</div>
                    </div>
                </div>
                
                <div class="summary-item" onclick="showSavingsDetail('wajib')">
                    <div class="summary-icon icon-wajib">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Wajib</div>
                        <div class="summary-value" id="savingsSimpananWajib">Rp 0</div>
                        <div style="font-size: 10px; color: #666; margin-top: 3px;">Bulanan, dapat ditarik saat keluar</div>
                    </div>
                </div>
                
                <div class="summary-item" onclick="showSavingsDetail('sukarela')">
                    <div class="summary-icon icon-sukarela">
                        <i class="fas fa-hand-holding-heart"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Simpanan Sukarela</div>
                        <div class="summary-value" id="savingsSimpananSukarela">Rp 0</div>
                        <div style="font-size: 10px; color: #666; margin-top: 3px;">Bebas, dapat ditarik kapan saja</div>
                    </div>
                </div>
            </div>

            <!-- Aksi Simpanan -->
            <div class="savings-actions-section">
                <div class="section-header">
                    <div class="section-title">Aksi Simpanan</div>
                </div>
                <div class="actions-grid">
                    <div class="action-item" onclick="openDepositModal()">
                        <div class="action-icon icon-deposit">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="action-title">Setoran</div>
                        <div class="action-desc">Tambah saldo simpanan</div>
                    </div>
                    <div class="action-item" onclick="openWithdrawalModal()">
                        <div class="action-icon icon-withdrawal">
                            <i class="fas fa-minus"></i>
                        </div>
                        <div class="action-title">Penarikan</div>
                        <div class="action-desc">Tarik simpanan sukarela</div>
                    </div>
                    <div class="action-item" onclick="openTransferModal()">
                        <div class="action-icon icon-transfer">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="action-title">Transfer</div>
                        <div class="action-desc">Transfer antar anggota</div>
                    </div>
                    <div class="action-item" onclick="openReportModal()">
                        <div class="action-icon icon-statement">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="action-title">Laporan</div>
                        <div class="action-desc">Cetak laporan simpanan</div>
                    </div>
                </div>
            </div>

            <!-- Riwayat Transaksi -->
            <div class="savings-history-section">
                <div class="history-header">
                    <div class="history-title">Riwayat Transaksi</div>
                    <div class="filter-options">
                        <button class="filter-btn active" onclick="filterTransactions('all')">Semua</button>
                        <button class="filter-btn" onclick="filterTransactions('deposit')">Setor</button>
                        <button class="filter-btn" onclick="filterTransactions('withdrawal')">Tarik</button>
                    </div>
                </div>
                <div class="history-list" id="transactionHistory">
                    <div class="history-item">
                        <div class="history-icon" style="background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="history-details">
                            <div class="history-type">Setoran Awal Simpanan Pokok</div>
                            <div class="history-date">18 September 2020, 10:30 WIB</div>
                        </div>
                        <div class="history-amount">+Rp 200.000</div>
                    </div>
                    <div class="history-item">
                        <div class="history-icon" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                        <div class="history-details">
                            <div class="history-type">Setoran Simpanan Sukarela</div>
                            <div class="history-date">20 September 2020, 14:15 WIB</div>
                        </div>
                        <div class="history-amount">+Rp 200.000</div>
                    </div>
                    <div class="history-item">
                        <div class="history-icon" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="history-details">
                            <div class="history-type">Pembukaan Rekening</div>
                            <div class="history-date">18 September 2020, 09:00 WIB</div>
                        </div>
                        <div class="history-amount">Rp 0</div>
                    </div>
                </div>
            </div>

            <!-- Informasi Simpanan -->
            <div class="summary-card">
                <div class="summary-title">Informasi Simpanan</div>
                <div class="summary-item">
                    <div class="summary-icon" style="background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Bunga Simpanan</div>
                        <div class="summary-value">0.5% per tahun</div>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Periode Simpanan Wajib</div>
                        <div class="summary-value">Setiap bulan ke-1</div>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-icon" style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <div class="summary-details">
                        <div class="summary-label">Minimum Penarikan</div>
                        <div class="summary-value">Rp 50.000</div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <div class="copyright">Hak Cipta Koperasi KUD Asmara Tani Â© 2026</div>
                <div class="company-name">TeslaSmart Digital Teknologi</div>
            </div>
        </div>

        <!-- Halaman Pinjaman -->
        <div id="loan-page" class="page">
            <!-- Header dengan Logo -->
            <div class="header-loan">
                <div class="loan-logo-container">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhADAiDm28b0fescUKnqADc9uk3Q2oIptWD-hyzBQXb2AMtoPrxb7Q9Ecr9SDV_RhqA9uWO6qTcepfbfuR7KFWuKUmYYPB-6JfiExBCzT-MljhNh1P1TPsabKvh2rAQzEtZUA0lpiIkIuBxHvHVuXl0GdUWEyaABcfpsHnX_kyDLN_pS2gVNzp_kIP6Vss/s1280/1000007204.jpg" 
                         alt="Logo Koperasi" 
                         class="logo-koperasi">
                </div>
                <span class="header-title">PINJAMAN</span>
            </div>
            
            <div class="loan-container">
                <!-- Stats Card -->
                <div class="stats-card">
                    <div class="stats-title">Limit Pinjaman Kamu</div>
                    <div class="stats-amount" id="limitPinjaman">Rp 0</div>
                    
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    
                    <div class="stats-details">
                        <div class="terpakai">
                            <div class="terpakai-label">Terpakai</div>
                            <div class="terpakai-amount" id="terpakaiAmount">Rp 0</div>
                        </div>
                        <div class="tersedia">
                            <div class="tersedia-label">Tersedia</div>
                            <div class="tersedia-amount" id="tersediaAmount">Rp 0</div>
                        </div>
                    </div>
                </div>
                
                <!-- Tombol Pengajuan Pinjaman -->
                <button class="btn-pengajuan" id="btnPengajuan" onclick="openLoanModal('modalPengajuan')">
                    <i class="fas fa-file-alt"></i> PENGAJUAN PINJAMAN
                </button>
                
                <!-- Riwayat Pinjaman -->
                <div class="section-title">
                    <i class="fas fa-history"></i> Riwayat Pinjaman
                </div>
                
                <div class="riwayat-list">
                    <!-- Menunggu Persetujuan -->
                    <div class="riwayat-item menunggu" onclick="openLoanModal('modalMenunggu')">
                        <div class="riwayat-info">
                            <div class="riwayat-status">
                                <span class="status-badge menunggu">â³ Menunggu Persetujuan</span>
                            </div>
                            <div class="riwayat-amount" id="menungguAmount">Rp 0</div>
                            <div class="riwayat-detail" id="menungguDetail">- â€¢ -</div>
                            <div class="riwayat-tenor" id="menungguTenor">Tenor: -</div>
                            <div class="riwayat-date" id="menungguDate">-</div>
                        </div>
                        <div class="riwayat-icon">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <!-- Pinjaman Berjalan -->
                    <div class="riwayat-item berjalan" onclick="openPremiumModal('berjalan')">
                        <div class="riwayat-info">
                            <div class="riwayat-status">
                                <span class="status-badge berjalan">ðŸ”„ Pinjaman Berjalan</span>
                            </div>
                            <div class="riwayat-amount" id="berjalanAmount">Rp 0</div>
                            <div class="riwayat-detail" id="berjalanDetail">- â€¢ -</div>
                            <div class="riwayat-tenor" id="berjalanTenor">Tenor: -</div>
                            <div class="riwayat-date" id="berjalanDate">-</div>
                        </div>
                        <div class="riwayat-icon">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <!-- Ditolak -->
                    <div class="riwayat-item ditolak" onclick="openPremiumModal('ditolak')">
                        <div class="riwayat-info">
                            <div class="riwayat-status">
                                <span class="status-badge ditolak">âŒ Ditolak</span>
                            </div>
                            <div class="riwayat-amount" id="ditolakAmount">Rp 0</div>
                            <div class="riwayat-detail" id="ditolakDetail">- â€¢ -</div>
                            <div class="riwayat-tenor" id="ditolakTenor">Tenor: -</div>
                            <div class="riwayat-date" id="ditolakDate">-</div>
                        </div>
                        <div class="riwayat-icon">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <!-- Lunas -->
                    <div class="riwayat-item lunas" onclick="openPremiumModal('lunas')">
                        <div class="riwayat-info">
                            <div class="riwayat-status">
                                <span class="status-badge lunas">âœ… Lunas</span>
                            </div>
                            <div class="riwayat-amount" id="lunasAmount">Rp 0</div>
                            <div class="riwayat-detail" id="lunasDetail">- â€¢ -</div>
                            <div class="riwayat-tenor" id="lunasTenor">Tenor: -</div>
                            <div class="riwayat-date" id="lunasDate">-</div>
                        </div>
                        <div class="riwayat-icon">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <div class="copyright">Hak Cipta Koperasi KUD Asmara Tani Â© 2026</div>
                <div class="company-name">TeslaSmart Digital Teknologi</div>
            </div>
        </div>

        <!-- Halaman Akun -->
        <div id="account-page" class="page">
            <!-- Header dengan Logo -->
            <div class="header-account">
                <div class="logo-container">
                    <div class="logo">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhADAiDm28b0fescUKnqADc9uk3Q2oIptWD-hyzBQXb2AMtoPrxb7Q9Ecr9SDV_RhqA9uWO6qTcepfbfuR7KFWuKUmYYPB-6JfiExBCzT-MljhNh1P1TPsabKvh2rAQzEtZUA0lpiIkIuBxHvHVuXl0GdUWEyaABcfpsHnX_kyDLN_pS2gVNzp_kIP6Vss/s1280/1000007204.jpg" alt="Logo Koperasi">
                    </div>
                    <div>
                        <div class="coop-name">Koperasi KUD Asmara Tani</div>
                        <div class="coop-tagline">Bersama Membangun Ekonomi Desa</div>
                    </div>
                </div>
            </div>

            <!-- Card Profil Anggota -->
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjh1oM43gxD4iCHpHRBrrbkCHRU5MigalAWf4G5x-cTLfRRxWeeTwGqwNz8FtSdSgcexhRAIWMX7eZoOxo0b-i8kB2EUr44TCkMCZ8VVfQTJpL0AgptbY8hjsTZtqg6jbS2MMOuIVf9FvNOR-JsZr4dvrpqTQT0I5qY5OB063z38W0mTIVhQrBPTASmQp0/s1280/1000175639.jpg" alt="Foto Anggota">
                    </div>
                    <div class="profile-main-info">
                        <h2 id="accountMemberName">Eldi Sugianto, S.Kom <span class="badge">âœ”</span></h2>
                        <div class="plan-text">
                            <p>Tabungan Digital Aktif hingga: 10 Oktober 2024</p>
                        </div>
                    </div>
                </div>
                
                <div class="profile-details">
                    <div class="detail-row">
                        <div class="detail-label">ID/NIA:</div>
                        <div class="detail-value" id="accountMemberId">#01-2026-001</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Posisi:</div>
                        <div class="detail-value">Ketua Koperasi</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Alamat:</div>
                        <div class="detail-value" id="accountAlamat">Kp. Banjar Karya Rt. 02 Rw. 01 Desa Ciasmara Kecamatan Pamijahan Kabupaten Bogor Kode POS 16810</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Email:</div>
                        <div class="detail-value" id="accountEmail">siliwangi4212@gmail.com</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">WhatsApp:</div>
                        <div class="detail-value" id="accountWhatsApp">6285218483129</div>
                    </div>
                </div>
            </div>

            <!-- Menu Grid -->
            <div class="menu-grid">
                <div class="menu-item" onclick="openAkunModal('modalProfileDetail')">
                    <div class="menu-icon icon-profile">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="menu-title">Profil Lengkap</div>
                    <div class="menu-desc">Lihat detail profil anggota</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalSHU')">
                    <div class="menu-icon icon-shu">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="menu-title">SHU Anggota</div>
                    <div class="menu-desc">Sisa Hasil Usaha</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalFAQ')">
                    <div class="menu-icon icon-faq">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="menu-title">FAQ</div>
                    <div class="menu-desc">Pertanyaan yang sering ditanyakan</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalTerms')">
                    <div class="menu-icon icon-terms">
                        <i class="fas fa-file-contract"></i>
                    </div>
                    <div class="menu-title">Syarat & Ketentuan</div>
                    <div class="menu-desc">Ketentuan penggunaan aplikasi</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalAbout')">
                    <div class="menu-icon icon-about">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="menu-title">Tentang Aplikasi</div>
                    <div class="menu-desc">Informasi tentang aplikasi ini</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalPrivacy')">
                    <div class="menu-icon icon-privacy">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="menu-title">Kebijakan Privasi</div>
                    <div class="menu-desc">Kebijakan privasi data anggota</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalSecurity')">
                    <div class="menu-icon icon-security">
                        <i class="fas fa-lock"></i>
                    </div>
                    <div class="menu-title">Keamanan</div>
                    <div class="menu-desc">Ubah kata sandi & pengaturan keamanan</div>
                </div>
                
                <div class="menu-item" onclick="openAkunModal('modalPassword')">
                    <div class="menu-icon icon-password">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="menu-title">Ganti Password</div>
                    <div class="menu-desc">Ubah kata sandi akun</div>
                </div>
                
                <div class="menu-item" onclick="logout()">
                    <div class="menu-icon icon-logout">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <div class="menu-title">Logout</div>
                    <div class="menu-desc">Keluar dari aplikasi</div>
                </div>
            </div>

            <!-- Footer untuk Akun -->
            <div class="footer">
                <div class="copyright">Hak Cipta Koperasi KUD Asmara Tani Â© 2026</div>
                <div class="company-name">TeslaSmart Digital Teknologi</div>
            </div>
        </div>

        <!-- Bottom Navigation - GRADASI HIJAU LEMBUT TEMA KOPERASI -->
        <div class="bottom-nav">
            <div class="nav-item" data-page="savings" onclick="switchPage('savings')">
                <div class="nav-icon"><i class="fas fa-wallet"></i></div>
                Simpanan
            </div>
            <div class="nav-item" data-page="loan" onclick="switchPage('loan')">
                <div class="nav-icon"><i class="fas fa-hand-holding-usd"></i></div>
                Pinjaman
            </div>
            <div class="nav-item active" data-page="home" onclick="switchPage('home')">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                Beranda
            </div>
            <div class="nav-item" onclick="window.open('kud-toko.html', '_blank')">
                <div class="nav-icon"><i class="fas fa-store"></i></div>
                KUD Toko
            </div>
            <div class="nav-item" data-page="account" onclick="switchPage('account')">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                Akun
            </div>
        </div>
    </div>

    <!-- Modal untuk Setoran -->
    <div id="modalDeposit" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Setoran Simpanan</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalDeposit')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <div class="form-group">
                    <label class="form-label">Jenis Simpanan</label>
                    <select class="form-input" id="depositType">
                        <option value="pokok">Simpanan Pokok</option>
                        <option value="wajib">Simpanan Wajib</option>
                        <option value="sukarela">Simpanan Sukarela</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jumlah Setoran (Rp)</label>
                    <input type="number" class="form-input" id="depositAmount" placeholder="Masukkan jumlah setoran" min="10000">
                    <div style="font-size: 11px; color: #666; margin-top: 5px;">Minimal setoran: Rp 10.000</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Metode Pembayaran</label>
                    <select class="form-input" id="paymentMethod">
                        <option value="cash">Tunai di Kasir</option>
                        <option value="bri">Bank BRI - 4098 01 019526 53 3 A/n Eldi Sugianto</option>
                        <option value="dana">DANA 085218483129</option>
                        <option value="gopay">Gopay 085218483129</option>
                        <option value="qris">QRIS</option>
                        <option value="other">Bank Lain</option>
                    </select>
                </div>
                
                <button class="form-button" onclick="sendDepositToWhatsApp()">
                    <i class="fab fa-whatsapp"></i> Kirim ke WhatsApp Admin
                </button>
            </div>
        </div>
    </div>

    <!-- Modal untuk Penarikan -->
    <div id="modalWithdrawal" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Penarikan Simpanan</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalWithdrawal')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <div class="form-group">
                    <label class="form-label">Jenis Simpanan</label>
                    <select class="form-input" id="withdrawalType">
                        <option value="sukarela">Simpanan Sukarela</option>
                    </select>
                    <div style="font-size: 11px; color: #666; margin-top: 5px;">Hanya simpanan sukarela yang dapat ditarik</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Saldo Tersedia</label>
                    <input type="text" class="form-input" id="withdrawalSaldo" value="Rp 0" readonly style="background-color: #f0f0f0;">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jumlah Penarikan (Rp)</label>
                    <input type="number" class="form-input" id="withdrawalAmount" placeholder="Masukkan jumlah penarikan" min="50000">
                    <div style="font-size: 11px; color: #666; margin-top: 5px;">Minimal: Rp 50.000</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Metode Penarikan</label>
                    <select class="form-input" id="withdrawalMethod">
                        <option value="transfer">Transfer ke Rekening</option>
                        <option value="cash">Tunai di Kasir</option>
                    </select>
                </div>
                
                <button class="form-button" onclick="sendWithdrawalToWhatsApp()">
                    <i class="fab fa-whatsapp"></i> Kirim ke WhatsApp Admin
                </button>
            </div>
        </div>
    </div>

    <!-- Modal untuk Transfer - TAMPIL LENGKAP DENGAN TOMBOL ESTETIK -->
    <div id="modalTransfer" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Transfer Simpanan</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalTransfer')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <div class="form-group">
                    <label class="form-label">No Rekening/E-wallet Pengirim</label>
                    <input type="text" class="form-input" id="senderAccount" placeholder="Contoh: 1234567890 (BRI)">
                </div>
                
                <div class="form-group">
                    <label class="form-label">No Rekening/E-wallet Tujuan</label>
                    <input type="text" class="form-input" id="receiverAccount" placeholder="Masukkan nomor rekening tujuan">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jenis Transfer</label>
                    <select class="form-input" id="transferType">
                        <option value="bank">Transfer Bank</option>
                        <option value="dana">DANA</option>
                        <option value="gopay">GoPay</option>
                        <option value="other">Bank Lain</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jumlah Transfer (Rp)</label>
                    <input type="number" class="form-input" id="transferAmount" placeholder="Masukkan jumlah transfer" min="10000">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Catatan (Opsional)</label>
                    <textarea class="form-input" id="transferNote" placeholder="Tambahkan catatan jika perlu" rows="2"></textarea>
                </div>
                
                <button class="btn-transfer-premium" onclick="processTransfer()">
                    <i class="fas fa-exchange-alt"></i> PROSES TRANSFER
                </button>
            </div>
        </div>
    </div>

    <!-- Modal untuk Laporan - TAMPIL LENGKAP DENGAN PREVIEW KARTU DAN TOMBOL ESTETIK -->
    <div id="modalReport" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Laporan & Cetak Kartu</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalReport')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <!-- Preview Kartu Anggota -->
                <div class="kartu-preview-container">
                    <div class="kartu-preview-title">
                        <i class="fas fa-id-card"></i> Preview Kartu Anggota
                    </div>
                    <div class="kartu-preview">
                        <div class="kartu-header">
                            <h4>KOPERASI KUD ASMARA TANI</h4>
                        </div>
                        <div class="kartu-photo">
                            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjh1oM43gxD4iCHpHRBrrbkCHRU5MigalAWf4G5x-cTLfRRxWeeTwGqwNz8FtSdSgcexhRAIWMX7eZoOxo0b-i8kB2EUr44TCkMCZ8VVfQTJpL0AgptbY8hjsTZtqg6jbS2MMOuIVf9FvNOR-JsZr4dvrpqTQT0I5qY5OB063z38W0mTIVhQrBPTASmQp0/s1280/1000175639.jpg" alt="Foto Anggota">
                        </div>
                        <div class="kartu-info">
                            <div class="kartu-info-row">
                                <span class="kartu-info-label">NIA</span>
                                <span class="kartu-info-value" id="kartuNIA">#01-2026-001</span>
                            </div>
                            <div class="kartu-info-row">
                                <span class="kartu-info-label">Nama</span>
                                <span class="kartu-info-value" id="kartuNama">Eldi Sugianto, S.Kom</span>
                            </div>
                            <div class="kartu-info-row">
                                <span class="kartu-info-label">Tgl Gabung</span>
                                <span class="kartu-info-value" id="kartuTglGabung">18/09/2020</span>
                            </div>
                            <div class="kartu-info-row">
                                <span class="kartu-info-label">Status</span>
                                <span class="kartu-info-value" style="color: #2E7D32; font-weight: 700;">AKTIF</span>
                            </div>
                        </div>
                        <div class="kartu-footer">
                            <i class="fas fa-qrcode"></i> Scan untuk verifikasi anggota
                        </div>
                    </div>
                </div>

                <div class="report-preview" id="reportPreview">
                    <div class="report-header">
                        <div class="report-title">KOPERASI KUD ASMARA TANI</div>
                        <div class="report-subtitle">Laporan Simpanan Anggota</div>
                        <div class="report-subtitle" id="reportPeriode">Periode: -</div>
                    </div>
                    
                    <div class="report-info">
                        <div class="report-info-row">
                            <span class="report-info-label">Nama Anggota:</span>
                            <span id="reportNama">-</span>
                        </div>
                        <div class="report-info-row">
                            <span class="report-info-label">ID/NIA:</span>
                            <span id="reportNIA">-</span>
                        </div>
                        <div class="report-info-row">
                            <span class="report-info-label">Tanggal Cetak:</span>
                            <span id="reportDate">-</span>
                        </div>
                    </div>
                    
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Jenis Simpanan</th>
                                <th>Saldo (Rp)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Simpanan Pokok</td>
                                <td id="reportPokok">0</td>
                                <td>Aktif</td>
                            </tr>
                            <tr>
                                <td>Simpanan Wajib</td>
                                <td id="reportWajib">0</td>
                                <td id="reportWajibStatus">Menunggu</td>
                            </tr>
                            <tr>
                                <td>Simpanan Sukarela</td>
                                <td id="reportSukarela">0</td>
                                <td>Aktif</td>
                            </tr>
                            <tr style="background-color: #f0f0f0; font-weight: bold;">
                                <td>TOTAL SIMPANAN</td>
                                <td id="reportTotal">0</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="report-info">
                        <div class="report-info-row">
                            <span class="report-info-label">Bunga Simpanan:</span>
                            <span>0.5% per tahun</span>
                        </div>
                        <div class="report-info-row">
                            <span class="report-info-label">Estimasi Bunga Tahunan:</span>
                            <span id="reportBunga">Rp 0</span>
                        </div>
                        <div class="report-info-row">
                            <span class="report-info-label">SHU Estimasi:</span>
                            <span id="reportSHU">Rp 0</span>
                        </div>
                    </div>
                    
                    <div class="report-footer">
                        <div>Koperasi KUD Asmara Tani</div>
                        <div>Jl. Pertanian No. 45, Desa Asmara</div>
                        <div>Telp: (021) 12345678 | Email: info@kud-asmara-tani.co.id</div>
                    </div>
                </div>
                
                <div class="button-group" style="display: flex; gap: 15px; margin-top: 25px; flex-wrap: wrap;">
                    <button class="btn-card-print" onclick="printKartuAnggota()" style="flex: 1;">
                        <i class="fas fa-id-card"></i> Cetak Kartu
                    </button>
                    <button class="btn-pdf-download" onclick="downloadPDF()" style="flex: 1;">
                        <i class="fas fa-file-pdf"></i> Download PDF
                    </button>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <button class="btn-modal btn-modal-secondary" onclick="printReport()" style="flex: 1;">
                        <i class="fas fa-print"></i> Cetak Laporan
                    </button>
                    <button class="btn-modal btn-modal-primary" onclick="closeAkunModal('modalReport')" style="flex: 1;">
                        <i class="fas fa-times"></i> Tutup
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal untuk Detail Simpanan -->
    <div id="modalSavingsDetail" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun" id="savingsDetailTitle">Detail Simpanan</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalSavingsDetail')">&times;</button>
            </div>
            <div class="modal-body-akun" id="savingsDetailContent">
                <!-- Konten akan dimuat secara dinamis -->
            </div>
        </div>
    </div>

    <!-- Modal untuk Profil Detail Lengkap -->
    <div id="modalProfileDetail" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Profil Lengkap Anggota</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalProfileDetail')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <div class="profile-photo-large">
                    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjh1oM43gxD4iCHpHRBrrbkCHRU5MigalAWf4G5x-cTLfRRxWeeTwGqwNz8FtSdSgcexhRAIWMX7eZoOxo0b-i8kB2EUr44TCkMCZ8VVfQTJpL0AgptbY8hjsTZtqg6jbS2MMOuIVf9FvNOR-JsZr4dvrpqTQT0I5qY5OB063z38W0mTIVhQrBPTASmQp0/s1280/1000175639.jpg" alt="Foto Anggota">
                </div>
                
                <div class="profile-detail-grid">
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">ID/NIA</div>
                        <div class="profile-detail-value" id="profileNIA">#01-2026-001</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Posisi</div>
                        <div class="profile-detail-value" id="profilePosisi">Ketua Koperasi</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Nama Lengkap</div>
                        <div class="profile-detail-value" id="profileNama">Eldi Sugianto, S.Kom</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Alamat Lengkap</div>
                        <div class="profile-detail-value" id="profileAlamat">Kp. Banjar Karya Rt. 02 Rw. 01 Desa Ciasmara Kecamatan Pamijahan Kabupaten Bogor Kode POS 16810</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Jenis Kelamin</div>
                        <div class="profile-detail-value" id="profileJK">Laki-laki</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Email</div>
                        <div class="profile-detail-value" id="profileEmail">siliwangi4212@gmail.com</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">WhatsApp</div>
                        <div class="profile-detail-value" id="profileWA">6285218483129</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">NIK</div>
                        <div class="profile-detail-value" id="profileNIK">3201171212810011</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Agama</div>
                        <div class="profile-detail-value" id="profileAgama">Islam</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Status</div>
                        <div class="profile-detail-value" id="profileStatus">AKTIF</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Tanggal Bergabung</div>
                        <div class="profile-detail-value" id="profileTglGabung">2020/09/18</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Simpanan Pokok</div>
                        <div class="profile-detail-value" id="profilePokok">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Simpanan Wajib</div>
                        <div class="profile-detail-value" id="profileWajib">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Simpanan Sukarela</div>
                        <div class="profile-detail-value" id="profileSukarela">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Total Simpanan</div>
                        <div class="profile-detail-value" id="profileTotalSimpanan">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Total Pinjaman</div>
                        <div class="profile-detail-value" id="profileTotalPinjaman">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">SHU Estimasi</div>
                        <div class="profile-detail-value" id="profileSHU">Rp 0</div>
                    </div>
                    <div class="profile-detail-item">
                        <div class="profile-detail-label">Last Updated</div>
                        <div class="profile-detail-value" id="lastUpdatedTime">-</div>
                    </div>
                </div>
                
                <div class="qr-code-container">
                    <div class="qr-code-title">QR Code Hybrid</div>
                    <div class="qr-code-placeholder">
                        QR Code dari generator-qr-code.html
                    </div>
                    <p style="font-size: 11px; color: #666; margin-top: 10px;">QR Code dikirim dari Dashboard Admin</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal untuk Ganti Password -->
    <div id="modalPassword" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Ganti Password</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalPassword')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <div class="form-group">
                    <label class="form-label">Password Saat Ini</label>
                    <input type="password" class="form-input" id="currentPassword" placeholder="Masukkan password saat ini">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password Baru</label>
                    <input type="password" class="form-input" id="newPassword" placeholder="Masukkan password baru">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Konfirmasi Password</label>
                    <input type="password" class="form-input" id="confirmPassword" placeholder="Konfirmasi password baru">
                </div>
                
                <button class="form-button" onclick="changePassword()">
                    <i class="fas fa-save"></i> Simpan Password Baru
                </button>
            </div>
        </div>
    </div>

    <!-- Modal untuk SHU Anggota -->
    <div id="modalSHU" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">SHU (Sisa Hasil Usaha) Anggota</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalSHU')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p>SHU adalah bagian keuntungan koperasi yang dibagikan kepada anggota sesuai dengan partisipasi dan transaksi anggota.</p>
                <p><strong>SHU Tahun 2023:</strong> Rp 0</p>
                <p><strong>SHU Tahun 2024 (Estimasi):</strong> Rp <span id="modalShuAmount">0</span></p>
                <p><strong>Rumus Perhitungan SHU Estimasi:</strong></p>
                <ul>
                    <li>5% dari total simpanan anggota</li>
                    <li>Dibagikan setiap akhir tahun setelah RAT</li>
                    <li>Proporsional dengan partisipasi anggota</li>
                </ul>
                <p><strong>Pembagian SHU:</strong></p>
                <ul>
                    <li>60% untuk anggota sesuai transaksi</li>
                    <li>20% untuk cadangan koperasi</li>
                    <li>10% untuk dana pendidikan</li>
                    <li>10% untuk dana sosial</li>
                </ul>
                <p><strong>Pencairan SHU:</strong> Dilakukan setiap akhir tahun setelah RAT (Rapat Anggota Tahunan)</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk FAQ -->
    <div id="modalFAQ" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">FAQ (Pertanyaan yang Sering Ditanyakan)</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalFAQ')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p><strong>1. Bagaimana cara menabung di koperasi?</strong><br>
                Anggota dapat menabung melalui aplikasi dengan memilih menu Simpanan, atau datang langsung ke kantor koperasi.</p>
                
                <p><strong>2. Apa syarat mengajukan pinjaman?</strong><br>
                Anggota aktif minimal 6 bulan, memiliki simpanan wajib, dan memiliki usaha produktif.</p>
                
                <p><strong>3. Kapan SHU dibagikan?</strong><br>
                SHU dibagikan setelah Rapat Anggota Tahunan (RAT) setiap akhir tahun.</p>
                
                <p><strong>4. Bagaimana cara update data pribadi?</strong><br>
                Datang ke kantor koperasi dengan membawa dokumen yang diperlukan.</p>
                
                <p><strong>5. Apa manfaat menjadi anggota koperasi?</strong><br>
                Mendapatkan akses simpanan, pinjaman, pelatihan, dan bagian SHU setiap tahun.</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk Syarat & Ketentuan -->
    <div id="modalTerms" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Syarat & Ketentuan</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalTerms')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p><strong>1. Keanggotaan</strong><br>
                Anggota harus warga desa setempat, berusia minimal 17 tahun, dan menyetujui AD/ART koperasi.</p>
                
                <p><strong>2. Simpanan</strong><br>
                Setiap anggota wajib memiliki simpanan pokok dan simpanan wajib sesuai ketentuan.</p>
                
                <p><strong>3. Pinjaman</strong><br>
                Pinjaman hanya untuk keperluan produktif, dengan jaminan yang disepakati.</p>
                
                <p><strong>4. SHU</strong><br>
                Pembagian SHU dilakukan sesuai keputusan RAT dan proporsional dengan partisipasi anggota.</p>
                
                <p><strong>5. Kewajiban Anggota</strong><br>
                Menjaga nama baik koperasi, mematuhi AD/ART, dan aktif dalam kegiatan koperasi.</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk Tentang Aplikasi -->
    <div id="modalAbout" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Tentang Aplikasi</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalAbout')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p><strong>Aplikasi Koperasi KUD Asmara Tani</strong> adalah platform digital untuk memudahkan anggota dalam mengakses layanan koperasi.</p>
                
                <p><strong>Fitur Utama:</strong></p>
                <ul>
                    <li>Tabungan digital</li>
                    <li>Pengajuan pinjaman online</li>
                    <li>Monitoring SHU</li>
                    <li>Transaksi di KUD Toko</li>
                    <li>Informasi kegiatan koperasi</li>
                </ul>
                
                <p><strong>Versi:</strong> 1.0.2</p>
                <p><strong>Pengembang:</strong> TeslaSmart Digital Teknologi</p>
                <p><strong>Dukungan Teknis:</strong> support@teslasmart.co.id</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk Kebijakan Privasi -->
    <div id="modalPrivacy" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Kebijakan Privasi</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalPrivacy')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p><strong>1. Data yang Dikumpulkan</strong><br>
                Kami mengumpulkan data pribadi, data transaksi, dan data penggunaan aplikasi untuk layanan yang lebih baik.</p>
                
                <p><strong>2. Penggunaan Data</strong><br>
                Data digunakan untuk keperluan layanan koperasi, verifikasi anggota, dan pelaporan yang diperlukan.</p>
                
                <p><strong>3. Perlindungan Data</strong><br>
                Data anggota dilindungi dengan enkripsi dan keamanan berlapis sesuai standar industri.</p>
                
                <p><strong>4. Berbagi Data</strong><br>
                Data tidak dibagikan kepada pihak ketiga tanpa izin anggota, kecuali untuk kepatuhan hukum.</p>
                
                <p><strong>5. Hak Anggota</strong><br>
                Anggota berhak mengakses, memperbaiki, dan menghapus data pribadi sesuai ketentuan.</p>
            </div>
        </div>
    </div>

    <!-- Modal untuk Keamanan -->
    <div id="modalSecurity" class="modal-akun">
        <div class="modal-content-akun">
            <div class="modal-header-akun">
                <div class="modal-title-akun">Keamanan Akun</div>
                <button class="close-btn-akun" onclick="closeAkunModal('modalSecurity')">&times;</button>
            </div>
            <div class="modal-body-akun">
                <p><strong>Tips Keamanan Akun:</strong></p>
                <ul>
                    <li>Gunakan kata sandi yang kuat (huruf, angka, simbol)</li>
                    <li>Jangan bagikan kata sandi kepada siapapun</li>
                    <li>Selalu logout setelah menggunakan aplikasi</li>
                    <li>Perbarui kata sandi secara berkala</li>
                    <li>Aktifkan verifikasi dua faktor jika tersedia</li>
                </ul>
                
                <p><strong>Ubah Kata Sandi:</strong><br>
                Untuk mengubah kata sandi, kunjungi kantor koperasi dengan membawa KTP asli.</p>
                
                <p><strong>Laporan Masalah:</strong><br>
                Jika menemukan aktivitas mencurigakan, segera hubungi admin koperasi.</p>
            </div>
        </div>
    </div>

    <!-- Modal Pengajuan Pinjaman -->
    <div class="modal" id="modalPengajuan">
        <div class="modal-content">
            <div class="modal-header">
                <span>Pengajuan Pinjaman</span>
                <button class="modal-close" onclick="closeLoanModal('modalPengajuan')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Informasi Simpanan Anggota -->
                <div class="info-simpanan">
                    <div class="simpanan-title">
                        <i class="fas fa-coins"></i> Informasi Simpanan Anda
                    </div>
                    <div class="simpanan-detail">
                        <span>Simpanan Pokok</span>
                        <span id="simpananPokokInfo">Rp 0</span>
                    </div>
                    <div class="simpanan-detail">
                        <span>Simpanan Wajib</span>
                        <span id="simpananWajibInfo">Rp 0</span>
                    </div>
                    <div class="simpanan-detail">
                        <span>Simpanan Sukarela</span>
                        <span id="simpananSukarelaInfo">Rp 0</span>
                    </div>
                    <div class="simpanan-detail total">
                        <span>Total Simpanan</span>
                        <span id="totalSimpananInfo">Rp 0</span>
                    </div>
                    <div class="simpanan-detail">
                        <span>Limit Pinjaman (40%)</span>
                        <span id="limitPinjamanInfo" style="color:#2c5f2d; font-weight:700;">Rp 0</span>
                    </div>
                </div>
                
                <div class="modal-section-title">
                    <i class="fas fa-tasks"></i> Keperluan Pinjaman
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jenis Pinjaman</label>
                    <div class="select-wrapper">
                        <select class="form-select" id="jenisPinjaman" required>
                            <option value="">Pilih Jenis Pinjaman</option>
                            <option value="berjangka">Pinjaman Berjangka</option>
                            <option value="mikro">Pinjaman Mikro</option>
                            <option value="konsumtif">Pinjaman Konsumtif</option>
                            <option value="investasi">Pinjaman Investasi</option>
                        </select>
                    </div>
                    <div class="error-message" id="errorJenisPinjaman">Harap pilih jenis pinjaman</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Peruntukan Pinjaman</label>
                    <div class="select-wrapper">
                        <select class="form-select" id="peruntukanPinjaman" required>
                            <option value="">Pilih Peruntukan Pinjaman</option>
                            <option value="pernikahan">Pernikahan</option>
                            <option value="pendidikan">Pendidikan</option>
                            <option value="kesehatan">Kesehatan</option>
                            <option value="usaha">Modal Usaha</option>
                            <option value="rumah">Renovasi Rumah</option>
                        </select>
                    </div>
                    <div class="error-message" id="errorPeruntukanPinjaman">Harap pilih peruntukan pinjaman</div>
                </div>
                
                <div class="divider"></div>
                
                <div class="modal-section-title">
                    <i class="fas fa-money-bill-wave"></i> Nominal Pinjaman
                </div>
                
                <div class="form-group">
                    <label class="form-label">Nominal Pinjaman</label>
                    <div class="select-wrapper">
                        <select class="form-select" id="nominalPinjaman" required>
                            <option value="">Pilih Nominal Pinjaman</option>
                            <option value="500000">Rp 500.000</option>
                            <option value="1000000">Rp 1.000.000</option>
                            <option value="3000000">Rp 3.000.000</option>
                            <option value="5000000">Rp 5.000.000</option>
                            <option value="10000000">Rp 10.000.000</option>
                        </select>
                    </div>
                    <div class="nominal-info">
                        <div class="nominal-label">Limit Tersedia</div>
                        <div class="nominal-amount" id="limitTersediaModal">Rp 0</div>
                    </div>
                    <div class="error-message" id="errorNominalPinjaman">Harap pilih nominal pinjaman</div>
                    <div class="warning-message" id="warningTotalSimpanan">
                        <i class="fas fa-exclamation-triangle"></i>
                        Total simpanan Anda tidak mencukupi untuk pengajuan pinjaman minimum Rp 500.000
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <div class="modal-section-title">
                    <i class="fas fa-calendar-alt"></i> Tenor
                </div>
                
                <div class="form-group">
                    <label class="form-label">Skema Pinjaman</label>
                    <div class="skema-options">
                        <div class="skema-option" data-skema="harian">
                            <i class="fas fa-calendar-day"></i>
                            Harian
                        </div>
                        <div class="skema-option active" data-skema="bulanan">
                            <i class="fas fa-calendar-alt"></i>
                            Bulanan
                        </div>
                        <div class="skema-option" data-skema="tahunan">
                            <i class="fas fa-calendar-week"></i>
                            Tahunan
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Jangka Waktu Pinjaman</label>
                    <div class="select-wrapper">
                        <select class="form-select" id="jangkaWaktu" required>
                            <option value="7">7 Hari</option>
                            <option value="14">14 Hari</option>
                            <option value="30">30 Hari</option>
                            <option value="60">60 Hari</option>
                            <option value="90">90 Hari</option>
                        </select>
                    </div>
                    <div class="error-message" id="errorJangkaWaktu">Harap pilih jangka waktu</div>
                </div>
                
                <div class="form-group">
                    <div class="tanggal-info">
                        <div class="nominal-label">Tanggal Jatuh Tempo</div>
                        <div class="nominal-amount" id="tanggalJatuhTempo">-</div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-modal btn-modal-secondary" onclick="closeLoanModal('modalPengajuan')">Batal</button>
                    <button class="btn-modal btn-modal-primary" id="btnLanjutSimulasi" onclick="lanjutKeSimulasi()">Lanjutkan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Simulasi Pembayaran -->
    <div class="modal" id="modalSimulasi">
        <div class="modal-content">
            <div class="modal-header">
                <span>Simulasi Pembayaran</span>
                <button class="modal-close" onclick="closeLoanModal('modalSimulasi')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="simulasi-section">
                    <div class="simulasi-detail">
                        <span class="simulasi-detail-label">Skema Pinjaman</span>
                        <span class="simulasi-detail-value" id="simulasiSkemaPinjaman">-</span>
                    </div>
                    <div class="simulasi-detail">
                        <span class="simulasi-detail-label">Pinjaman yang Diajukan</span>
                        <span class="simulasi-detail-value" id="simulasiPinjamanDiajukan">0</span>
                    </div>
                    <div class="simulasi-detail">
                        <span class="simulasi-detail-label">Jangka Waktu Pinjaman</span>
                        <span class="simulasi-detail-value" id="simulasiJangkaWaktu">-</span>
                    </div>
                    <div class="simulasi-detail">
                        <span class="simulasi-detail-label">Tanggal Cicilan</span>
                        <span class="simulasi-detail-value" id="simulasiTanggalCicilan">Tanggal 10 Setiap Bulan</span>
                    </div>
                </div>
                
                <div class="simulasi-jumlah">
                    <div class="simulasi-jumlah-label">Jumlah yang Harus Dibayarkan</div>
                    <div class="simulasi-jumlah-nominal" id="simulasiJumlahDibayarkan">Rp 0</div>
                </div>
                
                <div class="modal-section-title">Ringkasan</div>
                
                <div class="ringkasan-item">
                    <span>Pinjaman yang Diajukan</span>
                    <span id="ringkasanPinjamanDiajukan">0</span>
                </div>
                <div class="ringkasan-item">
                    <span>Jasa Pinjaman</span>
                    <span id="ringkasanJasaPinjaman">-Rp 0</span>
                </div>
                <div class="ringkasan-item">
                    <span>Provisi Kredit</span>
                    <span id="ringkasanProvisiKredit">-Rp 0</span>
                </div>
                <div class="ringkasan-item">
                    <span>Total Biaya Lain</span>
                    <span id="ringkasanBiayaLain">-Rp 0</span>
                </div>
                <div class="ringkasan-item total">
                    <span>Total Dana Yang Diterima</span>
                    <span id="ringkasanTotalDiterima">Rp 0</span>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-modal btn-modal-secondary" onclick="kembaliKePengajuan()">Kembali</button>
                    <button class="btn-modal btn-modal-primary" id="btnAjukanPinjaman" onclick="ajukanPinjaman()">Ajukan Pinjaman</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Menunggu Persetujuan -->
    <div class="modal" id="modalMenunggu">
        <div class="modal-content">
            <div class="modal-header">
                <span>Pengajuan Pinjaman</span>
                <button class="modal-close" onclick="closeLoanModal('modalMenunggu')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="menunggu-header">
                    <div class="menunggu-icon">
                        â³
                    </div>
                    <div class="menunggu-title">Pengajuan Pinjaman</div>
                    <div class="menunggu-subtitle">Menunggu Persetujuan</div>
                </div>
                
                <div class="info-card">
                    <div class="info-card-title">
                        <i class="fas fa-users"></i> Informasi Anggota
                    </div>
                    
                    <div class="info-divider"></div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Koperasi</span>
                        <span class="info-item-value">Koperasi KUD Asmara Tani</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Unit</span>
                        <span class="info-item-value">Desa Ciasmara</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Nomor Induk Anggota</span>
                        <span class="info-item-value" id="menungguNIA">#01-2026-001</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Nama</span>
                        <span class="info-item-value" id="menungguNama">Eldi Sugianto, S.Kom</span>
                    </div>
                </div>
                
                <div class="info-card">
                    <div class="info-card-title">
                        <i class="fas fa-file-invoice"></i> Detail Pinjaman
                    </div>
                    
                    <div class="info-divider"></div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Pinjaman Yang Diajukan</span>
                        <span class="info-item-value amount" id="menungguPinjamanDiajukan">Rp 0</span>
                    </div>
                    
                    <div class="info-divider"></div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Skema Pinjaman</span>
                        <span class="info-item-value" id="menungguSkemaPinjaman">-</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Jangka Waktu Pinjaman</span>
                        <span class="info-item-value" id="menungguJangkaWaktu">-</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Tanggal Cicilan</span>
                        <span class="info-item-value" id="menungguTanggalCicilan">Tanggal 10 Setiap Bulan</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Jumlah Yang Harus Dibayarkan</span>
                        <span class="info-item-value amount" id="menungguJumlahDibayarkan">Rp 0</span>
                    </div>
                    
                    <div class="info-divider"></div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Jasa Pinjaman</span>
                        <span class="info-item-value negative" id="menungguJasaPinjaman">Rp 0</span>
                    </div>
                    <div class="info-note">10% dari Pinjaman Yang Diajukan</div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Provisi Kredit</span>
                        <span class="info-item-value negative" id="menungguProvisiKredit">Rp 0</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Total Biaya Lain</span>
                        <span class="info-item-value negative" id="menungguBiayaLain">Rp 0</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="info-item-label">Total Dana Yang Diterima</span>
                        <span class="info-item-value amount" id="menungguTotalDiterima">Rp 0</span>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-modal btn-modal-secondary" onclick="closeLoanModal('modalMenunggu')">Kembali</button>
                    <button class="btn-modal btn-modal-whatsapp" onclick="sendWhatsApp('persetujuan')">Proses Persetujuan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Modal Pinjaman Berjalan - DIPERBAIKI DENGAN GRID -->
    <div class="premium-modal" id="premiumModalBerjalan">
        <div class="premium-header">
            <div class="back-btn" onclick="closePremiumModal()">â†</div>
            <div class="premium-header-title">Rincian Pinjaman</div>
        </div>

        <div class="top-section">
            <div class="subtitle" id="berjalanSubtitle">Pinjaman Berjangka untuk Pernikahan</div>
            <div class="premium-icon">â³</div>
            <div class="badge">Pinjaman Berjalan</div>

            <div class="premium-label">Nominal Pinjaman</div>
            <div class="premium-nominal" id="berjalanNominal">Rp 0</div>

            <div class="premium-label">Dana Yang Diterima</div>
            <div class="premium-nominal" id="berjalanDanaDiterima">Rp 0</div>
        </div>

        <div class="card-wrapper">
            <!-- CARD CONTAINER GRID - POSISI KIRI KANAN -->
            <div class="card-container">
                <div class="card">
                    <p>Jangka Waktu</p>
                    <h3 id="berjalanJangkaWaktu">10 Hari</h3>
                </div>
                <div class="card">
                    <p>Jatuh Tempo</p>
                    <h3 id="berjalanJatuhTempo">20 Setiap Bulan</h3>
                </div>
            </div>

            <div class="detail-button" onclick="toggleDetail('detailBoxBerjalan')">
                <span>Detail Pinjaman</span>
                <i class="fas fa-chevron-down" id="arrowBerjalan"></i>
            </div>

            <div class="detail-content" id="detailBoxBerjalan">
                <div class="detail-row bold">
                    <span>Pinjaman yang Diajukan</span>
                    <span id="detailBerjalanDiajukan">0</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Disetujui</span>
                    <span id="detailBerjalanTglDisetujui">-</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Perkiraan Lunas</span>
                    <span id="detailBerjalanTglLunas">-</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Skema Pinjaman</span>
                    <span id="detailBerjalanSkema">Bulanan</span>
                </div>
                <div class="detail-row">
                    <span>Jangka Waktu Pinjaman</span>
                    <span id="detailBerjalanJangka">3 Bulan</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Cicilan</span>
                    <span id="detailBerjalanTanggalCicilan">Tanggal 10 Setiap Bulan</span>
                </div>
                <div class="detail-row bold">
                    <span>Jumlah yang Harus Dibayarkan</span>
                    <span id="detailBerjalanJumlahBayar">Rp 0</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Jasa Pinjaman</span>
                    <span id="detailBerjalanJasa">-Rp 0</span>
                </div>
                <div class="sub-note">10% dari Pinjaman yang Diajukan</div>
                <div class="detail-row">
                    <span>Provisi Kredit</span>
                    <span id="detailBerjalanProvisi">-Rp 0</span>
                </div>
                <div class="detail-row">
                    <span>Total Biaya Lain</span>
                    <span id="detailBerjalanBiayaLain">-Rp 0</span>
                </div>
                <div class="detail-row bold">
                    <span>Total Dana Yang Diterima</span>
                    <span id="detailBerjalanTotalDiterima">Rp 0</span>
                </div>
            </div>

            <div class="premium-section-title">
                <i class="fas fa-check-circle"></i> Angsuran Terbayarkan
            </div>

            <div class="timeline" id="angsuranTerbayarkanList">
                <!-- Dinamis dari JavaScript -->
            </div>

            <div class="premium-section-title">
                <i class="fas fa-clock"></i> Angsuran Yang Akan Datang
            </div>

            <div class="timeline yellow" id="angsuranAkanDatangList">
                <!-- Dinamis dari JavaScript -->
            </div>

            <div class="footer-space"></div>

            <div class="modal-actions" style="margin: 30px 20px 0;">
                <button class="btn-modal btn-modal-secondary" onclick="closePremiumModal()">Kembali</button>
                <button class="btn-modal btn-modal-whatsapp" onclick="sendWhatsApp('bayar')">Bayar Angsuran</button>
            </div>
        </div>
    </div>

    <!-- Premium Modal Ditolak - DIPERBAIKI DENGAN GRID -->
    <div class="premium-modal" id="premiumModalDitolak">
        <div class="premium-header">
            <div class="back-btn" onclick="closePremiumModal()">â†</div>
            <div class="premium-header-title">Rincian Pinjaman</div>
        </div>

        <div class="top-section">
            <div class="subtitle" id="ditolakSubtitle">Pinjaman Berjangka untuk Pernikahan</div>
            <div class="premium-icon">âŒ</div>
            <div class="badge" style="background: rgba(231, 76, 60, 0.25);">Ditolak</div>

            <div class="premium-label">Nominal Pinjaman</div>
            <div class="premium-nominal" id="ditolakNominal">Rp 0</div>

            <div class="premium-label">Dana Yang Ditolak</div>
            <div class="premium-nominal" id="ditolakDana">Rp 0</div>
        </div>

        <div class="card-wrapper">
            <!-- CARD CONTAINER GRID - POSISI KIRI KANAN -->
            <div class="card-container">
                <div class="card">
                    <p>Jangka Waktu</p>
                    <h3 id="ditolakJangkaWaktu">2 Bulan</h3>
                </div>
                <div class="card">
                    <p>Jatuh Tempo</p>
                    <h3 id="ditolakJatuhTempo">20 Maret 2025</h3>
                </div>
            </div>

            <div class="detail-button" onclick="toggleDetail('detailBoxDitolak')">
                <span>Detail Penolakan</span>
                <i class="fas fa-chevron-down" id="arrowDitolak"></i>
            </div>

            <div class="detail-content" id="detailBoxDitolak">
                <div class="detail-row bold">
                    <span>Pinjaman yang Diajukan</span>
                    <span id="detailDitolakDiajukan">0</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Pengajuan</span>
                    <span id="detailDitolakTglPengajuan">-</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Penolakan</span>
                    <span id="detailDitolakTglPenolakan">-</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Skema Pinjaman</span>
                    <span id="detailDitolakSkema">Bulanan</span>
                </div>
                <div class="detail-row">
                    <span>Jangka Waktu Pinjaman</span>
                    <span id="detailDitolakJangka">2 Bulan</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Cicilan</span>
                    <span id="detailDitolakTanggalCicilan">Tanggal 20 Setiap Bulan</span>
                </div>
                <div class="detail-row bold">
                    <span>Jumlah yang Harus Dibayarkan</span>
                    <span id="detailDitolakJumlahBayar">Rp 0</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Jasa Pinjaman</span>
                    <span id="detailDitolakJasa">-Rp 0</span>
                </div>
                <div class="sub-note">10% dari Pinjaman yang Diajukan</div>
                <div class="detail-row">
                    <span>Provisi Kredit</span>
                    <span id="detailDitolakProvisi">-Rp 0</span>
                </div>
                <div class="detail-row">
                    <span>Total Biaya Lain</span>
                    <span id="detailDitolakBiayaLain">-Rp 0</span>
                </div>
                <div class="detail-row bold">
                    <span>Total Dana Yang Diterima</span>
                    <span id="detailDitolakTotalDiterima">Rp 0</span>
                </div>
            </div>

            <div class="info-card" style="margin: 20px; background: linear-gradient(145deg, #fff5f5, #ffe6e6); border-color: #dc3545;">
                <div class="info-card-title" style="color: #dc3545;">
                    <i class="fas fa-exclamation-triangle"></i> Ingkar Janji
                </div>
                <div class="info-item">
                    <span class="info-item-label">Total Keterlambatan</span>
                    <span class="info-item-value" style="color: #dc3545; font-weight: 700;" id="ditolakTotalKeterlambatan">3 Kali</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Total Denda</span>
                    <span class="info-item-value" style="color: #dc3545; font-weight: 700;" id="ditolakTotalDenda">Rp 150.000</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Hari Keterlambatan</span>
                    <span class="info-item-value" style="color: #dc3545; font-weight: 700;" id="ditolakHariKeterlambatan">15 Hari</span>
                </div>
                <div class="info-note" style="border-left-color: #dc3545; color: #dc3545;" id="ditolakCatatan">
                    Jadwal pembayaran selalu melar dan tidak ditepati
                </div>
            </div>

            <div class="premium-section-title">
                <i class="fas fa-times-circle"></i> Alasan Penolakan
            </div>

            <div class="timeline red" id="alasanPenolakanList">
                <div class="timeline-item">
                    <div class="icon red-icon">!</div>
                    <div class="timeline-box">
                        <h3>Dokumen Pendukung</h3>
                        <h2>Tidak Lengkap</h2>
                        <p>KTP, NPWP, dan slip gaji belum dilengkapi</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon red-icon">!</div>
                    <div class="timeline-box">
                        <h3>Riwayat Pembayaran</h3>
                        <h2>Buruk</h2>
                        <p>3 kali keterlambatan dengan total denda Rp 150.000</p>
                    </div>
                </div>
            </div>

            <div class="premium-section-title">
                <i class="fas fa-lightbulb"></i> Saran Perbaikan
            </div>

            <div class="timeline yellow" id="saranPerbaikanList">
                <div class="timeline-item">
                    <div class="icon yellow-icon">ðŸ’¡</div>
                    <div class="timeline-box">
                        <h3>Lengkapi Dokumen</h3>
                        <h2>KTP, NPWP, Slip Gaji</h2>
                        <p>Pastikan semua dokumen terbaru dan valid</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon yellow-icon">ðŸ’¡</div>
                    <div class="timeline-box">
                        <h3>Perbaiki Riwayat</h3>
                        <h2>Bayar Tepat Waktu</h2>
                        <p>Lunasi denda dan jaga komitmen pembayaran</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon yellow-icon">ðŸ’¡</div>
                    <div class="timeline-box">
                        <h3>Ajukan Ulang</h3>
                        <h2>Setelah Dilengkapi</h2>
                        <p>Ajukan ulang pinjaman setelah dokumen lengkap</p>
                    </div>
                </div>
            </div>

            <div class="modal-actions" style="margin: 30px 20px 0;">
                <button class="btn-modal btn-modal-secondary" onclick="closePremiumModal()">Kembali</button>
                <button class="btn-modal btn-modal-whatsapp" onclick="sendWhatsApp('ajukanulang')">Ajukan Ulang</button>
            </div>
        </div>
    </div>

    <!-- Premium Modal Lunas - DIPERBAIKI DENGAN GRID -->
    <div class="premium-modal" id="premiumModalLunas">
        <div class="premium-header">
            <div class="back-btn" onclick="closePremiumModal()">â†</div>
            <div class="premium-header-title">Rincian Pinjaman</div>
        </div>

        <div class="top-section">
            <div class="subtitle" id="lunasSubtitle">Pinjaman Berjangka untuk Pernikahan</div>
            <div class="premium-icon">ðŸŽ‰</div>
            <div class="badge" style="background: rgba(46, 204, 113, 0.25);">Lunas</div>

            <div class="premium-label">Nominal Pinjaman</div>
            <div class="premium-nominal" id="lunasNominal">Rp 0</div>

            <div class="premium-label">Total Dibayarkan</div>
            <div class="premium-nominal" id="lunasTotalDibayarkan">Rp 0</div>
        </div>

        <div class="card-wrapper">
            <!-- CARD CONTAINER GRID - POSISI KIRI KANAN -->
            <div class="card-container">
                <div class="card">
                    <p>Jangka Waktu</p>
                    <h3 id="lunasJangkaWaktu">20 Hari</h3>
                </div>
                <div class="card">
                    <p>Jatuh Tempo</p>
                    <h3 id="lunasJatuhTempo">9 Februari 2025</h3>
                </div>
            </div>

            <div class="detail-button" onclick="toggleDetail('detailBoxLunas')">
                <span>Detail Pelunasan</span>
                <i class="fas fa-chevron-down" id="arrowLunas"></i>
            </div>

            <div class="detail-content" id="detailBoxLunas">
                <div class="detail-row bold">
                    <span>Pinjaman yang Diajukan</span>
                    <span id="detailLunasDiajukan">0</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Pencairan</span>
                    <span id="detailLunasTglPencairan">-</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Pelunasan</span>
                    <span id="detailLunasTglPelunasan">-</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Skema Pinjaman</span>
                    <span id="detailLunasSkema">Harian</span>
                </div>
                <div class="detail-row">
                    <span>Jangka Waktu Pinjaman</span>
                    <span id="detailLunasJangka">20 Hari</span>
                </div>
                <div class="detail-row">
                    <span>Tanggal Cicilan</span>
                    <span id="detailLunasTanggalCicilan">Setiap Hari</span>
                </div>
                <div class="detail-row bold">
                    <span>Jumlah yang Harus Dibayarkan</span>
                    <span id="detailLunasJumlahBayar">Rp 0</span>
                </div>
                <div class="premium-hr"></div>
                <div class="detail-row">
                    <span>Jasa Pinjaman</span>
                    <span id="detailLunasJasa">-Rp 0</span>
                </div>
                <div class="sub-note" id="detailLunasCatatanJasa">0.83% dari Pinjaman yang Diajukan</div>
                <div class="detail-row">
                    <span>Provisi Kredit</span>
                    <span id="detailLunasProvisi">-Rp 0</span>
                </div>
                <div class="detail-row">
                    <span>Total Biaya Lain</span>
                    <span id="detailLunasBiayaLain">-Rp 0</span>
                </div>
                <div class="detail-row bold">
                    <span>Total Dana Yang Diterima</span>
                    <span id="detailLunasTotalDiterima">Rp 0</span>
                </div>
            </div>

            <div class="premium-section-title">
                <i class="fas fa-check-circle"></i> Riwayat Pelunasan
            </div>

            <div class="timeline" id="riwayatPelunasanList">
                <div class="timeline-item">
                    <div class="icon green">âœ“</div>
                    <div class="timeline-box">
                        <h3>Total Yang Dibayar</h3>
                        <h2 id="riwayatTotalDibayar">Rp 0</h2>
                        <p id="riwayatTanggalLunas">Lunas pada -</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon green">âœ“</div>
                    <div class="timeline-box">
                        <h3>Pinjaman Pokok</h3>
                        <h2 id="riwayatPokok">Rp 0</h2>
                        <p>Pelunasan pokok pinjaman</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon green">âœ“</div>
                    <div class="timeline-box">
                        <h3>Bunga Pinjaman</h3>
                        <h2 id="riwayatBunga">Rp 0</h2>
                        <p id="riwayatPeriodeBunga">Bunga periode pinjaman</p>
                    </div>
                </div>
            </div>

            <div class="premium-section-title">
                <i class="fas fa-print"></i> Cetak & Unduh
            </div>

            <div class="timeline yellow">
                <div class="timeline-item">
                    <div class="icon yellow-icon">âœ…</div>
                    <div class="timeline-box">
                        <h3>Status Pinjaman</h3>
                        <h2>LUNAS</h2>
                        <p>Pinjaman telah dilunasi secara lengkap</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon yellow-icon">ðŸ“„</div>
                    <div class="timeline-box">
                        <h3>Bukti Pelunasan</h3>
                        <h2>Tersedia</h2>
                        <p>Unduh bukti pelunasan sebagai arsip</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="icon yellow-icon">ðŸ”“</div>
                    <div class="timeline-box">
                        <h3>Limit Pinjaman</h3>
                        <h2>Tersedia Kembali</h2>
                        <p>Anda dapat mengajukan pinjaman baru</p>
                    </div>
                </div>
            </div>

            <div class="modal-actions" style="margin: 30px 20px 0; flex-direction: column; gap: 12px;">
                <div style="display: flex; gap: 12px; width: 100%;">
                    <button class="btn-modal btn-modal-print" style="flex: 2;" onclick="printCertificate()">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                    <button class="btn-modal btn-modal-print" style="flex: 2;" onclick="printCertificate()">
                        <i class="fas fa-print"></i> Cetak
                    </button>
                </div>
                <button class="btn-modal btn-modal-secondary" style="width: 100%;" onclick="closePremiumModal()">
                    Kembali
                </button>
            </div>
        </div>
    </div>

    <script>
        // ================ SISTEM DATABASE TERINTEGRASI ================
        // 1. LocalStorage untuk penyimpanan lokal
        // 2. Google Sheets untuk database cloud (Spreadsheet)
        
        const CONFIG = {
            // Ganti dengan URL Web App Google Apps Script Anda
            // Format: https://script.google.com/macros/s/.../exec
            GOOGLE_SHEETS_WEBAPP_URL: 'https://script.google.com/macros/s/AKfycbzJX7XQq9LQq9LQq9LQq9LQq9LQq9LQq9L/exec', // GANTI INI!
            
            SPREADSHEET_ID: '1q9LQq9LQq9LQq9LQq9LQq9LQq9LQq9LQq9L', // GANTI INI!
            
            MEMBER_ID: '#01-2026-001',
            MEMBER_NAME: 'Eldi Sugianto, S.Kom',
            MEMBER_EMAIL: 'siliwangi4212@gmail.com',
            MEMBER_PHONE: '6285218483129',
            MEMBER_ADDRESS: 'Kp. Banjar Karya Rt. 02 Rw. 01 Desa Ciasmara Kecamatan Pamijahan Kabupaten Bogor Kode POS 16810'
        };

        // ================ DATA ANGGOTA (SINGLE SOURCE OF TRUTH) ================
        let memberData = {
            // Data Profil
            id: CONFIG.MEMBER_ID,
            nama: CONFIG.MEMBER_NAME,
            email: CONFIG.MEMBER_EMAIL,
            wa: CONFIG.MEMBER_PHONE,
            alamat: CONFIG.MEMBER_ADDRESS,
            
            // Data Keuangan
            pokok: 200000,
            wajib: 0,
            sukarela: 200000,
            
            // Data Pinjaman
            loanActive: 10000000,
            loanActiveCount: 1,
            loanRejected: 1000000,
            loanRejectedCount: 1,
            loanPaid: 6000000,
            loanPaidCount: 1,
            loanPending: 0,
            
            // Data KUD Toko
            ksuShopping: 0,
            ksuDebt: 0,
            
            // Persentase
            shuPercentage: 0.05,
            loanLimitPercentage: 0.4
        };

        // Data Transaksi
        let transactions = [
            {
                id: 1,
                type: 'deposit',
                category: 'pokok',
                amount: 200000,
                date: '2020-09-18T10:30:00',
                description: 'Setoran Awal Simpanan Pokok'
            },
            {
                id: 2,
                type: 'deposit',
                category: 'sukarela',
                amount: 200000,
                date: '2020-09-20T14:15:00',
                description: 'Setoran Simpanan Sukarela'
            },
            {
                id: 3,
                type: 'opening',
                category: 'rekening',
                amount: 0,
                date: '2020-09-18T09:00:00',
                description: 'Pembukaan Rekening'
            }
        ];

        // Data Pinjaman
        let loanData = {
            berjalan: {
                id: 'LN-2025-001',
                nominal: 10000000,
                danaDiterima: 9000000,
                jenis: 'berjangka',
                peruntukan: 'pernikahan',
                skema: 'bulanan',
                jangkaWaktu: 3,
                jangkaWaktuText: '3 Bulan',
                jatuhTempo: '20 Setiap Bulan',
                tanggalDisetujui: '2025-01-25',
                tanggalPerkiraanLunas: '2025-04-25',
                tanggalCicilan: 'Tanggal 10 Setiap Bulan',
                jumlahBayarPerPeriode: 3333333,
                jasaPinjaman: 1000000,
                totalDiterima: 9000000,
                angsuranTerbayarkan: [
                    {
                        periode: 1,
                        total: 100000,
                        pokok: 100000,
                        biayaLain: 100,
                        tanggal: '2025-03-10T14:00:00'
                    },
                    {
                        periode: 2,
                        total: 100000,
                        pokok: 100000,
                        biayaLain: 100,
                        tanggal: '2025-02-10T14:00:00'
                    }
                ],
                angsuranAkanDatang: [
                    {
                        periode: 3,
                        total: 100000,
                        pokok: 100000,
                        biayaLain: 100,
                        tanggal: '2025-04-10T14:00:00'
                    },
                    {
                        periode: 4,
                        total: 100000,
                        pokok: 100000,
                        biayaLain: 100,
                        tanggal: '2025-05-10T14:00:00'
                    }
                ]
            },
            ditolak: {
                id: 'LN-2025-002',
                nominal: 1000000,
                danaDitolak: 900000,
                jenis: 'berjangka',
                peruntukan: 'pernikahan',
                skema: 'bulanan',
                jangkaWaktu: 2,
                jangkaWaktuText: '2 Bulan',
                jatuhTempo: '20 Maret 2025',
                tanggalPengajuan: '2025-01-20',
                tanggalPenolakan: '2025-01-22',
                tanggalCicilan: 'Tanggal 20 Setiap Bulan',
                jumlahBayarPerPeriode: 500000,
                jasaPinjaman: 100000,
                totalDiterima: 900000,
                ingkarJanji: {
                    totalKeterlambatan: 3,
                    totalDenda: 150000,
                    hariKeterlambatan: 15,
                    catatan: 'Jadwal pembayaran selalu melar dan tidak ditepati'
                },
                alasanPenolakan: [
                    'Dokumen Pendukung Tidak Lengkap - KTP, NPWP, dan slip gaji belum dilengkapi',
                    'Riwayat Pembayaran Buruk - 3 kali keterlambatan dengan total denda Rp 150.000'
                ]
            },
            lunas: {
                id: 'LN-2025-003',
                nominal: 6000000,
                totalDibayarkan: 6050000,
                jenis: 'berjangka',
                peruntukan: 'pernikahan',
                skema: 'harian',
                jangkaWaktu: 20,
                jangkaWaktuText: '20 Hari',
                jatuhTempo: '9 Februari 2025',
                tanggalPencairan: '2025-01-20',
                tanggalPelunasan: '2025-02-09',
                tanggalCicilan: 'Setiap Hari',
                jumlahBayarPerPeriode: 300000,
                jasaPinjaman: 50000,
                persentaseJasa: 0.83,
                totalDiterima: 5950000,
                riwayatPelunasan: {
                    totalDibayar: 6050000,
                    pokok: 6000000,
                    bunga: 50000,
                    tanggal: '2025-02-09T14:20:00'
                }
            }
        };

        // Data untuk pengajuan pinjaman
        let pengajuanPinjaman = {
            jenis: "",
            peruntukan: "",
            nominal: 0,
            skema: "bulanan",
            jangkaWaktu: 3,
            jumlahDibayarkan: 0,
            jasaPinjaman: 0,
            provisiKredit: 0,
            biayaLain: 0,
            totalDiterima: 0
        };

        // Minimum pinjaman
        const MINIMUM_PINJAMAN = 500000;
        const WA_ADMIN = "6285218483129";

        // State untuk toggle mata
        let isAmountVisible = true;
        let isAmountVisibleSavings = true;

        // ================ SISTEM LOCALSTORAGE ================
        function saveToLocalStorage() {
            try {
                const data = {
                    memberData: memberData,
                    transactions: transactions,
                    loanData: loanData,
                    lastUpdated: new Date().toISOString()
                };
                localStorage.setItem('koperasiData', JSON.stringify(data));
                console.log('âœ… Data tersimpan ke LocalStorage');
                return true;
            } catch (error) {
                console.error('âŒ Gagal menyimpan ke LocalStorage:', error);
                return false;
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('koperasiData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    if (data.memberData) memberData = { ...memberData, ...data.memberData };
                    if (data.transactions) transactions = data.transactions;
                    if (data.loanData) loanData = { ...loanData, ...data.loanData };
                    console.log('âœ… Data dimuat dari LocalStorage');
                    return true;
                }
            } catch (error) {
                console.error('âŒ Gagal memuat dari LocalStorage:', error);
            }
            return false;
        }

        // ================ SISTEM GOOGLE SHEETS ================
        async function syncToGoogleSheets() {
            try {
                console.log('ðŸ”„ Menyinkronkan data ke Google Sheets...');
                
                // Data yang akan dikirim
                const dataToSend = {
                    timestamp: new Date().toISOString(),
                    memberId: memberData.id,
                    memberName: memberData.nama,
                    simpananPokok: memberData.pokok,
                    simpananWajib: memberData.wajib,
                    simpananSukarela: memberData.sukarela,
                    totalSimpanan: memberData.pokok + memberData.wajib + memberData.sukarela,
                    limitPinjaman: Math.floor((memberData.pokok + memberData.wajib + memberData.sukarela) * memberData.loanLimitPercentage),
                    pinjamanAktif: memberData.loanActive,
                    pinjamanDitolak: memberData.loanRejected,
                    pinjamanLunas: memberData.loanPaid,
                    pinjamanPending: memberData.loanPending,
                    shuEstimasi: Math.floor((memberData.pokok + memberData.wajib + memberData.sukarela) * memberData.shuPercentage),
                    ksuBelanja: memberData.ksuShopping,
                    ksuHutang: memberData.ksuDebt,
                    transactions: JSON.stringify(transactions.slice(0, 10)), // 10 transaksi terakhir
                    loanData: JSON.stringify(loanData)
                };

                // Simulasi pengiriman ke Google Sheets
                // UNCOMMENT kode di bawah jika sudah memiliki Google Apps Script Web App URL
                
                /*
                const response = await fetch(CONFIG.GOOGLE_SHEETS_WEBAPP_URL, {
                    method: 'POST',
                    mode: 'no-cors', // Penting untuk Google Apps Script
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dataToSend)
                });
                
                console.log('âœ… Data tersinkron ke Google Sheets');
                */

                // Untuk demo, kita simpan ke localStorage sebagai bukti sinkronisasi
                localStorage.setItem('lastSyncToSheets', JSON.stringify({
                    timestamp: new Date().toISOString(),
                    data: dataToSend
                }));
                
                updateLastSyncInfo('Google Sheets');
                return true;
            } catch (error) {
                console.error('âŒ Gagal sinkron ke Google Sheets:', error);
                return false;
            }
        }

        async function syncFromGoogleSheets() {
            try {
                console.log('ðŸ”„ Mengambil data dari Google Sheets...');
                
                // Simulasi pengambilan data dari Google Sheets
                // UNCOMMENT kode di bawah jika sudah memiliki endpoint GET
                
                /*
                const response = await fetch(`${CONFIG.GOOGLE_SHEETS_WEBAPP_URL}?memberId=${memberData.id}`, {
                    method: 'GET',
                    mode: 'no-cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    // Update memberData dengan data dari Google Sheets
                    if (data.simpananPokok) memberData.pokok = parseInt(data.simpananPokok);
                    if (data.simpananWajib) memberData.wajib = parseInt(data.simpananWajib);
                    if (data.simpananSukarela) memberData.sukarela = parseInt(data.simpananSukarela);
                    if (data.pinjamanAktif) memberData.loanActive = parseInt(data.pinjamanAktif);
                    if (data.pinjamanLunas) memberData.loanPaid = parseInt(data.pinjamanLunas);
                    if (data.transactions) transactions = JSON.parse(data.transactions);
                    if (data.loanData) loanData = JSON.parse(data.loanData);
                }
                */
                
                // Untuk demo, kita ambil dari localStorage
                const lastSync = localStorage.getItem('lastSyncFromSheets');
                if (lastSync) {
                    const syncData = JSON.parse(lastSync);
                    console.log('âœ… Data dimuat dari Google Sheets (simulasi)');
                }
                
                updateLastSyncInfo('Google Sheets (baca)');
                return true;
            } catch (error) {
                console.error('âŒ Gagal mengambil dari Google Sheets:', error);
                return false;
            }
        }

        function updateLastSyncInfo(source = 'sistem') {
            const now = new Date();
            const options = { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            const timeStr = now.toLocaleDateString('id-ID', options) + ' WIB';
            
            const lastSyncInfo = document.getElementById('lastSyncInfo');
            if (lastSyncInfo) {
                lastSyncInfo.textContent = `Terakhir sinkron dari ${source}: ${timeStr}`;
            }
            
            const lastUpdatedTime = document.getElementById('lastUpdatedTime');
            if (lastUpdatedTime) {
                lastUpdatedTime.textContent = timeStr;
            }
        }

        // ================ FUNGSI UPDATE DATA TERINTEGRASI ================
        function updateAllFinancialData() {
            // Hitung ulang semua nilai
            const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
            const limitPinjaman = Math.floor(totalSimpanan * memberData.loanLimitPercentage);
            const tersediaPinjaman = limitPinjaman - memberData.loanActive;
            const shuEstimation = Math.floor(totalSimpanan * memberData.shuPercentage);
            
            // ===== UPDATE HALAMAN HOME =====
            updateElementText('homeLimitPinjaman', formatRupiah(limitPinjaman));
            updateElementText('homePinjamanAktif', formatRupiah(memberData.loanActive));
            updateElementText('homeAktifCount', memberData.loanActive > 0 ? memberData.loanActiveCount : '0');
            updateElementText('homeLunasCount', memberData.loanPaid > 0 ? memberData.loanPaidCount : '0');
            updateElementText('totalAmount', formatRupiah(totalSimpanan));
            updateElementText('shuTotal', formatRupiah(shuEstimation));
            updateElementText('modalShuAmount', shuEstimation.toLocaleString('id-ID'));
            updateElementText('homeSimpananPokok', formatRupiah(memberData.pokok));
            updateElementText('homeSimpananWajib', formatRupiah(memberData.wajib));
            updateElementText('homeSimpananSukarela', formatRupiah(memberData.sukarela));
            updateElementText('homeBelanjaBulanIni', formatRupiah(memberData.ksuShopping));
            updateElementText('homeHutangToko', formatRupiah(memberData.ksuDebt));
            
            // ===== UPDATE HALAMAN SIMPANAN =====
            updateElementText('totalAmountSavings', formatRupiah(totalSimpanan));
            updateElementText('savingsSimpananPokok', formatRupiah(memberData.pokok));
            updateElementText('savingsSimpananWajib', formatRupiah(memberData.wajib));
            updateElementText('savingsSimpananSukarela', formatRupiah(memberData.sukarela));
            
            // ===== UPDATE HALAMAN PINJAMAN =====
            updateElementText('limitPinjaman', formatRupiah(limitPinjaman));
            updateElementText('terpakaiAmount', formatRupiah(memberData.loanActive));
            updateElementText('tersediaAmount', formatRupiah(tersediaPinjaman));
            updateElementText('limitTersediaModal', formatRupiah(tersediaPinjaman));
            
            // Update progress bar
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
                const persentaseTerpakai = limitPinjaman > 0 ? (memberData.loanActive / limitPinjaman) * 100 : 0;
                progressBar.style.width = Math.min(persentaseTerpakai, 100) + '%';
            }
            
            // Update informasi simpanan di modal pinjaman
            updateElementText('simpananPokokInfo', formatRupiah(memberData.pokok));
            updateElementText('simpananWajibInfo', formatRupiah(memberData.wajib));
            updateElementText('simpananSukarelaInfo', formatRupiah(memberData.sukarela));
            updateElementText('totalSimpananInfo', formatRupiah(totalSimpanan));
            updateElementText('limitPinjamanInfo', formatRupiah(limitPinjaman));
            
            // Update riwayat pinjaman
            updateElementText('berjalanAmount', formatRupiah(memberData.loanActive));
            updateElementText('ditolakAmount', formatRupiah(memberData.loanRejected));
            updateElementText('lunasAmount', formatRupiah(memberData.loanPaid));
            
            if (memberData.loanActive > 0) {
                updateElementText('berjalanDetail', `${loanData.berjalan.jangkaWaktuText} â€¢ Pinjaman Berjangka untuk Pernikahan`);
                updateElementText('berjalanTenor', `Tenor: ${loanData.berjalan.jangkaWaktuText}`);
                updateElementText('berjalanDate', formatDate(loanData.berjalan.tanggalDisetujui) + ' - 10:30');
            }
            
            if (memberData.loanRejected > 0) {
                updateElementText('ditolakDetail', `${loanData.ditolak.jangkaWaktuText} â€¢ Pinjaman Berjangka untuk Pernikahan`);
                updateElementText('ditolakTenor', `Tenor: ${loanData.ditolak.jangkaWaktuText}`);
                updateElementText('ditolakDate', formatDate(loanData.ditolak.tanggalPengajuan) + ' - 06:45');
            }
            
            if (memberData.loanPaid > 0) {
                updateElementText('lunasDetail', `${loanData.lunas.jangkaWaktuText} â€¢ Pinjaman Berjangka untuk Pernikahan`);
                updateElementText('lunasTenor', `Tenor: ${loanData.lunas.jangkaWaktuText}`);
                updateElementText('lunasDate', formatDate(loanData.lunas.tanggalPelunasan) + ' - 14:20');
            }
            
            // Update withdrawal saldo
            const withdrawalSaldo = document.getElementById('withdrawalSaldo');
            if (withdrawalSaldo) {
                withdrawalSaldo.value = formatRupiah(memberData.sukarela);
            }
            
            // Update profil
            updateProfileData();
            
            // Update last updated time
            updateLastUpdatedTime();
            
            // Update kartu preview
            updateKartuPreview();
        }

        function updateProfileData() {
            // Update elemen profil di semua halaman
            updateElementText('homeMemberName', memberData.nama);
            updateElementText('homeMemberId', memberData.id);
            updateElementText('homeMemberIdSmall', memberData.id);
            updateElementText('savingsMemberId', memberData.id);
            updateElementText('accountMemberName', memberData.nama);
            updateElementText('accountMemberId', memberData.id);
            updateElementText('accountAlamat', memberData.alamat);
            updateElementText('accountEmail', memberData.email);
            updateElementText('accountWhatsApp', memberData.wa);
            
            // Update modal profil
            updateElementText('profileNIA', memberData.id);
            updateElementText('profileNama', memberData.nama);
            updateElementText('profileAlamat', memberData.alamat);
            updateElementText('profileEmail', memberData.email);
            updateElementText('profileWA', memberData.wa);
            updateElementText('profilePokok', formatRupiah(memberData.pokok));
            updateElementText('profileWajib', formatRupiah(memberData.wajib));
            updateElementText('profileSukarela', formatRupiah(memberData.sukarela));
            updateElementText('profileTotalSimpanan', formatRupiah(memberData.pokok + memberData.wajib + memberData.sukarela));
            updateElementText('profileTotalPinjaman', formatRupiah(memberData.loanActive));
            
            const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
            const shuEstimation = Math.floor(totalSimpanan * memberData.shuPercentage);
            updateElementText('profileSHU', formatRupiah(shuEstimation));
            
            // Update laporan
            updateElementText('reportNama', memberData.nama);
            updateElementText('reportNIA', memberData.id);
            updateElementText('reportPokok', memberData.pokok.toLocaleString('id-ID'));
            updateElementText('reportWajib', memberData.wajib.toLocaleString('id-ID'));
            updateElementText('reportSukarela', memberData.sukarela.toLocaleString('id-ID'));
            updateElementText('reportTotal', (memberData.pokok + memberData.wajib + memberData.sukarela).toLocaleString('id-ID'));
            updateElementText('reportBunga', formatRupiah(Math.floor(totalSimpanan * 0.005)));
            updateElementText('reportSHU', formatRupiah(shuEstimation));
            
            const reportWajibStatus = document.getElementById('reportWajibStatus');
            if (reportWajibStatus) {
                reportWajibStatus.textContent = memberData.wajib > 0 ? 'Aktif' : 'Menunggu';
            }
            
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const periode = `September 2020 - ${now.toLocaleDateString('id-ID', { month: 'long', year: 'numeric' })}`;
            updateElementText('reportPeriode', `Periode: ${periode}`);
            
            const dateOptions = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
            updateElementText('reportDate', now.toLocaleDateString('id-ID', dateOptions) + ' WIB');
        }

        function updateKartuPreview() {
            updateElementText('kartuNIA', memberData.id);
            updateElementText('kartuNama', memberData.nama);
            updateElementText('kartuTglGabung', '18/09/2020');
        }

        function updateElementText(id, value) {
            const element = document.getElementById(id);
            if (element) {
                element.textContent = value;
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('id-ID', options);
        }

        // ================ FUNGSI FORMAT RUPIAH ================
        function formatRupiah(angka) {
            if (angka === undefined || angka === null) return "Rp 0";
            return 'Rp ' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function formatRupiahNoSymbol(angka) {
            if (!angka) return "0";
            return angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        // ================ FUNGSI NAVIGASI ================
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId + '-page').classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
                if (nav.getAttribute('data-page') === pageId) {
                    nav.classList.add('active');
                }
            });
            
            updateAllFinancialData();
        }

        // ================ FUNGSI MODAL AKUN ================
        function openAkunModal(modalId) {
            if (modalId === 'modalProfileDetail') {
                updateLastUpdatedTime();
            }
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeAkunModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ================ FUNGSI MODAL PINJAMAN ================
        function openLoanModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeLoanModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // ================ FUNGSI PREMIUM MODAL ================
        function openPremiumModal(jenis) {
            const modalId = `premiumModal${jenis.charAt(0).toUpperCase() + jenis.slice(1)}`;
            const modal = document.getElementById(modalId);
            if (modal) {
                // Update data sebelum membuka modal
                if (jenis === 'berjalan') {
                    updatePremiumModalBerjalan();
                } else if (jenis === 'ditolak') {
                    updatePremiumModalDitolak();
                } else if (jenis === 'lunas') {
                    updatePremiumModalLunas();
                }
                
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function updatePremiumModalBerjalan() {
            const data = loanData.berjalan;
            
            updateElementText('berjalanSubtitle', `Pinjaman ${data.jenis} untuk ${data.peruntukan}`);
            updateElementText('berjalanNominal', formatRupiah(data.nominal));
            updateElementText('berjalanDanaDiterima', formatRupiah(data.danaDiterima));
            updateElementText('berjalanJangkaWaktu', data.jangkaWaktuText);
            updateElementText('berjalanJatuhTempo', data.jatuhTempo);
            
            // Detail
            updateElementText('detailBerjalanDiajukan', formatRupiahNoSymbol(data.nominal));
            updateElementText('detailBerjalanTglDisetujui', formatDate(data.tanggalDisetujui));
            updateElementText('detailBerjalanTglLunas', formatDate(data.tanggalPerkiraanLunas));
            updateElementText('detailBerjalanSkema', data.skema);
            updateElementText('detailBerjalanJangka', data.jangkaWaktuText);
            updateElementText('detailBerjalanTanggalCicilan', data.tanggalCicilan);
            updateElementText('detailBerjalanJumlahBayar', formatRupiah(data.jumlahBayarPerPeriode));
            updateElementText('detailBerjalanJasa', `-Rp ${formatRupiahNoSymbol(data.jasaPinjaman)}`);
            updateElementText('detailBerjalanProvisi', '-Rp 0');
            updateElementText('detailBerjalanBiayaLain', '-Rp 0');
            updateElementText('detailBerjalanTotalDiterima', formatRupiah(data.totalDiterima));
            
            // Angsuran Terbayarkan
            const angsuranTerbayarkanList = document.getElementById('angsuranTerbayarkanList');
            if (angsuranTerbayarkanList && data.angsuranTerbayarkan) {
                let html = '';
                data.angsuranTerbayarkan.forEach((item, index) => {
                    html += `
                        <div class="timeline-item">
                            <div class="icon green">âœ“</div>
                            <div class="timeline-box">
                                <h3>Angsuran ke-${item.periode}</h3>
                                <h2>${formatRupiah(item.total)}</h2>
                                <div class="detail-row">
                                    <span>Angsuran Pokok ${formatRupiah(item.pokok)}</span>
                                    <span>Biaya Lain ${formatRupiah(item.biayaLain)}</span>
                                </div>
                                <p style="font-size:12px; color:#888; margin-top:5px;">
                                    Dibayar pada ${formatDate(item.tanggal)} - ${new Date(item.tanggal).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })}
                                </p>
                            </div>
                        </div>
                    `;
                });
                angsuranTerbayarkanList.innerHTML = html;
            }
            
            // Angsuran Akan Datang
            const angsuranAkanDatangList = document.getElementById('angsuranAkanDatangList');
            if (angsuranAkanDatangList && data.angsuranAkanDatang) {
                let html = '';
                data.angsuranAkanDatang.forEach((item, index) => {
                    html += `
                        <div class="timeline-item">
                            <div class="icon yellow-icon">â°</div>
                            <div class="timeline-box">
                                <h3>Angsuran ke-${item.periode}</h3>
                                <h2>${formatRupiah(item.total)}</h2>
                                <div class="detail-row">
                                    <span>Angsuran Pokok ${formatRupiah(item.pokok)}</span>
                                    <span>Biaya Lain ${formatRupiah(item.biayaLain)}</span>
                                </div>
                                <p style="font-size:12px; color:#888; margin-top:5px;">
                                    Harus dibayar pada ${formatDate(item.tanggal)} - ${new Date(item.tanggal).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })}
                                </p>
                            </div>
                        </div>
                    `;
                });
                angsuranAkanDatangList.innerHTML = html;
            }
        }

        function updatePremiumModalDitolak() {
            const data = loanData.ditolak;
            
            updateElementText('ditolakSubtitle', `Pinjaman ${data.jenis} untuk ${data.peruntukan}`);
            updateElementText('ditolakNominal', formatRupiah(data.nominal));
            updateElementText('ditolakDana', formatRupiah(data.danaDitolak));
            updateElementText('ditolakJangkaWaktu', data.jangkaWaktuText);
            updateElementText('ditolakJatuhTempo', data.jatuhTempo);
            
            // Detail
            updateElementText('detailDitolakDiajukan', formatRupiahNoSymbol(data.nominal));
            updateElementText('detailDitolakTglPengajuan', formatDate(data.tanggalPengajuan));
            updateElementText('detailDitolakTglPenolakan', formatDate(data.tanggalPenolakan));
            updateElementText('detailDitolakSkema', data.skema);
            updateElementText('detailDitolakJangka', data.jangkaWaktuText);
            updateElementText('detailDitolakTanggalCicilan', data.tanggalCicilan);
            updateElementText('detailDitolakJumlahBayar', formatRupiah(data.jumlahBayarPerPeriode));
            updateElementText('detailDitolakJasa', `-Rp ${formatRupiahNoSymbol(data.jasaPinjaman)}`);
            updateElementText('detailDitolakProvisi', '-Rp 0');
            updateElementText('detailDitolakBiayaLain', '-Rp 0');
            updateElementText('detailDitolakTotalDiterima', formatRupiah(data.totalDiterima));
            
            // Ingkar Janji
            if (data.ingkarJanji) {
                updateElementText('ditolakTotalKeterlambatan', `${data.ingkarJanji.totalKeterlambatan} Kali`);
                updateElementText('ditolakTotalDenda', formatRupiah(data.ingkarJanji.totalDenda));
                updateElementText('ditolakHariKeterlambatan', `${data.ingkarJanji.hariKeterlambatan} Hari`);
                updateElementText('ditolakCatatan', data.ingkarJanji.catatan);
            }
            
            // Alasan Penolakan
            const alasanPenolakanList = document.getElementById('alasanPenolakanList');
            if (alasanPenolakanList && data.alasanPenolakan) {
                let html = '';
                data.alasanPenolakan.forEach((alasan, index) => {
                    const [judul, detail] = alasan.split(' - ');
                    html += `
                        <div class="timeline-item">
                            <div class="icon red-icon">!</div>
                            <div class="timeline-box">
                                <h3>${judul}</h3>
                                <h2>Tidak Lengkap</h2>
                                <p>${detail || alasan}</p>
                            </div>
                        </div>
                    `;
                });
                alasanPenolakanList.innerHTML = html;
            }
        }

        function updatePremiumModalLunas() {
            const data = loanData.lunas;
            
            updateElementText('lunasSubtitle', `Pinjaman ${data.jenis} untuk ${data.peruntukan}`);
            updateElementText('lunasNominal', formatRupiah(data.nominal));
            updateElementText('lunasTotalDibayarkan', formatRupiah(data.totalDibayarkan));
            updateElementText('lunasJangkaWaktu', data.jangkaWaktuText);
            updateElementText('lunasJatuhTempo', data.jatuhTempo);
            
            // Detail
            updateElementText('detailLunasDiajukan', formatRupiahNoSymbol(data.nominal));
            updateElementText('detailLunasTglPencairan', formatDate(data.tanggalPencairan));
            updateElementText('detailLunasTglPelunasan', formatDate(data.tanggalPelunasan));
            updateElementText('detailLunasSkema', data.skema);
            updateElementText('detailLunasJangka', data.jangkaWaktuText);
            updateElementText('detailLunasTanggalCicilan', data.tanggalCicilan);
            updateElementText('detailLunasJumlahBayar', formatRupiah(data.jumlahBayarPerPeriode));
            updateElementText('detailLunasJasa', `-Rp ${formatRupiahNoSymbol(data.jasaPinjaman)}`);
            updateElementText('detailLunasCatatanJasa', `${data.persentaseJasa}% dari Pinjaman yang Diajukan`);
            updateElementText('detailLunasProvisi', '-Rp 0');
            updateElementText('detailLunasBiayaLain', '-Rp 0');
            updateElementText('detailLunasTotalDiterima', formatRupiah(data.totalDiterima));
            
            // Riwayat Pelunasan
            if (data.riwayatPelunasan) {
                updateElementText('riwayatTotalDibayar', formatRupiah(data.riwayatPelunasan.totalDibayar));
                updateElementText('riwayatPokok', formatRupiah(data.riwayatPelunasan.pokok));
                updateElementText('riwayatBunga', formatRupiah(data.riwayatPelunasan.bunga));
                updateElementText('riwayatTanggalLunas', `Lunas pada ${formatDate(data.riwayatPelunasan.tanggal)} - ${new Date(data.riwayatPelunasan.tanggal).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })}`);
                updateElementText('riwayatPeriodeBunga', `Bunga ${data.jangkaWaktu} hari periode pinjaman`);
            }
        }

        function closePremiumModal() {
            const modals = document.querySelectorAll('.premium-modal');
            modals.forEach(modal => modal.style.display = 'none');
            document.body.style.overflow = 'auto';
        }

        function toggleDetail(boxId) {
            const box = document.getElementById(boxId);
            const arrow = document.getElementById(boxId.replace('detailBox', 'arrow'));
            if (box) {
                box.classList.toggle("active");
                if (arrow) {
                    arrow.style.transform = box.classList.contains("active") ? "rotate(180deg)" : "rotate(0deg)";
                }
            }
        }

        // ================ FUNGSI WHATSAPP ================
        function sendWhatsApp(jenis) {
            let message = "";
            
            if (jenis === 'persetujuan') {
                message = `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*\n`;
                message += `*â•â•â•â• â—Žâ€¢â€â€¢â—Žï·½â—Žâ€¢â€â€¢â—Ž â•â•â•â•*\n\n`;
                message += `*_Assalamualaikum Warahmatullahi Wabarakatuh_*\n\n\n`;
                message += `==========================\n`;
                message += `*Halo Admin saya Anggota Koperasi "Asmara Tani" Saya Mau MINTA PERSETUJUAN*\n`;
                message += `==========================\n`;
                message += `*DATA ANGGOTA*\n\n`;
                message += `*Nama* : ${memberData.nama}\n`;
                message += `*Nomor HP* : ${memberData.wa}\n`;
                message += `*Alamat* : ${memberData.alamat}\n\n`;
                message += `==========================\n`;
                message += `*Catatan* : _Silahkan Tunggu Konfirmasi Dari Admin Koperasi.!_\n`;
                message += `===========================\n\n`;
                message += `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*`;
            }
            else if (jenis === 'bayar') {
                const today = new Date();
                const hari = today.toLocaleDateString('id-ID', { weekday: 'long' });
                const tanggal = today.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
                const jam = today.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
                
                message = `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*\n`;
                message += `*â•â•â•â• â—Žâ€¢â€â€¢â—Žï·½â—Žâ€¢â€â€¢â—Ž â•â•â•â•*\n\n`;
                message += `*_Assalamualaikum Warahmatullahi Wabarakatuh_*\n\n\n`;
                message += `==========================\n`;
                message += `*Halo Admin saya Anggota Koperasi "Asmara Tani" Saya Mau Bayar Angsuran*\n`;
                message += `==========================\n`;
                message += `*DATA ANGGOTA*\n\n`;
                message += `*Nama* : ${memberData.nama}\n`;
                message += `*Nomor HP* : ${memberData.wa}\n`;
                message += `*Alamat* : ${memberData.alamat}\n\n`;
                message += `==========================\n`;
                message += `*BAYAR ANGSURAN*\n\n`;
                message += `*Hari :* ${hari}\n`;
                message += `*Tanggal :* ${tanggal}\n`;
                message += `*Jam :* ${jam}\n`;
                message += `*Angsuran Ke :* 2\n`;
                message += `*Tujuan Penarikan :* Rp. 3.333.333\n`;
                message += `________________________________\n`;
                message += `*Transfer Via :* \n\n`;
                message += `===========================\n`;
                message += `*Catatan* : _Silahkan Kirim Bukti Transfer/Pembayaran Anda.!_\n`;
                message += `===========================\n\n`;
                message += `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*`;
            }
            else if (jenis === 'ajukanulang') {
                message = `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*\n`;
                message += `*â•â•â•â• â—Žâ€¢â€â€¢â—Žï·½â—Žâ€¢â€â€¢â—Ž â•â•â•â•*\n\n`;
                message += `*_Assalamualaikum Warahmatullahi Wabarakatuh_*\n\n\n`;
                message += `==========================\n`;
                message += `*Halo Admin saya Anggota Koperasi "Asmara Tani" Saya Mau Pengajuan Ulang*\n`;
                message += `==========================\n`;
                message += `*DATA ANGGOTA*\n\n`;
                message += `*Nama* : ${memberData.nama}\n`;
                message += `*Nomor HP* : ${memberData.wa}\n`;
                message += `*Alamat* : ${memberData.alamat}\n\n`;
                message += `==========================\n`;
                message += `*Pengajuan Ulang*\n\n`;
                message += `*Mohon Segera Di Respon dan Di Follow Up Admin*\n\n`;
                message += `===========================\n`;
                message += `*Catatan* : _Silahkan Tunggu Konfirmasi Dari Admin.!_\n`;
                message += `===========================\n\n`;
                message += `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*`;
            }
            
            const waUrl = `https://wa.me/${WA_ADMIN}?text=${encodeURIComponent(message)}`;
            window.open(waUrl, '_blank');
        }

        // ================ FUNGSI SIMPANAN ================
        function toggleAmountVisibility() {
            isAmountVisible = !isAmountVisible;
            const eyeToggle = document.getElementById('eyeToggle');
            const totalAmount = document.getElementById('totalAmount');
            const hiddenAmount = document.getElementById('hiddenAmount');
            
            if (eyeToggle) eyeToggle.innerHTML = isAmountVisible ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            if (totalAmount) totalAmount.style.display = isAmountVisible ? 'block' : 'none';
            if (hiddenAmount) hiddenAmount.style.display = isAmountVisible ? 'none' : 'block';
        }

        function toggleAmountVisibilitySavings() {
            isAmountVisibleSavings = !isAmountVisibleSavings;
            const eyeToggle = document.getElementById('eyeToggleSavings');
            const totalAmount = document.getElementById('totalAmountSavings');
            const hiddenAmount = document.getElementById('hiddenAmountSavings');
            
            if (eyeToggle) eyeToggle.innerHTML = isAmountVisibleSavings ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            if (totalAmount) totalAmount.style.display = isAmountVisibleSavings ? 'block' : 'none';
            if (hiddenAmount) hiddenAmount.style.display = isAmountVisibleSavings ? 'none' : 'block';
        }

        function openDepositModal() { openAkunModal('modalDeposit'); }
        function openWithdrawalModal() { 
            updateAllFinancialData();
            openAkunModal('modalWithdrawal'); 
        }
        function openTransferModal() { 
            openAkunModal('modalTransfer'); 
        }
        function openReportModal() { 
            updateAllFinancialData();
            openAkunModal('modalReport'); 
        }

        function filterTransactions(filter) {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.toLowerCase().includes(filter)) {
                    btn.classList.add('active');
                }
            });
            alert(`Menampilkan transaksi: ${filter === 'all' ? 'Semua' : filter === 'deposit' ? 'Setoran' : 'Penarikan'}`);
        }

        function showSavingsDetail(type) {
            let title = '', content = '';
            if (type === 'pokok') {
                title = 'Detail Simpanan Pokok';
                content = `<p><strong>Simpanan Pokok</strong> adalah simpanan yang dibayarkan sekali oleh anggota saat pertama kali menjadi anggota koperasi.</p>
                    <p><strong>Jumlah:</strong> ${formatRupiah(memberData.pokok)}</p>
                    <p><strong>Karakteristik:</strong></p>
                    <ul><li>Dibayar sekali saat pendaftaran</li><li>Tidak dapat ditarik selama menjadi anggota</li>
                    <li>Dikembalikan saat keluar dari keanggotaan</li><li>Besarnya sama untuk semua anggota</li></ul>`;
            } else if (type === 'wajib') {
                title = 'Detail Simpanan Wajib';
                content = `<p><strong>Simpanan Wajib</strong> adalah simpanan yang harus dibayarkan secara berkala oleh anggota setiap bulan.</p>
                    <p><strong>Jumlah Saat Ini:</strong> ${formatRupiah(memberData.wajib)}</p>
                    <p><strong>Karakteristik:</strong></p>
                    <ul><li>Dibayar setiap bulan</li><li>Besarnya sama untuk semua anggota</li>
                    <li>Tidak dapat ditarik selama menjadi anggota</li><li>Dikembalikan saat keluar dari keanggotaan</li></ul>`;
            } else if (type === 'sukarela') {
                title = 'Detail Simpanan Sukarela';
                content = `<p><strong>Simpanan Sukarela</strong> adalah simpanan yang dapat disetor dan ditarik kapan saja sesuai keinginan anggota.</p>
                    <p><strong>Jumlah Saat Ini:</strong> ${formatRupiah(memberData.sukarela)}</p>
                    <p><strong>Karakteristik:</strong></p>
                    <ul><li>Dapat disetor kapan saja</li><li>Dapat ditarik kapan saja</li>
                    <li>Besarnya bebas (tidak ditentukan)</li><li>Mendapatkan bunga</li></ul>`;
            }
            
            const titleEl = document.getElementById('savingsDetailTitle');
            if (titleEl) titleEl.textContent = title;
            const contentEl = document.getElementById('savingsDetailContent');
            if (contentEl) contentEl.innerHTML = content;
            openAkunModal('modalSavingsDetail');
        }

        function sendDepositToWhatsApp() {
            const depositType = document.getElementById('depositType')?.value || 'sukarela';
            const depositAmount = document.getElementById('depositAmount')?.value;
            const paymentMethod = document.getElementById('paymentMethod')?.value || 'cash';
            
            if (!depositAmount || depositAmount < 10000) {
                alert('Jumlah setoran minimal Rp 10.000');
                return;
            }
            
            const typeNames = { 'pokok': 'Simpanan Pokok', 'wajib': 'Simpanan Wajib', 'sukarela': 'Simpanan Sukarela' };
            
            let paymentInfo = {
                'cash': 'Tunai di Kasir',
                'bri': 'Bank BRI - 4098 01 019526 53 3 A/n Eldi Sugianto',
                'dana': 'DANA 085218483129',
                'gopay': 'Gopay 085218483129',
                'qris': 'QRIS',
                'other': 'Bank Lain'
            }[paymentMethod] || 'Tunai di Kasir';
            
            const message = `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*
*â•â•â•â• â—Žâ€¢â€â€¢â—Žï·½â—Žâ€¢â€â€¢â—Ž â•â•â•â•*

*_Assalamualaikum Warahmatullahi Wabarakatuh_*


==========================
*Halo Admin saya Anggota Koperasi "Asmara Tani" Saya Mau Setor Simpanan*
==========================
*DATA ANGGOTA*

*Nama* : ${memberData.nama}
*Nomor HP* : ${memberData.wa}
*Alamat* : ${memberData.alamat}

==========================
*SETOR SIMPANAN*

*${typeNames[depositType]}* : Rp. ${parseInt(depositAmount).toLocaleString('id-ID')}

________________________________
*Pembayaran* : 
â€¢ ${paymentInfo}

===========================
*Catatan* : _Silahkan Kirim Bukti Transfer/Pembayaran.!_
===========================

*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*`;
            
            window.open(`https://wa.me/${WA_ADMIN}?text=${encodeURIComponent(message)}`, '_blank');
            closeAkunModal('modalDeposit');
        }

        function sendWithdrawalToWhatsApp() {
            const withdrawalAmount = document.getElementById('withdrawalAmount')?.value;
            const withdrawalMethod = document.getElementById('withdrawalMethod')?.value || 'transfer';
            
            if (!withdrawalAmount || withdrawalAmount < 50000) {
                alert('Jumlah penarikan minimal Rp 50.000');
                return;
            }
            
            if (parseInt(withdrawalAmount) > memberData.sukarela) {
                alert('Saldo simpanan sukarela tidak mencukupi!');
                return;
            }
            
            const tujuanPenarikan = withdrawalMethod === 'transfer' ? 'Transfer ke Rekening' : 'Tunai di Kasir';
            
            const message = `*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*
*â•â•â•â• â—Žâ€¢â€â€¢â—Žï·½â—Žâ€¢â€â€¢â—Ž â•â•â•â•*

*_Assalamualaikum Warahmatullahi Wabarakatuh_*


==========================
*Halo Admin saya Anggota Koperasi "Asmara Tani" Saya Mau Penarikan Dana*
==========================
*DATA ANGGOTA*

*Nama* : ${memberData.nama}
*Nomor HP* : ${memberData.wa}
*Alamat* : ${memberData.alamat}

==========================
*PENARIKAN DANA*

*Jumlah Penarikan* : Rp. ${parseInt(withdrawalAmount).toLocaleString('id-ID')}
*Tujuan Penarikan* : ${tujuanPenarikan}

________________________________
*Transfer Dari* : 
â€¢ Bank BRI - 4098 01 019526 53 3 A/n Eldi Sugianto
â€¢ DANA 085218483129
â€¢ Gopay 085218483129
â€¢ Bank Lain

===========================
*Catatan* : _Silahkan Kirim Bukti Penerima Dana.!_
===========================

*â”…â•â€¢âƒâœ½à¼ŠÂ°Â°ðŸ€ðŸŒ»ðŸ€Â°Â°à¼Šâœ½âƒâ€¢â•â”…*`;
            
            window.open(`https://wa.me/${WA_ADMIN}?text=${encodeURIComponent(message)}`, '_blank');
            closeAkunModal('modalWithdrawal');
        }

        function processTransfer() {
            const senderAccount = document.getElementById('senderAccount')?.value;
            const receiverAccount = document.getElementById('receiverAccount')?.value;
            const transferAmount = document.getElementById('transferAmount')?.value;
            
            if (!senderAccount || !receiverAccount || !transferAmount) {
                alert('Harap isi semua field yang diperlukan!');
                return;
            }
            
            if (transferAmount < 10000) {
                alert('Jumlah transfer minimal Rp 10.000');
                return;
            }
            
            alert(`Transfer sebesar Rp ${parseInt(transferAmount).toLocaleString('id-ID')} berhasil diproses!`);
            closeAkunModal('modalTransfer');
            
            const sender = document.getElementById('senderAccount');
            const receiver = document.getElementById('receiverAccount');
            const amount = document.getElementById('transferAmount');
            const note = document.getElementById('transferNote');
            if (sender) sender.value = '';
            if (receiver) receiver.value = '';
            if (amount) amount.value = '';
            if (note) note.value = '';
        }

        function printReport() {
            const printContent = document.getElementById('reportPreview')?.innerHTML;
            if (printContent) {
                const originalContent = document.body.innerHTML;
                document.body.innerHTML = printContent;
                window.print();
                document.body.innerHTML = originalContent;
                location.reload();
            }
        }

        function printKartuAnggota() {
            const kartuContent = document.querySelector('.kartu-preview')?.innerHTML;
            if (kartuContent) {
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html><head><title>Kartu Anggota Koperasi</title>
                    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                    <style>
                        body{font-family:'Poppins',sans-serif;padding:40px;max-width:400px;margin:0 auto;background:#f0f7f0;}
                        .kartu-preview{background:white;border-radius:16px;padding:20px;display:flex;flex-direction:column;align-items:center;text-align:center;border:2px solid #2E7D32;box-shadow:0 10px 25px rgba(0,0,0,0.1);}
                        .kartu-header{background:linear-gradient(135deg,#2E7D32,#4CAF50);color:white;padding:12px;border-radius:12px 12px 0 0;width:100%;margin-bottom:15px;}
                        .kartu-header h4{font-size:1.1rem;font-weight:700;margin:0;}
                        .kartu-photo{width:100px;height:100px;border-radius:50%;overflow:hidden;border:4px solid #4CAF50;margin:0 auto 15px;}
                        .kartu-photo img{width:100%;height:100%;object-fit:cover;}
                        .kartu-info{width:100%;text-align:left;background:#f5f5f5;padding:15px;border-radius:12px;}
                        .kartu-info-row{display:flex;margin-bottom:8px;font-size:0.9rem;}
                        .kartu-info-label{font-weight:700;width:100px;color:#333;}
                        .kartu-info-value{flex:1;color:#2E7D32;font-weight:600;}
                        .kartu-footer{margin-top:15px;font-size:0.8rem;color:#666;border-top:1px solid #ddd;padding-top:10px;width:100%;}
                    </style>
                    </head>
                    <body>
                        <div class="kartu-preview">${kartuContent}</div>
                        <div style="text-align:center; margin-top:30px;">
                            <button onclick="window.print()" style="padding:12px 30px; background:#2E7D32; color:white; border:none; border-radius:50px; font-weight:600; cursor:pointer;">Cetak Kartu</button>
                        </div>
                        <script>window.onload=function(){ setTimeout(function(){ window.print(); }, 500); }<\/script>
                    </body></html>
                `);
                printWindow.document.close();
            }
        }

        function downloadPDF() {
            alert('Fitur download PDF akan segera tersedia!');
        }

        // ================ FUNGSI PINJAMAN ================
        function resetFormPengajuan() {
            const jenis = document.getElementById('jenisPinjaman');
            if (jenis) jenis.value = '';
            const peruntukan = document.getElementById('peruntukanPinjaman');
            if (peruntukan) peruntukan.value = '';
            const nominal = document.getElementById('nominalPinjaman');
            if (nominal) nominal.value = '';
            
            const skemaOptions = document.querySelectorAll('.skema-option');
            skemaOptions.forEach(opt => opt.classList.remove('active'));
            const bulanan = document.querySelector('.skema-option[data-skema="bulanan"]');
            if (bulanan) bulanan.classList.add('active');
            
            pengajuanPinjaman = {
                jenis: "", peruntukan: "", nominal: 0, skema: "bulanan", jangkaWaktu: 3,
                jumlahDibayarkan: 0, jasaPinjaman: 0, provisiKredit: 0, biayaLain: 0, totalDiterima: 0
            };
            
            updateTanggalJatuhTempo();
        }

        function validasiFormPengajuan() {
            let valid = true;
            
            if (!pengajuanPinjaman.jenis) {
                showError('jenisPinjaman', 'Harap pilih jenis pinjaman');
                valid = false;
            }
            
            if (!pengajuanPinjaman.peruntukan) {
                showError('peruntukanPinjaman', 'Harap pilih peruntukan pinjaman');
                valid = false;
            }
            
            if (!pengajuanPinjaman.nominal || pengajuanPinjaman.nominal <= 0) {
                showError('nominalPinjaman', 'Harap pilih nominal pinjaman');
                valid = false;
            }
            
            const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
            const limitPinjaman = Math.floor(totalSimpanan * memberData.loanLimitPercentage);
            const tersediaPinjaman = limitPinjaman - memberData.loanActive;
            
            if (pengajuanPinjaman.nominal > tersediaPinjaman) {
                showError('nominalPinjaman', `Nominal melebihi limit tersedia (${formatRupiah(tersediaPinjaman)})`);
                valid = false;
            }
            
            if (pengajuanPinjaman.nominal < MINIMUM_PINJAMAN) {
                showError('nominalPinjaman', `Minimum pinjaman adalah ${formatRupiah(MINIMUM_PINJAMAN)}`);
                valid = false;
            }
            
            return valid;
        }

        function showError(fieldId, message) {
            const errorElement = document.getElementById(`error${fieldId.charAt(0).toUpperCase() + fieldId.slice(1)}`);
            const inputElement = document.getElementById(fieldId);
            
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
            if (inputElement) {
                inputElement.classList.add('input-error');
            }
        }

        function hideError(fieldId) {
            const errorElement = document.getElementById(`error${fieldId.charAt(0).toUpperCase() + fieldId.slice(1)}`);
            const inputElement = document.getElementById(fieldId);
            
            if (errorElement) errorElement.style.display = 'none';
            if (inputElement) inputElement.classList.remove('input-error');
        }

        function hitungSimulasiPinjaman() {
            const nominal = pengajuanPinjaman.nominal;
            const jangkaWaktu = pengajuanPinjaman.jangkaWaktu;
            const skema = pengajuanPinjaman.skema;
            
            pengajuanPinjaman.jasaPinjaman = Math.floor(nominal * 0.10);
            pengajuanPinjaman.provisiKredit = 0;
            pengajuanPinjaman.biayaLain = 0;
            pengajuanPinjaman.totalDiterima = nominal - pengajuanPinjaman.jasaPinjaman;
            
            if (skema === 'harian') {
                pengajuanPinjaman.jumlahDibayarkan = Math.floor(nominal / jangkaWaktu);
            } else if (skema === 'bulanan') {
                pengajuanPinjaman.jumlahDibayarkan = Math.floor(nominal / jangkaWaktu);
            } else if (skema === 'tahunan') {
                pengajuanPinjaman.jumlahDibayarkan = Math.floor(nominal / (jangkaWaktu * 12));
            }
            
            let skemaText = { 'harian': 'Harian', 'bulanan': 'Bulanan', 'tahunan': 'Tahunan' }[pengajuanPinjaman.skema] || 'Bulanan';
            let jangkaWaktuText = '';
            if (pengajuanPinjaman.skema === 'harian') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Hari`;
            else if (pengajuanPinjaman.skema === 'bulanan') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Bulan`;
            else if (pengajuanPinjaman.skema === 'tahunan') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Tahun`;
            
            updateElementText('simulasiSkemaPinjaman', skemaText);
            updateElementText('simulasiPinjamanDiajukan', formatRupiahNoSymbol(pengajuanPinjaman.nominal));
            updateElementText('simulasiJangkaWaktu', jangkaWaktuText);
            updateElementText('simulasiJumlahDibayarkan', formatRupiah(pengajuanPinjaman.jumlahDibayarkan));
            updateElementText('ringkasanPinjamanDiajukan', formatRupiahNoSymbol(pengajuanPinjaman.nominal));
            updateElementText('ringkasanJasaPinjaman', "-Rp " + formatRupiahNoSymbol(pengajuanPinjaman.jasaPinjaman));
            updateElementText('ringkasanTotalDiterima', formatRupiah(pengajuanPinjaman.totalDiterima));
        }

        function lanjutKeSimulasi() {
            if (!validasiFormPengajuan()) return;
            
            const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
            if (totalSimpanan < MINIMUM_PINJAMAN) {
                alert(`Total simpanan Anda tidak mencukupi untuk pengajuan pinjaman. Minimum pinjaman adalah ${formatRupiah(MINIMUM_PINJAMAN)}`);
                return;
            }
            
            if (pengajuanPinjaman.nominal < MINIMUM_PINJAMAN) {
                alert(`Minimum pinjaman adalah ${formatRupiah(MINIMUM_PINJAMAN)}`);
                return;
            }
            
            hitungSimulasiPinjaman();
            closeLoanModal('modalPengajuan');
            openLoanModal('modalSimulasi');
        }

        function kembaliKePengajuan() {
            closeLoanModal('modalSimulasi');
            openLoanModal('modalPengajuan');
        }

        function ajukanPinjaman() {
            memberData.loanPending = pengajuanPinjaman.nominal;
            memberData.loanActive += pengajuanPinjaman.nominal;
            memberData.loanActiveCount++;
            
            // Update data pinjaman berjalan
            if (!loanData.berjalan) {
                loanData.berjalan = {
                    id: `LN-${new Date().getFullYear()}-${String(loanData.berjalan?.id || 0).padStart(3, '0')}`,
                    nominal: 0,
                    danaDiterima: 0,
                    jenis: '',
                    peruntukan: '',
                    skema: '',
                    jangkaWaktu: 0,
                    jangkaWaktuText: '',
                    jatuhTempo: '',
                    tanggalDisetujui: new Date().toISOString().split('T')[0],
                    tanggalPerkiraanLunas: '',
                    tanggalCicilan: 'Tanggal 10 Setiap Bulan',
                    jumlahBayarPerPeriode: 0,
                    jasaPinjaman: 0,
                    totalDiterima: 0,
                    angsuranTerbayarkan: [],
                    angsuranAkanDatang: []
                };
            }
            
            updateAllFinancialData();
            
            // Update tampilan menunggu
            updateElementText('menungguAmount', formatRupiah(pengajuanPinjaman.nominal));
            
            let jenisText = { 'berjangka': 'Pinjaman Berjangka', 'mikro': 'Pinjaman Mikro', 'konsumtif': 'Pinjaman Konsumtif', 'investasi': 'Pinjaman Investasi' }[pengajuanPinjaman.jenis] || 'Pinjaman';
            let peruntukanText = { 'pernikahan': 'Pernikahan', 'pendidikan': 'Pendidikan', 'kesehatan': 'Kesehatan', 'usaha': 'Modal Usaha', 'rumah': 'Renovasi Rumah' }[pengajuanPinjaman.peruntukan] || pengajuanPinjaman.peruntukan;
            let jangkaWaktuText = '';
            if (pengajuanPinjaman.skema === 'harian') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Hari`;
            else if (pengajuanPinjaman.skema === 'bulanan') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Bulan`;
            else if (pengajuanPinjaman.skema === 'tahunan') jangkaWaktuText = `${pengajuanPinjaman.jangkaWaktu} Tahun`;
            
            updateElementText('menungguDetail', `${jangkaWaktuText} â€¢ ${jenisText} untuk ${peruntukanText}`);
            updateElementText('menungguTenor', `Tenor: ${jangkaWaktuText}`);
            
            const now = new Date();
            const options = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
            updateElementText('menungguDate', now.toLocaleDateString('id-ID', options));
            
            // Update modal menunggu
            updateElementText('menungguPinjamanDiajukan', formatRupiah(pengajuanPinjaman.nominal));
            updateElementText('menungguSkemaPinjaman', { 'harian': 'Harian', 'bulanan': 'Bulanan', 'tahunan': 'Tahunan' }[pengajuanPinjaman.skema] || 'Bulanan');
            updateElementText('menungguJangkaWaktu', jangkaWaktuText);
            updateElementText('menungguJumlahDibayarkan', formatRupiah(pengajuanPinjaman.jumlahDibayarkan));
            updateElementText('menungguJasaPinjaman', formatRupiah(pengajuanPinjaman.jasaPinjaman));
            updateElementText('menungguTotalDiterima', formatRupiah(pengajuanPinjaman.totalDiterima));
            
            // Simpan ke localStorage dan Google Sheets
            saveToLocalStorage();
            syncToGoogleSheets();
            
            alert('Pengajuan pinjaman berhasil dikirim! Anda akan mendapat notifikasi saat pengajuan diproses.');
            closeLoanModal('modalSimulasi');
        }

        function updateTanggalJatuhTempo() {
            const today = new Date();
            const skema = pengajuanPinjaman.skema;
            const jangkaWaktu = pengajuanPinjaman.jangkaWaktu;
            
            let tanggalJatuhTempo = new Date(today);
            if (skema === 'harian') tanggalJatuhTempo.setDate(today.getDate() + jangkaWaktu);
            else if (skema === 'bulanan') tanggalJatuhTempo.setMonth(today.getMonth() + jangkaWaktu);
            else if (skema === 'tahunan') tanggalJatuhTempo.setFullYear(today.getFullYear() + jangkaWaktu);
            
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            const formattedDate = tanggalJatuhTempo.toLocaleDateString('id-ID', options);
            
            const tanggalJatuhTempoEl = document.getElementById('tanggalJatuhTempo');
            if (tanggalJatuhTempoEl) tanggalJatuhTempoEl.textContent = formattedDate;
        }

        // ================ FUNGSI UMUM ================
        function updateLastUpdatedTime() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            const timeStr = now.toLocaleDateString('id-ID', options) + ' WIB';
            const lastUpdated = document.getElementById('lastUpdatedTime');
            if (lastUpdated) lastUpdated.textContent = timeStr;
        }

        function showNotification(message) {
            alert(message);
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                alert('Anda telah logout. Mengarahkan ke halaman utama...');
                setTimeout(() => { window.location.href = 'index.html'; }, 1000);
            }
        }

        function changePassword() {
            const current = document.getElementById('currentPassword')?.value;
            const newPass = document.getElementById('newPassword')?.value;
            const confirm = document.getElementById('confirmPassword')?.value;
            
            if (!current || !newPass || !confirm) { alert('Harap isi semua field password!'); return; }
            if (newPass !== confirm) { alert('Password baru dan konfirmasi password tidak cocok!'); return; }
            if (newPass.length < 6) { alert('Password baru minimal 6 karakter!'); return; }
            
            alert('Password berhasil diubah!');
            closeAkunModal('modalPassword');
            
            const currentEl = document.getElementById('currentPassword');
            const newEl = document.getElementById('newPassword');
            const confirmEl = document.getElementById('confirmPassword');
            if (currentEl) currentEl.value = '';
            if (newEl) newEl.value = '';
            if (confirmEl) confirmEl.value = '';
        }

        function printCertificate() {
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html><head><title>Bukti Pelunasan Pinjaman</title>
                <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
                <style>body{font-family:'Poppins',sans-serif;padding:40px;max-width:800px;margin:0 auto;}</style></head>
                <body><div style="border:2px solid #2c5f2d;border-radius:20px;padding:40px;background:white;">
                <h1 style="color:#2c5f2d;">BUKTI PELUNASAN PINJAMAN</h1>
                <p>Koperasi KUD Asmara Tani</p>
                <hr><p><strong>Nama:</strong> ${memberData.nama}</p>
                <p><strong>ID/NIA:</strong> ${memberData.id}</p>
                <p><strong>Nominal Pinjaman:</strong> ${formatRupiah(loanData.lunas.nominal)}</p>
                <p><strong>Tanggal Pelunasan:</strong> ${formatDate(loanData.lunas.tanggalPelunasan)}</p>
                <p><strong>Status:</strong> LUNAS</p>
                <hr><p style="text-align:center;">Dokumen ini adalah bukti sah pelunasan pinjaman</p>
                </div><script>window.onload=function(){window.print();}<\/script></body></html>
            `);
            printWindow.document.close();
        }

        // ================ INISIALISASI ================
        document.addEventListener('DOMContentLoaded', function() {
            // Load data dari LocalStorage
            loadFromLocalStorage();
            
            // Sinkron dari Google Sheets (simulasi)
            syncFromGoogleSheets();
            
            // Update semua data
            updateAllFinancialData();
            
            // Set active page ke home
            switchPage('home');
            
            // Setup event listeners untuk skema pinjaman
            const skemaOptions = document.querySelectorAll('.skema-option');
            skemaOptions.forEach(option => {
                option.addEventListener('click', function() {
                    skemaOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    const skema = this.getAttribute('data-skema');
                    pengajuanPinjaman.skema = skema;
                    
                    const jangkaWaktuSelect = document.getElementById('jangkaWaktu');
                    if (jangkaWaktuSelect) {
                        jangkaWaktuSelect.innerHTML = '';
                        
                        if (skema === 'harian') {
                            jangkaWaktuSelect.innerHTML = `<option value="7">7 Hari</option><option value="14">14 Hari</option>
                                <option value="30">30 Hari</option><option value="60">60 Hari</option><option value="90">90 Hari</option>`;
                            jangkaWaktuSelect.value = '7';
                            pengajuanPinjaman.jangkaWaktu = 7;
                        } else if (skema === 'bulanan') {
                            jangkaWaktuSelect.innerHTML = `<option value="1">1 Bulan</option><option value="3">3 Bulan</option>
                                <option value="6">6 Bulan</option><option value="12">12 Bulan</option>`;
                            jangkaWaktuSelect.value = '3';
                            pengajuanPinjaman.jangkaWaktu = 3;
                        } else if (skema === 'tahunan') {
                            jangkaWaktuSelect.innerHTML = `<option value="1">1 Tahun</option><option value="2">2 Tahun</option>
                                <option value="3">3 Tahun</option><option value="5">5 Tahun</option>`;
                            jangkaWaktuSelect.value = '1';
                            pengajuanPinjaman.jangkaWaktu = 1;
                        }
                    }
                    
                    updateTanggalJatuhTempo();
                });
            });
            
            // Event listener untuk jangka waktu
            const jangkaWaktu = document.getElementById('jangkaWaktu');
            if (jangkaWaktu) {
                jangkaWaktu.addEventListener('change', function() {
                    pengajuanPinjaman.jangkaWaktu = parseInt(this.value);
                    updateTanggalJatuhTempo();
                });
            }
            
            // Event listener untuk nominal pinjaman
            const nominalPinjaman = document.getElementById('nominalPinjaman');
            if (nominalPinjaman) {
                nominalPinjaman.addEventListener('change', function() {
                    const nominal = parseInt(this.value);
                    const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
                    const limitPinjaman = Math.floor(totalSimpanan * memberData.loanLimitPercentage);
                    const tersediaPinjaman = limitPinjaman - memberData.loanActive;
                    
                    if (nominal > tersediaPinjaman) {
                        alert(`Nominal pinjaman melebihi limit tersedia (${formatRupiah(tersediaPinjaman)})`);
                        this.value = '';
                        return;
                    }
                    if (nominal < MINIMUM_PINJAMAN) {
                        alert(`Minimum pinjaman adalah ${formatRupiah(MINIMUM_PINJAMAN)}`);
                        this.value = '';
                        return;
                    }
                    pengajuanPinjaman.nominal = nominal;
                    hideError('nominalPinjaman');
                });
            }
            
            // Event listener untuk jenis pinjaman
            const jenisPinjaman = document.getElementById('jenisPinjaman');
            if (jenisPinjaman) {
                jenisPinjaman.addEventListener('change', function() {
                    pengajuanPinjaman.jenis = this.value;
                    hideError('jenisPinjaman');
                });
            }
            
            // Event listener untuk peruntukan pinjaman
            const peruntukanPinjaman = document.getElementById('peruntukanPinjaman');
            if (peruntukanPinjaman) {
                peruntukanPinjaman.addEventListener('change', function() {
                    pengajuanPinjaman.peruntukan = this.value;
                    hideError('peruntukanPinjaman');
                });
            }
            
            // Setup tombol pengajuan
            const btnPengajuan = document.getElementById('btnPengajuan');
            if (btnPengajuan) {
                btnPengajuan.addEventListener('click', function() {
                    resetFormPengajuan();
                    openLoanModal('modalPengajuan');
                    
                    const totalSimpanan = memberData.pokok + memberData.wajib + memberData.sukarela;
                    const warningTotalSimpanan = document.getElementById('warningTotalSimpanan');
                    const nominalPinjaman = document.getElementById('nominalPinjaman');
                    const btnLanjutSimulasi = document.getElementById('btnLanjutSimulasi');
                    
                    if (warningTotalSimpanan) {
                        if (totalSimpanan < MINIMUM_PINJAMAN) {
                            warningTotalSimpanan.style.display = 'block';
                            if (nominalPinjaman) nominalPinjaman.disabled = true;
                            if (btnLanjutSimulasi) btnLanjutSimulasi.disabled = true;
                        } else {
                            warningTotalSimpanan.style.display = 'none';
                            if (nominalPinjaman) nominalPinjaman.disabled = false;
                            if (btnLanjutSimulasi) btnLanjutSimulasi.disabled = false;
                        }
                    }
                });
            }
            
            // Setup modal close buttons
            const closeButtons = document.querySelectorAll('.modal-close, .btn-tutup, .btn-batal');
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    if (modal) {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            });
            
            const closeAkunButtons = document.querySelectorAll('.close-btn-akun, .close-btn');
            closeAkunButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal-akun, .modal');
                    if (modal) modal.style.display = 'none';
                });
            });
            
            // Tutup modal jika klik di luar
            window.onclick = function(event) {
                const modals = document.querySelectorAll('.modal, .modal-akun, .premium-modal');
                modals.forEach(modal => {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            };
            
            // Simpan data ke localStorage secara periodik (setiap 30 detik)
            setInterval(() => {
                saveToLocalStorage();
                console.log('ðŸ”„ Auto-save ke LocalStorage');
            }, 30000);
            
            // Sinkron ke Google Sheets setiap 5 menit (jika online)
            setInterval(() => {
                if (navigator.onLine) {
                    syncToGoogleSheets();
                }
            }, 300000);
        });
    </script>
</body>
</html>
